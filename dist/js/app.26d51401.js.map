{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/panel/index.vue?a167","webpack:///./src/views/overview-info/index.vue?f209","webpack:///./src/views/monitor-toolbar/index.vue?8439","webpack:///./src/views/biz-group-info/index.vue?d132","webpack:///./src/app.vue","webpack:///./src/scenes/util/location.ts","webpack:///./src/scenes/util/raycaster.ts","webpack:///./src/scenes/odc/event/mousemove.ts","webpack:///./src/scenes/odc/event/click.ts","webpack:///./src/scenes/odc/event.ts","webpack:///./src/scenes/odc/model/computer-host/host.ts","webpack:///./src/scenes/odc/model/computer-host/hw-host.ts","webpack:///./src/scenes/util/path.ts","webpack:///./src/scenes/odc/model/computer-host/apple-host.ts","webpack:///./src/scenes/odc/model/monitor/monitor.ts","webpack:///./src/scenes/util/generate-text-sprite.js","webpack:///./src/scenes/util/object-3d.ts","webpack:///./src/scenes/odc/model/desktop/desktop.ts","webpack:///./src/scenes/util/camera.ts","webpack:///./src/scenes/odc/model/key-point/key-point.ts","webpack:///./src/scenes/odc/model/seat/seat.ts","webpack:///./src/scenes/odc/model/coffee-table/coffee-table.ts","webpack:///./src/scenes/odc/model/sofa/sofa.ts","webpack:///./src/scenes/odc/model/kitchen/kitchen.ts","webpack:///./src/data/buildings-data.ts","webpack:///./src/data/workstations-data.ts","webpack:///./src/data/key-point-data.ts","webpack:///./src/scenes/odc/model/floor/floor.ts","webpack:///./src/scenes/odc/model/workstation/workstation.ts","webpack:///./src/scenes/odc/model/wall/wall.ts","webpack:///./src/scenes/odc/model/wall/external-wall.ts","webpack:///./src/scenes/odc/model/wall/glass-wall.ts","webpack:///./src/scenes/odc/model/wall/inner-wall.ts","webpack:///./src/data/camera-monitor-data.ts","webpack:///./src/scenes/odc/model/camera-monitor/camera-monitor.ts","webpack:///./src/scenes/odc/structure.ts","webpack:///./src/scenes/util/highlight.ts","webpack:///./src/scenes/odc/helper.ts","webpack:///./src/scenes/odc/index.ts","webpack:///./src/views/biz-group-info/index.vue","webpack:///./src/components/panel/index.vue","webpack:///./src/components/panel/index.vue?8a26","webpack:///./src/components/panel/index.vue?5c99","webpack:///./src/views/biz-group-info/index.vue?c361","webpack:///./src/views/biz-group-info/index.vue?b9f8","webpack:///./src/views/overview-info/index.vue","webpack:///./src/views/overview-info/index.vue?5b8f","webpack:///./src/views/overview-info/index.vue?7e7f","webpack:///./src/views/monitor-toolbar/index.vue","webpack:///./src/views/monitor-toolbar/index.vue?0c8c","webpack:///./src/views/monitor-toolbar/index.vue?37d7","webpack:///./src/app.vue?a29c","webpack:///./src/app.vue?1c87","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","onSeatClick","onMonitorClick","onMonitorMouseMove","onRefresh","clientX2X","clientX","innerWidth","clientY2Y","clientY","innerHeight","measurement","measurementLength","viewLength","begin","end","map","element","beginX","beginY","endX","endY","centerZ","centerX","x","z","getIntersectedMesh","pointer","intersectObject","camera","raycasterInstance","setFromCamera","intersects","intersectObjects","highlightOutlinePass","this","observers","moveRaycaster","initEvent","y","reduce","acc","observer","activeMesh","getMousemoveObserveObjects","active","inactive","document","addEventListener","event","requestAnimationFrame","selectedObjects","observerGroup","getObserverGroup","forEach","beforeMousemove","onMousemove","controls","clickRaycaster","getClickObserveObjects","beforeClick","onClick","globalEvent","baseHeight","baseDepth","baseWidth","host","createHost","hostMaterial","material","add","color","createHostGeometry","createHostMaterial","userData","clazzName","HWHost","path","publicPath","AppleHost","logo","createLogo","resource","logoObject3D","Error","obj","clone","position","rotation","Math","PI","scale","set","Promise","resolve","MTLLoader","load","materials","objLoader","OBJLoader","setMaterials","undefined","Monitor","monitorObject3D","monitor","external","createMonitor","screenMaterial","getObjectByName","loader","screenTexture","screenMesh","loadingManager","generateTextSprite","text","config","fontFace","fontSize","fontColor","fontBold","fontItalic","textAlign","borderThickness","borderColor","borderRadius","backgroundColor","ruler","createElement","getContext","font","textLines","split","textWidth","line","metrics","measureText","width","textHeight","canvas","_ceilPow2","height","context","fillStyle","strokeStyle","lineWidth","_roundRect","fillTextX","left","start","center","right","curY","fillText","texture","THREE","needsUpdate","spriteMaterial","transparent","sprite","num","pow","ctx","w","h","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","fill","stroke","box3","v3","setFromObject","getSize","setEqualScale","oldX","oldY","oldZ","getDefinedObject3D","parent","getDefinedObject3DByName","getObject3DChildren","collection","collectObj","children","child","getObject3DChild","id","seatInfo","monitors","monitorTips","Desktop","createMacMini","macMini","macMiniTip","createPC","pc","pcTip","monitorTip","member","index","visible","silence","object3D","theMonitorObj","Array","isArray","monitorObj","highlight","type","createTextSprite","info","hwHost","hwTip","monitorZ","tipX","textSprite","cameraPosition","orbitTargetPosition","endCameraPosition","endOrbitTargetPosition","tween","x1","y1","z1","x2","y2","z2","onStart","enabled","to","onUpdate","target","update","onComplete","easing","Cubic","InOut","size","looAtPosition","keyPoint","createGeometry","createMaterial","KeyPoint","observationArea","lookAt","side","geometry","rotateX","getWorldPosition","basePosition","theSeatInfo","table","createTable","createKeyPoint","desktop","createDeskTop","light","createLight","Seat","code","then","locationKeyPoint","heightY","lookX","keyPointX","keyPointZ","lockAtPosition","setLookAt","topLight","lookAtX","lookAtY","lookAtZ","decay","tableX","dispatchEvent","message","desktopName","rowCode","tableZ","tableY","tableObject3D","coffeeTable","createCoffeeTable","CoffeeTable","coffeeTableObject3D","sofa","createSofa","Sofa","sofaObject3D","sofaObj","atan2","translateY","loadManager","kitchen","createKitchen","Kitchen","kitchenObject3D","SeatAreaType","WALL_HEIGHT","WALL_THICKNESS","walls","kitchenStation","northSofaStation","coffeeTableStation","sideSpacing","northWorkstationArea","southWorkstationArea","generateWorkstationData","row","pre","north","areaCode","currentRow","northWorkstation","southWorkstation","south","odcInfo","totalSeat","useSeat","bizGroupInfo","seats","keyPointPositions","floor","initGeometry","initMaterial","calculatePosition","wrapS","wrapT","repeat","xLength","zLength","workstation","createWorkstation","activeDesktop","definedObject3D","allSeats","innerGroup","seat","spacing","xCenter","idx","seatGroup","createSeatGroup","rowSeats","seatsGroup","seatsLength","itemNumber","tempSeat","eastSeat","westSeat","offset","thickness","wall","calculateRotation","a","b","sqrt","opacity","southCameraMonitors","observedSeatRowIndex","northCameraMonitors","areaType","initCameraMonitor","initLine","find","item","includes","lookAtPosition","hex","points","setFromPoints","setAttribute","g","vertexColors","renderKitchen","northSofa","renderNorthSofa","renderCoffeeTable","renderFloor","keyPoints","renderKeyPoints","renderWall","renderCameraMonitor","renderStation","cameraMonitor","addObserver","isNeedLiftCamera","itm","workStationArea","workStation","theWorkstation","beginPointer","endPointer","generateCameraMonitor","cameraMonitors","cameraMonitorPosition","scene","renderer","composer","EffectComposer","addPass","RenderPass","outlinePass","OutlinePass","edgeStrength","Number","edgeGlow","edgeThickness","pulsePeriod","usePatternTexture","visibleEdgeColor","hiddenEdgeColor","effectFXAA","ShaderPass","FXAAShader","uniforms","axesHelper","createAxesHelper","gridHelper","createGridHelper","stats","createStats","body","append","dom","isNeedHelp","location","search","onLoad","all","loadResource","initRender","initCamera","oldCamera","initScene","initControls","baseMonitorTarget","copy","helper","initLight","highlightComposer","structure","locationODC","animate","lightOff","seatCode","lightOn","aspect","updateProjectionMatrix","setSize","mousemoveEvent","addObservers","clickEvent","OrbitControls","domElement","maxDistance","screenSpacePanning","maxPolarAngle","ambientLight","antialias","alpha","setClearAlpha","setPixelRatio","devicePixelRatio","render","expandByObject","getCenter","class","title","groups","group","effect","disable-transitions","activeSeat","toUpperCase","shadow","header","theTitle","components","ElCard","props","required","String","setup","__scopeId","OPanel","ElTag","emits","_props","emit","usageRate","ceil","stroke-width","percentage","default","ElProgress","icon","refresh","handleClick","seatAreaType","handleMouseMove","ElButtonGroup","ElButton","odcInstance","area","option","BizGroupInfo","OverviewInfo","MonitorToolbar","odc","loading","service","lock","background","close","lightSeat","getCurrentCameraMonitor","getStructure","getMonitors","currentCameraMonitor","getCamera","getControls","setColor","setScale","mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,gBAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,oGCvJT,W,oCCAA,W,2DCAA,W,oCCAA,W,0UCCI,eAAiB,GACjB,eAA4C,GAA3B,YAAY,EAAAyC,aAAW,wBACxC,eAIE,GAHG,kBAAmB,EAAAC,eACnB,mBAAoB,EAAAC,mBACpB,UAAS,EAAAC,W,gTCJLC,G,UAAY,SAACC,GACtB,OAAQA,EAAUR,OAAOS,WAAc,EAAI,IAGlCC,EAAY,SAACC,GACtB,OAASA,EAAUX,OAAOY,YAAe,EAAI,GAGpC,EAAQ,SAACC,GAElB,IAAMC,EAAoB,MACpBC,EAAa,KACnB,OAAQF,EAAcE,EAAcD,GAG3B,EAAuB,SAACE,EAAqBC,GACtD,MAAyBD,EAAME,KAAI,SAACC,GAAD,OAAa,EAAMA,MAAtD,sBAAOC,EAAP,KAAeC,EAAf,KACA,EAAqBJ,EAAIC,KAAI,SAACC,GAAD,OAAa,EAAMA,MAAhD,sBAAOG,EAAP,KAAaC,EAAb,KAEMC,GAAWJ,EAASE,GAAQ,EAE5BG,GAAWJ,EAASE,GAAQ,EAClC,MAAO,CAAEG,EAAGD,EAASE,EAAGH,ICtBfI,EAAqB,SAAC,EAE/BC,EACAC,GAC4B,IAH1BC,EAG0B,EAH1BA,OAAQC,EAGkB,EAHlBA,kBAIVA,EAAkBC,cAAcJ,EAASE,GACzC,IAAMG,EAAaF,EAAkBG,iBAAiBL,GAAiB,GACvE,GAAII,EAAWpF,OAAS,EACpB,OAAOoF,EAAW,GAAGtC,QCchB,EAAb,WAMI,cAMC,IALGmC,EAKH,EALGA,OACAK,EAIH,EAJGA,qBAIH,mMAEGC,KAAKC,UAAY,GAEjBD,KAAKN,OAASA,EACdM,KAAKE,cAAgB,IAAI,OAEzBF,KAAKD,qBAAuBA,EAC5BC,KAAKG,YApBb,mDAuBW,SAAaF,GAA8B,OAC9C,EAAAD,KAAKC,WAAUlF,KAAf,uBAAuBkF,MAxB/B,8BA4BY,YAAmD,WAAhCZ,EAAgC,EAAhCA,EAAGe,EAA6B,EAA7BA,EAE1B,OAAOJ,KAAKC,UAAUI,QAClB,SAACC,EAAKC,GACF,IAAMC,EAAajB,EACf,CAAEG,OAAQ,EAAKA,OAAQC,kBAAmB,EAAKO,eAC/C,CAAEb,IAAGe,KACLG,EAASE,8BAEb,OAAOD,EACD,CACIE,OAAQ,GAAF,sBAAMJ,EAAII,QAAV,CAAkB,CAAEF,aAAYD,cACtCI,SAAUL,EAAIK,UAElB,CACID,OAAQJ,EAAII,OACZC,SAAU,GAAF,sBAAML,EAAIK,UAAV,CAAoB,CAAEJ,iBAG5C,CAAEG,OAAQ,GAAIC,SAAU,OA/CpC,uBAmDY,WAAS,WACbC,SAASC,iBAAiB,aAAa,SAACC,GACpC,IAAMzB,EAAInB,EAAU4C,EAAM3C,SACpBiC,EAAI/B,EAAUyC,EAAMxC,SAC1ByC,uBAAsB,WAElB,EAAKhB,qBAAqBiB,gBAAkB,GAE5C,IAAMC,EAAgB,EAAKC,iBAAiB,CAAE7B,IAAGe,MAEjDa,EAAcN,SAASQ,SAAQ,YAAiB,IAAdZ,EAAc,EAAdA,SAC1BA,EAASa,iBACTb,EAASa,gBAAgB,CACrBrB,qBAAsB,EAAKA,0BAKvCkB,EAAcP,OAAOS,SAAQ,YAA6B,IAA1BZ,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,WAClCD,EAASa,iBACTb,EAASa,gBAAgB,CACrBrB,qBAAsB,EAAKA,uBAG/BQ,EAASc,aACTd,EAASc,YACL,CAAEtB,qBAAsB,EAAKA,sBAC7BS,gBA9E5B,KCIa,EAAb,WAQI,cAQC,IAPGd,EAOH,EAPGA,OACAK,EAMH,EANGA,qBACAuB,EAKH,EALGA,SAKH,2OAEGtB,KAAKC,UAAY,GAEjBD,KAAKN,OAASA,EACdM,KAAKsB,SAAWA,EAChBtB,KAAKuB,eAAiB,IAAI,OAE1BvB,KAAKD,qBAAuBA,EAC5BC,KAAKG,YAzBb,mDA4BW,SAAaF,GAA0B,OAC1C,EAAAD,KAAKC,WAAUlF,KAAf,uBAAuBkF,MA7B/B,8BAiCY,YAAmD,WAAhCZ,EAAgC,EAAhCA,EAAGe,EAA6B,EAA7BA,EAE1B,OAAOJ,KAAKC,UAAUI,QAClB,SAACC,EAAKC,GACF,IAAMC,EAAajB,EACf,CAAEG,OAAQ,EAAKA,OAAQC,kBAAmB,EAAK4B,gBAC/C,CAAElC,IAAGe,KACLG,EAASiB,0BAEb,OAAOhB,EACD,CACIE,OAAQ,GAAF,sBAAMJ,EAAII,QAAV,CAAkB,CAAEF,aAAYD,cACtCI,SAAUL,EAAIK,UAElB,CACID,OAAQJ,EAAII,OACZC,SAAU,GAAF,sBAAML,EAAIK,UAAV,CAAoB,CAAEJ,iBAG5C,CAAEG,OAAQ,GAAIC,SAAU,OApDpC,uBAwDY,WAAS,WACbC,SAASC,iBAAiB,SAAS,SAACC,GAChC,IAAMzB,EAAInB,EAAU4C,EAAM3C,SACpBiC,EAAI/B,EAAUyC,EAAMxC,SAGpB2C,EAAgB,EAAKC,iBAAiB,CAAE7B,IAAGe,MACjDa,EAAcN,SAASQ,SAAQ,YAAiB,IAAdZ,EAAc,EAAdA,SAC1BA,EAASkB,aAAalB,EAASkB,iBAGvCR,EAAcP,OAAOS,SAAQ,YAA6B,IAA1BZ,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,WAClCD,EAASkB,aAAalB,EAASkB,cAC/BlB,EAASmB,SACTnB,EAASmB,QACL,CACI3B,qBAAsB,EAAKA,qBAC3BuB,SAAU,EAAKA,SACf5B,OAAQ,EAAKA,QAEjBc,aA5ExB,KC1BamB,EAAc,IAAI,O,4DCAlB,G,UAAb,wDAOI,iDACI,eADJ,wQAEI,EAAKC,WAAa,GAClB,EAAKC,UAAY,EACjB,EAAKC,UAAY,GACjB,EAAKC,KAAO,EAAKC,aACjB,EAAKC,aAAe,EAAKF,KAAKG,SAC9B,EAAKC,IAAI,EAAKJ,MAPlB,EAPJ,6CAiBW,WACH/B,KAAK+B,KAAKG,SAAW,IAAI,OAAwB,CAAEE,MAAO,YAlBlE,qBAqBW,WACHpC,KAAK+B,KAAKG,SAAWlC,KAAKiC,eAtBlC,gCAyBc,WACN,OAAO,IAAI,OAAkBjC,KAAK8B,UAAW9B,KAAK4B,WAAY5B,KAAK6B,aA1B3E,gCA6Bc,WACN,OAAO,IAAI,OAA0B,CAAEO,MAAO,cA9BtD,wBAiCc,WACN,OAAO,IAAI,OAAWpC,KAAKqC,qBAAsBrC,KAAKsC,0BAlC9D,GAA0B,SCAb,EAAb,wDAGI,iDACI,eACA,EAAKC,SAASC,UAAYC,EAAOD,UAFrC,EAHJ,UAA4B,G,eAAf,E,YACiB,U,gBCHjB/E,EAAI,SAACiF,GACd,IAAMC,EAAa,eACwB,MAAO,GAAP,OAAUA,GAAV,OAAuBD,ICMzD,EAAb,wDAsBI,iDACI,eADJ,gDAEI,EAAKH,SAASC,UAAYI,EAAUJ,UACpC,EAAKK,KAAO,EAAKC,aACjB,EAAKX,IAAI,EAAKU,MAJlB,EAtBJ,yDA6Bc,WACN,OAAO,IAAI,OAA0B,MA9B7C,wBAiCY,WACJ,IAAKD,EAAUG,SAASC,aAAc,MAAM,IAAIC,MAAM,eACtD,IAAMC,EAAMN,EAAUG,SAASC,aAAaG,QAM5C,OALAD,EAAIE,SAAS/D,EAAIW,KAAK+B,KAAKqB,SAAS/D,EAAIW,KAAK8B,UAAY,EACzDoB,EAAIE,SAAS9D,EAAIU,KAAK+B,KAAKqB,SAAS9D,EACpC4D,EAAIE,SAAShD,EAAIJ,KAAK4B,WAAa,EACnCsB,EAAIG,SAASjD,GAAKkD,KAAKC,GAAK,EAC5BL,EAAIM,MAAMC,IAAI,IAAM,IAAM,KACnBP,KAzCf,2BAOW,WACH,OAAO,IAAIQ,SAAQ,SAACC,IAChB,IAAIC,EAAA,MAAYC,KAAKpG,EAAE,wCAAwC,SAACqG,GAC5D,IAAMC,EAAY,IAAIC,EAAA,KACtBD,EAAUE,aAAaH,GACvBC,EAAUF,KAAKpG,EAAE,wCAAwC,SAACyF,GACtDN,EAAUG,SAASC,aAAeE,EAClCS,EAAQ,CAAEX,aAAcE,iBAd5C,GAA+B,G,eAAlB,E,YACiB,a,eADjB,E,WAG6D,CAClEF,kBAAckB,ICLf,IAAM,EAAb,wDAwBI,iDACI,eADJ,+JA4BwB,WACpB,IAAKC,EAAQpB,SAASqB,gBAAiB,MAAM,IAAInB,MAAM,6BACvD,IAAMoB,EAAUF,EAAQpB,SAASqB,gBAAgBjB,QAEjD,OADAkB,EAAQ9B,SAAS+B,UAAW,EACrBD,KA9BP,EAAKA,QAAU,EAAKE,gBACpB,EAAKhC,SAASC,UAAY2B,EAAQ3B,UAElC,EAAKgC,eAAkB,EAAKH,QAAQI,gBAAgB,UAC/CvC,SACL,EAAKC,IAAI,EAAKkC,SAPlB,EAxBJ,6CAkCW,WACH,IAAMK,EAAS,IAAI,OACbC,EAAgBD,EAAOb,KAAKpG,EAAE,wBAC9BmH,EAAa5E,KAAKqE,QAAQI,gBAAgB,UAC5CG,aAAsB,SACtBA,EAAW1C,SAAW,IAAI,OAAwB,CAC9CrD,IAAK8F,OAxCrB,qBA6CW,WACH,IAAMC,EAAa5E,KAAKqE,QAAQI,gBAAgB,UAC5CG,aAAsB,SACtBA,EAAW1C,SAAWlC,KAAKwE,mBAhDvC,2BAOW,SAAoBK,GACvB,OAAO,IAAInB,SAAQ,SAACC,GAChB,IAAIC,EAAA,KAAUiB,GAAgBhB,KAAKpG,EAAE,kCAAkC,SAACqG,GACpE,IAAMC,EAAY,IAAIC,EAAA,KAAUa,GAChCd,EAAUE,aAAaH,GACvBC,EAAUF,KAAKpG,EAAE,kCAAkC,SAACyF,GAEhD,OADAiB,EAAQpB,SAASqB,gBAAkBlB,EAC5BS,EAAQ,CAAES,gBAAiBlB,iBAdtD,GAA6B,Q,eAAhB,E,YACiB,W,eADjB,E,WAGoD,CACzDkB,qBAAiBF,I,wBCQZY,EAAqB,SAAUC,EAAMC,GAC9CA,IAAWA,EAAS,IAEpB,IAAIC,EAAWD,EAAOpK,eAAe,YAAcoK,EAAO,YAAc,QACpEE,EAAWF,EAAOpK,eAAe,YAAcoK,EAAO,YAAc,GACpEG,EAAYH,EAAOpK,eAAe,aAAeoK,EAAO,aAAe,mBACvEI,IAAWJ,EAAOpK,eAAe,aAAcoK,EAAO,YACtDK,IAAaL,EAAOpK,eAAe,eAAgBoK,EAAO,cAC1DM,EAAYN,EAAOpK,eAAe,aAAeoK,EAAO,aAAe,OACvEO,EAAkBP,EAAOpK,eAAe,mBAAqBoK,EAAO,mBAAqB,EACzFQ,EAAcR,EAAOpK,eAAe,eAClCoK,EAAO,eACP,mBACFS,EAAeT,EAAOpK,eAAe,gBAAkBoK,EAAO,gBAAkB,EAChFU,EAAkBV,EAAOpK,eAAe,mBACtCoK,EAAO,mBACP,yBAEFW,EAAQ/E,SAASgF,cAAc,UAAUC,WAAW,MACxDF,EAAMG,MACDV,EAAW,QAAU,KAAOC,EAAa,UAAY,IAAMH,EAAW,MAAQD,EAEnF,IAAIc,EAAYhB,EAAKiB,MAAM,MACvBC,EAAY,EAEhBF,EAAU5E,SAAQ,SAAC+E,GACf,IAAIC,EAAUR,EAAMS,YAAYF,GAChCD,EAAYE,EAAQE,MAAQJ,EAAYE,EAAQE,MAAQJ,KAG5D,IAAIK,EAAwB,IAAXpB,EAAiBa,EAAUtL,OAGxC8L,EAAS3F,SAASgF,cAAc,UACpCW,EAAOF,MAAQG,EAAUP,GACzBM,EAAOE,OAASD,EAAUF,GAC1B,IAAII,EAAUH,EAAOV,WAAW,MAGhCa,EAAQZ,KAAOH,EAAMG,KACrBY,EAAQC,UAAYjB,EACpBgB,EAAQE,YAAcpB,EACtBkB,EAAQG,UAAYtB,EACpBuB,EACIJ,EACAnB,EAAkB,EAClBA,EAAkB,EAClBU,EAAYV,EACZe,EAAaf,EACbE,GAIJiB,EAAQC,UAAYxB,EACpBuB,EAAQpB,UAAYA,EACpB,IAAIyB,EAAY,CACZC,KAAMzB,EACN0B,MAAO1B,EACP2B,OAAQjB,EAAY,EAAIV,EACxB4B,MAAOlB,EAAYV,EACnB3G,IAAKqH,EAAYV,GAEjB6B,EAAOlC,EAAWK,EACtBQ,EAAU5E,SAAQ,SAAC+E,GACfQ,EAAQW,SAASnB,EAAMa,EAAUzB,GAAY8B,GAC7CA,GAAmB,IAAXlC,KAIZ,IAAIoC,EAAU,IAAIC,OAAchB,GAChCe,EAAQE,aAAc,EACtB,IAAIC,EAAiB,IAAIF,OAAqB,CAC1C1I,IAAKyI,EACLI,aAAa,IAEbC,EAAS,IAAIJ,OAAaE,GAG9B,OAFAE,EAAOnE,MAAMC,IAAI8C,EAAOF,MAAQ,EAAGE,EAAOE,OAAS,EAAG,GAE/CkB,EAGP,SAASnB,EAAUoB,GACf,IAAIrN,EAAI,EACR,MAAOqN,EAAMtE,KAAKuE,IAAI,EAAGtN,GACrBA,IAEJ,OAAO+I,KAAKuE,IAAI,EAAGtN,GAIvB,SAASuM,EAAWgB,EAAKzI,EAAGe,EAAG2H,EAAGC,EAAGrL,GACjCmL,EAAIG,YACJH,EAAII,OAAO7I,EAAI1C,EAAGyD,GAClB0H,EAAIK,OAAO9I,EAAI0I,EAAIpL,EAAGyD,GACtB0H,EAAIM,iBAAiB/I,EAAI0I,EAAG3H,EAAGf,EAAI0I,EAAG3H,EAAIzD,GAC1CmL,EAAIK,OAAO9I,EAAI0I,EAAG3H,EAAI4H,EAAIrL,GAC1BmL,EAAIM,iBAAiB/I,EAAI0I,EAAG3H,EAAI4H,EAAG3I,EAAI0I,EAAIpL,EAAGyD,EAAI4H,GAClDF,EAAIK,OAAO9I,EAAI1C,EAAGyD,EAAI4H,GACtBF,EAAIM,iBAAiB/I,EAAGe,EAAI4H,EAAG3I,EAAGe,EAAI4H,EAAIrL,GAC1CmL,EAAIK,OAAO9I,EAAGe,EAAIzD,GAClBmL,EAAIM,iBAAiB/I,EAAGe,EAAGf,EAAI1C,EAAGyD,GAClC0H,EAAIO,YACJP,EAAIQ,OACJR,EAAIS,W,YCxHC,EAAU,SAACrF,GACpB,IAAMsF,EAAO,IAAI,OACXC,EAAK,IAAI,QAEf,OADAD,EAAKE,cAAcxF,GACZsF,EAAKG,QAAQF,IAGXG,EAAgB,SAAC1F,EAAqBM,GAC/C,MAAsCN,EAAIM,MAA/BqF,EAAX,EAAQxJ,EAAYyJ,EAApB,EAAiB1I,EAAY2I,EAA7B,EAA0BzJ,EAC1B4D,EAAIM,MAAMC,IAAIoF,EAAOrF,EAAOsF,EAAOtF,EAAOuF,EAAOvF,IAGxCwF,EAAqB,SAArBA,EAAsB9F,GACf,MAAhB,OAAIA,EAAI+F,OAEG,UAAA/F,EAAI+F,cAAJ,SAAY1G,SAASC,UAAYU,EAAI+F,OAASD,EAAmB9F,EAAI+F,aAE5E,GAIKC,EAA2B,SAA3BA,EACThG,EACA7G,GAEA,OAAI6G,EAAI+F,OAEG/F,EAAI+F,OAAO1G,UAAYW,EAAI+F,OAAO1G,SAASC,YAAcnG,EAC1D6G,EAAI+F,OACJC,EAAyBhG,EAAI+F,OAAQ5M,QAE3C,GAIK8M,EAAsB,SAACjG,EAAqBV,GACrD,IAAM4G,EAA+B,GAC/BC,EAAa,SAAbA,EAAcnG,GAAuB,OACnC,UAAAA,EAAIX,gBAAJ,eAAcC,aAAcA,EAC5B4G,EAAWrO,KAAKmI,GAEZA,EAAIoG,UAAUpG,EAAIoG,SAASnI,SAAQ,SAACoI,GAAD,OAAWF,EAAWE,OAIrE,OADAF,EAAWnG,GACJkG,GAGE,EAAmB,SAAnBI,EACTtG,EACAV,EACAiH,GAC4B,QAC5B,IAAI,UAAAvG,EAAIX,gBAAJ,eAAcC,aAAcA,IAAa,UAAAU,EAAIX,gBAAJ,eAAckH,MAAOA,EAC9D,OAAOvG,EAEX,GAAKA,EAAIoG,SAAT,CAJ4B,uBAKRpG,EAAIoG,UALI,IAK5B,2BAAkC,KAAvBC,EAAuB,QACxB,EAAMC,EAAiBD,EAAO/G,EAAWiH,GAC/C,GAAI,EAAK,OAAO,GAPQ,iCC3CnB,EAAb,wDAUI,WAAmBpN,EAAcqN,GAAkB,iCAC/C,eAD+C,mTAE/C,EAAKC,SAAW,GAChB,EAAKC,YAAc,GAEnB,EAAKrH,SAASC,UAAYqH,EAAQrH,UAClC,MAAkC,EAAK+B,cAAclI,EAAMqN,GAAnDC,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,aAClB,IAAKD,UAAS5O,KAAd,uBAAsB4O,KACtB,IAAKC,aAAY7O,KAAjB,uBAAyB6O,IACzB,MAAgC,EAAKE,cAAczN,EAAMqN,GAAjDK,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,WACjB,EAAsB,EAAKC,SAAS5N,EAAMqN,GAAlCQ,EAAR,EAAQA,GAAIC,EAAZ,EAAYA,MAVmC,OAW/C,EAAKD,GAAKA,EACV,EAAKC,MAAQA,EACb,EAAKJ,QAAUA,EACf,EAAKC,WAAaA,EAClB,EAAK7H,IAAI,EAAK+H,IACd,EAAK/H,IAAI,EAAKgI,OACd,EAAKhI,IAAI,EAAK4H,SACd,EAAK5H,IAAI,EAAK6H,YACd,EAAKL,SAASxI,SAAQ,SAACkD,GAAD,OAAa,EAAKlC,IAAIkC,MAC5C,EAAKuF,YAAYzI,SAAQ,SAACiJ,GAAD,OAAgB,EAAKjI,IAAIiI,MApBH,EAVvD,6CAiCW,SAAO5J,GACV,IAAM6J,EAASrB,EAAmBxI,GAC5BgC,EAAS,OAAG6H,QAAH,IAAGA,OAAH,EAAGA,EAAQ9H,SAASC,UACnC,GAAIA,IAAc,EAAQA,UAAW,CAEhC6H,EAAmB3J,SACpB,IAAM4J,EAAK,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAQ9H,SAAS+H,MAC/BtK,KAAK4J,YAAYU,GAAOpI,SAASqI,SAAU,EAE3C/H,IAAc,EAAUA,YACxBxC,KAAKgK,WAAW9H,SAASqI,SAAU,EACnCvK,KAAK+J,QAAQrJ,UAEb8B,IAAc,EAAOA,YACrBxC,KAAKmK,MAAMjI,SAASqI,SAAU,EAC9BvK,KAAKkK,GAAGxJ,YAhDpB,qBAoDW,WACHV,KAAKkK,GAAGM,UACRxK,KAAK+J,QAAQS,UACbxK,KAAK2J,SAASxI,SAAQ,SAACkD,GACnBA,EAAQmG,aAEZxK,KAAKmK,MAAMjI,SAASqI,SAAU,EAC9BvK,KAAKgK,WAAW9H,SAASqI,SAAU,EACnCvK,KAAK4J,YAAYzI,SAAQ,SAACsJ,GACtBA,EAASvI,SAASqI,SAAU,OA7DxC,2BAiEY,SAAclO,EAAcqN,GAChC,IAAMC,EAAW,GACXC,EAAc,GACdc,EAAgB,IAAI,EAC1B,IAAKC,MAAMC,QAAQlB,EAASrF,SAAU,MAAO,CAAEsF,SAAU,GAAIC,YAAa,IAC1E,IAAK,IAAIrP,EAAI,EAAGA,EAAImP,EAASrF,QAAQ5J,OAAQF,IAAK,CAC9C,IAAMsQ,EAAaH,EAAcvH,QACjC0H,EAAWxH,SAASjD,GAAKkD,KAAKC,GAC9BsH,EAAWzH,SAAS9D,EAAQ,GAAJ/E,EACxBsQ,EAAWxO,KAAX,UAAqBA,EAArB,oBAAqC9B,GACrCsQ,EAAWtI,SAASuI,WAAY,EAChCD,EAAWtI,SAASwI,KAApB,kBAAsCxQ,GACtCsQ,EAAWtI,SAAS+H,MAAQ/P,EAC5BsQ,EAAWtI,SAAStI,KAAOyP,EAC3B,IAAMU,EAAapK,KAAKgL,iBAAiBtB,EAASrF,QAAQ9J,IAC1D,EAAiB,EAAQsQ,GAAjBzK,EAAR,EAAQA,EAAGd,EAAX,EAAWA,EACX8K,EAAWhH,SAAShD,EAAIA,EAAI,EAC5BgK,EAAWhH,SAAS9D,EAAIuL,EAAWzH,SAAS9D,EAAIA,EAAI,EACpD8K,EAAWlI,SAASqI,SAAU,EAC9BZ,EAAS5O,KAAK8P,GACdjB,EAAY7O,KAAKqP,GAErB,MAAO,CAAET,WAAUC,iBAvF3B,sBAyFY,SAASvN,EAAc4O,GAC3B,IAAMC,EAAS,IAAI,EACnB,EAAiB,EAAQA,GAAjB9K,EAAR,EAAQA,EAAGd,EAAX,EAAWA,EACX4L,EAAO9H,SAAS9D,GAAKA,EAAI,EACzB4L,EAAO9H,SAAShD,EAAIA,EAAI,EACxB8K,EAAO7O,KAAP,UAAiBA,EAAjB,OACA6O,EAAO3I,SAASuI,WAAY,EAC5BI,EAAO3I,SAASwI,KAAO,KACvBG,EAAO3I,SAAStI,KAAOgR,EACvB,IAAME,EAAQnL,KAAKgL,iBAAiBC,EAAKf,IAIzC,OAHAiB,EAAM/H,SAAShD,EAAIA,EAAI,EACvB+K,EAAM/H,SAAS9D,EAAI4L,EAAO9H,SAAS9D,EACnC6L,EAAMjJ,SAASqI,SAAU,EAClB,CACHL,GAAIgB,EACJf,MAAOgB,KAxGnB,2BA2GY,SAAc9O,EAAc4O,GAChC,IAAMlB,EAAU,IAAI,EACpB,EAAc,EAAQA,GAAd3J,EAAR,EAAQA,EAER,EAAwB,EAAQJ,KAAK2J,SAAS,IAAnCyB,EAAX,EAAQ9L,EAERyK,EAAQ3G,SAAS9D,EAAe,EAAX8L,EAAe,EACpCrB,EAAQ3G,SAAShD,EAAIA,EAAI,EACzB2J,EAAQ1N,KAAR,UAAkBA,EAAlB,YACA0N,EAAQxH,SAASuI,WAAY,EAC7Bf,EAAQxH,SAASwI,KAAO,UACxBhB,EAAQxH,SAAStI,KAAOgR,EACxB,IAAMjB,EAAahK,KAAKgL,iBAAiBC,EAAKlB,SAC9C,EAAoB,EAAQC,GAAjBqB,EAAX,EAAQhM,EAIR,OAHA2K,EAAW5G,SAAShD,EAAIA,EAAI,EAC5B4J,EAAW5G,SAAS9D,EAAIyK,EAAQ3G,SAAS9D,EAAI+L,EAAO,EACpDrB,EAAW9H,SAASqI,SAAU,EACvB,CACHR,QAASA,EACTC,WAAYA,KA9HxB,8BAiIY,SAAiBjF,GACrB,IAAMuG,EAAa,EAAmBvG,GAAQ,GAAI,CAC9CE,SAAU,YACVC,SAAU,GACVC,UAAW,yBACXC,UAAU,EACVC,YAAY,EACZC,UAAW,SACXC,gBAAiB,EACjBC,YAAa,yBACbC,aAAc,EACdC,gBAAiB,uBAGrB,OADAkD,EAAc0C,EAAY,IACnBA,MA/If,GAA6B,Q,eAAhB,E,YACiB,WCRvB,IAAM,EAAqB,SAAC,EAAD,KAU9B,IATE5L,EASF,EATEA,OAAQ4B,EASV,EATUA,SAENiK,EAOJ,EAPIA,eACAC,EAMJ,EANIA,oBAGgBC,EAGpB,EAHIF,eACqBG,EAEzB,EAFIF,oBAGEG,EAAQ,IAAI,OAAY,CAC1BC,GAAIL,EAAelM,EACnBwM,GAAIN,EAAenL,EACnB0L,GAAIP,EAAejM,EACnByM,GAAIP,EAAoBnM,EACxB2M,GAAIR,EAAoBpL,EACxB6L,GAAIT,EAAoBlM,IAE5BqM,EAAMO,SAAQ,WACV5K,EAAS6K,SAAU,KAEvBR,EAAMS,GACF,CACIR,GAAIH,EAAkBpM,EACtBwM,GAAIJ,EAAkBrL,EACtB0L,GAAIL,EAAkBnM,EACtByM,GAAIL,EAAuBrM,EAC3B2M,GAAIN,EAAuBtL,EAC3B6L,GAAIP,EAAuBpM,GAE/B,KAEJqM,EAAMU,UAAS,SAAC/Q,GACZoE,EAAO0D,SAAS/D,EAAI/D,EAAOsQ,GAC3BlM,EAAO0D,SAAShD,EAAI9E,EAAOuQ,GAC3BnM,EAAO0D,SAAS9D,EAAIhE,EAAOwQ,GAC3BxK,EAASgL,OAAOjN,EAAI/D,EAAOyQ,GAC3BzK,EAASgL,OAAOlM,EAAI9E,EAAO0Q,GAC3B1K,EAASgL,OAAOhN,EAAIhE,EAAO2Q,GAC3B3K,EAASiL,YAEbZ,EAAMa,YAAW,WACblL,EAAS6K,SAAU,KAEvBR,EAAMc,OAAO,OAAaC,MAAMC,OAChChB,EAAM1E,SC1CG,EAAb,wDAMI,WAAmB2F,GAAY,oCAC3B,eAD2B,6GAE3B,EAAKC,cAAgB,IAAI,QAAc,EAAG,EAAG,GAC7C,EAAKC,SAAW,IAAI,OAAW,EAAKC,eAAeH,GAAO,EAAKI,kBAC/D,EAAKF,SAASvK,SAASwI,KAAO,WAC9B,EAAKxI,SAASC,UAAYyK,EAASzK,UACnC,EAAKL,IAAI,EAAK2K,UANa,EANnC,kDAeW,cAfX,qBAiBW,WAUHtM,GAAsB,EARlBT,qBAQkB,IAPlBL,EAOkB,EAPlBA,OACA4B,EAMkB,EANlBA,SAQ6B,aAA7Bd,EAAW+B,SAASwI,MACpB/K,KAAKkN,gBAAgB,CAAExN,SAAQ4B,YAAYd,KA9BvD,oCAkCW,WACH,OAAOR,KAAKsJ,WAnCpB,uBAsCW,SAAU6D,GACbnN,KAAK6M,cAAgBM,IAvC7B,4BA0CY,WACJ,IAAMzI,EAAS,IAAI,OACb4C,EAAU5C,EAAOb,KAAKpG,EAAE,2BAC9B,OAAO,IAAI,OAAwB,CAC/BoB,IAAKyI,EACLI,aAAa,EACb0F,KAAM,WAhDlB,4BAoDY,SAAeR,GACnB,IAAMS,EAAW,IAAI,OAAoBT,EAAMA,GAE/C,OADAS,EAASC,QAAQhK,KAAKC,GAAK,GACpB8J,IAvDf,6BA0DY,WAEJ7M,GAAsB,IADpBd,EACoB,EADpBA,OAAQ4B,EACY,EADZA,SAGV,EAAoBd,EAAW+M,iBAAiB,IAAI,SAA5ClO,EAAR,EAAQA,EAAGe,EAAX,EAAWA,EAAGd,EAAd,EAAcA,EACRkO,EAAe,IAAI,QAAcnO,EAAGe,EAAGd,GAC7C,EACI,CAAEI,SAAQ4B,YACV,CAAEiK,eAAgB7L,EAAO0D,SAAUoI,oBAAqBlK,EAASgL,QACjE,CAAEf,eAAgBiC,EAAchC,oBAAqBxL,KAAK6M,oBAnEtE,GAA8B,Q,eAAjB,E,YACiB,YCGvB,IAAM,EAAb,wDAsBI,WAAmBnD,GAAkB,6BACjC,IAAM+D,EAAc/D,GAAY,GADC,OAEjC,eAFiC,yMAIjC,EAAKgE,MAAQ,EAAKC,cAClB,EAAKb,SAAW,EAAKc,iBACrB,EAAKC,QAAU,EAAKC,cAAcL,GAClC,EAAKM,MAAQ,EAAKC,cAClB,EAAKzL,SAASC,UAAYyL,EAAKzL,UAC/B,EAAKD,SAASkH,GAAd,UAAsBC,EAASwE,MAC/B,EAAK/L,IAAI,EAAKuL,OACd,EAAKvL,IAAI,EAAK2K,UACd,EAAK3K,IAAI,EAAK0L,SACd,EAAK1L,IAAI,EAAK4L,OAGd,IAAIrK,SAAQ,SAACC,GAAD,OAAaA,GAAQ,MAAOwK,MAAK,WACzC,EAAKC,sBAjBwB,EAtBzC,+CA2CW,WACHpO,KAAK+N,MAAMxD,SAAU,IA5C7B,qBA+CW,WACHvK,KAAK+N,MAAMxD,SAAU,IAhD7B,8BAmDY,WACJ,MAAuBvK,KAAKuN,iBAAiB,IAAI,SAAtCc,EAAX,EAAQjO,EACR,EAAqBJ,KAAK6N,QAAQN,iBAAiB,IAAI,SAA5Ce,EAAX,EAAQjP,EACR,EAAuCW,KAAK8M,SAASS,iBAAiB,IAAI,SAA/DgB,EAAX,EAAQlP,EAAiBmP,EAAzB,EAAsBlP,EAChBmP,EAAiB,IAAI,QACvBH,EAAQC,EAAYA,EAAY,IAAMA,EAAY,IAClDF,EAAU,GACVG,GAEJxO,KAAK8M,SAAS4B,UAAUD,KA5DhC,yBA8DY,WACJ,IAAME,EAAW,IAAI,OAAgB,mBAAoB,EAAG,KAC5D,EAA+C3O,KAAK0N,MAAMtK,SAA/CwL,EAAX,EAAQvP,EAAewP,EAAvB,EAAoBzO,EAAe0O,EAAnC,EAAgCxP,EAMhC,OALAqP,EAASvL,SAASK,IAAImL,EAAU,EAAGC,EAAU,GAAIC,GACjDH,EAASrC,OAAStM,KAAK0N,MAEvBiB,EAASI,MAAQ,EACjBJ,EAASpE,SAAU,EACZoE,IAtEf,4BAwEY,WACJ,IAAM7B,EAAW,IAAI,EAAS,IAC9B,EAAsB,EAAQ9M,KAAK0N,OAAxBsB,EAAX,EAAQ3P,EAKR,OAJAyN,EAAS1J,SAAShD,EAAI,GACtB0M,EAAS1J,SAAS/D,GAAK2P,EAAS,EAEhCrN,EAAYsN,cAAc,CAAElE,KAAM,mBAAoBmE,QAAS,CAACpC,KACzDA,IA/Ef,2BAiFY,SAAcpD,GAClB,IAAMyF,EAAc,WAAH,OAAczF,EAAS0F,SAClCvB,EAAU,IAAI,EAAQsB,EAAazF,GACzCmE,EAAQxR,KAAO8S,EACftB,EAAQrK,MAAMC,IAAI,IAAM,IAAM,KAC9B,MAAiC,EAAQzD,KAAK0N,OAAnC2B,EAAX,EAAQ/P,EAAcgQ,EAAtB,EAAmBlP,EAGnB,OAFAyN,EAAQzK,SAAShD,EAAIkP,EACrBzB,EAAQzK,SAAS9D,EAAIU,KAAK0N,MAAMtK,SAAS9D,EAAI+P,EAAS,EAC/CxB,IAzFf,yBA2FY,WACJ,IAAKI,EAAKlL,SAASwM,cAAe,MAAM,IAAItM,MAAM,eAClD,IAAMyK,EAAQO,EAAKlL,SAASwM,cAAcpM,QAMpCK,EAAQ,IAId,OAHAkK,EAAMrK,SAAShE,GAAKiE,KAAKC,GAAK,EAC9BmK,EAAMrK,SAAS/D,EAAIgE,KAAKC,GAAK,EAC7BmK,EAAMlK,MAAMC,IAAID,EAAOA,EAAOA,GACvBkK,KAvGf,2BAOW,SAAoB7I,GACvB,OAAO,IAAInB,SAAQ,SAACC,GAChB,IAAMI,EAAY,IAAIC,EAAA,KAAUa,GAChCd,EAAUF,KAAKpG,EAAE,8BAA8B,SAACyF,GAC5C+K,EAAKlL,SAASwM,cAAgBrM,EAC9BS,EAAQ,CAAE4L,cAAerM,cAZzC,GAA0B,Q,eAAb,E,YACiB,Q,eADjB,E,WAG6D,CAClEqM,mBAAerL,ICNhB,IAAM,EAAb,wDAkBI,cAAqD,MAAhC7E,EAAgC,EAAhCA,EAAGC,EAA6B,EAA7BA,EAA6B,8BACjD,eADiD,uDAEjD,EAAKkQ,YAAc,EAAKC,oBACxB,EAAKtN,IAAI,EAAKqN,aACd,EAAKpM,SAAS9D,EAAIA,EAClB,EAAK8D,SAAS/D,EAAIA,EAL+B,EAlBzD,wDA0BY,WACJ,IAAKqQ,EAAY3M,SAAS4M,oBAAqB,MAAM,IAAI1M,MAAM,eAC/D,IAAMC,EAAMwM,EAAY3M,SAAS4M,oBAAoBxM,QAC/CK,EAAQ,GAEd,OADAN,EAAIM,MAAMC,IAAID,EAAOA,EAAOA,GACrBN,KA/Bf,2BAKW,SAAoB2B,GACvB,OAAO,IAAInB,SAAQ,SAACC,GAChB,IAAMI,EAAY,IAAIC,EAAA,KAAUa,GAChCd,EAAUF,KAAKpG,EAAE,4CAA4C,SAACyF,GAC1D,IAAMM,EAAQ,GACdN,EAAIM,MAAMC,IAAID,EAAOA,EAAOA,GAC5BkM,EAAY3M,SAAS4M,oBAAsBzM,EAC3CS,EAAQ,CAAEgM,oBAAqBzM,cAZ/C,GAAiC,Q,eAApB,E,WAC6D,CAClEyM,yBAAqBzL,ICHtB,IAAM,EAAb,wDAiBI,WAAmBvF,EAAiBC,EAApC,GAAqF,MAAhCS,EAAgC,EAAhCA,EAAGC,EAA6B,EAA7BA,EAA6B,8BACjF,eADiF,gDAEjF,EAAK8D,SAAS9D,EAAIA,EAClB,EAAK8D,SAAS/D,EAAIA,EAClB,EAAKuQ,KAAO,EAAKC,WAAWlR,EAAOC,GACnC,EAAKuD,IAAI,EAAKyN,MALmE,EAjBzF,iDAyBY,SAAWjR,EAAiBC,GAAa,MAC7C,GAAI,UAACkR,EAAK/M,gBAAN,QAAC,EAAegN,aAAc,MAAM,IAAI9M,MAAM,eAClD,IAAM+M,EAAUF,EAAK/M,SAASgN,aAAa5M,QACrCK,EAAQ,GACdwM,EAAQxM,MAAMC,IAAI,IAAKD,EAAOA,GAC9BwM,EAAQ3M,SAAShE,GAAKiE,KAAKC,GAAK,EAChC,qBAAyB5E,EAAzB,GAAOI,EAAP,KAAeC,EAAf,KACA,iBAAqBJ,EAArB,GAAOK,EAAP,KAAaC,EAAb,KAMA,OALA8Q,EAAQ3M,SAAS/D,EAAIgE,KAAK2M,MAAM/Q,EAAOF,EAAQC,EAAOF,GAAUuE,KAAKC,GAAK,EAC1EyM,EAAQE,YAAY,IAClBF,EAAQ1G,SAAS,GAAkBpH,SAAqCE,MAAMqB,IAC5E,SAEGuM,KAtCf,2BAKW,SAAoBG,GACvB,OAAO,IAAIzM,SAAQ,SAACC,GAChB,IAAMI,EAAY,IAAIC,EAAA,KAAUmM,GAChCpM,EAAUF,KAAKpG,EAAE,8BAA8B,SAACyF,GAC5C4M,EAAK/M,SAASgN,aAAe7M,EAC7BS,EAAQ,CAAEoM,aAAc7M,cAVxC,GAA0B,Q,eAAb,E,WAC6D,CAClE6M,kBAAc7L,ICLf,IAAM,EAAb,wDAgBI,iDACI,eADJ,mDAEI,EAAKkM,QAAU,EAAKC,gBACpB,EAAKlO,IAAI,EAAKiO,SAHlB,EAhBJ,oDAsBY,WACJ,IAAKE,EAAQvN,SAASwN,gBAAiB,MAAM,IAAItN,MAAM,eACvD,IAAMC,EAAMoN,EAAQvN,SAASwN,gBAAgBpN,QACvCK,EAAQ,GAGd,OAFAN,EAAIM,MAAMC,IAAID,EAAOA,EAAOA,GAC1BN,EAAIoG,SAAS,GAAkBpH,SAAqCE,MAAMqB,IAAI,UACzEP,KA5Bf,2BAKW,SAAoB2B,GACvB,OAAO,IAAInB,SAAQ,SAACC,GAChB,IAAMI,EAAY,IAAIC,EAAA,KAAUa,GAChCd,EAAUF,KAAKpG,EAAE,kCAAkC,SAACyF,GAChDoN,EAAQvN,SAASwN,gBAAkBrN,EACnCS,EAAQ,CAAE4M,gBAAiBrN,cAV3C,GAA6B,Q,eAAhB,E,WAC6D,CAClEqN,qBAAiBrM,ICElB,ICNKsM,EDMCC,EAAc,KAKdC,EAAiB,IAKjB,EAAmB,CAC5B/R,MAAO,CAAC,EAAG,GACXC,IAAK,CAAC,MAAO,QAOJ+R,EAAoB,CAE7B,CACI5F,KAAM,WACNpM,MAAO,CAAC,EAAG,GACXC,IAAK,CAAC,EAAG,QAEb,CACImM,KAAM,WACNpM,MAAO,CAAC,MAAO,GACfC,IAAK,CAAC,MAAO,QAEjB,CACImM,KAAM,WACNpM,MAAO,CAAC,EAAG,GACXC,IAAK,CAAC,MAAO,IAEjB,CACImM,KAAM,WACNpM,MAAO,CAAC,EAAG,OACXC,IAAK,CAAC,MAAO,QAGjB,CACImM,KAAM,QACNpM,MAAO,CAAC,KAAM,GACdC,IAAK,CAAC,KAAM,OAEhB,CACImM,KAAM,QACNpM,MAAO,CAAC,EAAG,MACXC,IAAK,CAAC,KAAM,OAGhB,CACImM,KAAM,QACNpM,MAAO,CAAC,KAAM,MACdC,IAAK,CAAC,KAAM,QAEhB,CACImM,KAAM,QACNpM,MAAO,CAAC,KAAM,OACdC,IAAK,CAAC,MAAO,QAGjB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,GACfC,IAAK,CAAC,MAAO,OAEjB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,MACfC,IAAK,CAAC,MAAO,OAGjB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,OACfC,IAAK,CAAC,MAAO,QAEjB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,OACfC,IAAK,CAAC,MAAO,QAEjB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,OACfC,IAAK,CAAC,MAAO,QAEjB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,OACfC,IAAK,CAAC,MAAO,QAGjB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,OACfC,IAAK,CAAC,MAAO,OAEjB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,MACfC,IAAK,CAAC,KAAM,OAEhB,CACImM,KAAM,QACNpM,MAAO,CAAC,KAAM,OACdC,IAAK,CAAC,KAAM,QAGhB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,OACfC,IAAK,CAAC,MAAO,QAEjB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,OACfC,IAAK,CAAC,MAAO,QAEjB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,OACfC,IAAK,CAAC,MAAO,QAEjB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,OACfC,IAAK,CAAC,MAAO,QAGjB,CACImM,KAAM,QACNpM,MAAO,CAAC,EAAG,OACXC,IAAK,CAAC,KAAM,QAGhB,CACImM,KAAM,QACNpM,MAAO,CAAC,MAAO,MACfC,IAAK,CAAC,MAAO,QAKRgS,EAAiB,CAC1BjS,MAAO,CAAC,KAAM,OACdC,IAAK,CAAC,KAAM,QAUHiS,EAAmB,CAC5BlS,MAAO,CAAC,KAAM,OACdC,IAAK,CAAC,MAAO,QAIJkS,GAAqB,CAC9BnS,MAAO,CAAC,KAAM,OACdC,IAAK,CAAC,MAAO,QC/KXmS,GAAc,MAEpB,SAAYP,GACR,mBACA,oBAFJ,CAAYA,MAAY,KAkBjB,IAAMQ,GAAkC,CAC3CrS,MAAO,CAAC,IAAK,MACbC,IAAK,CAAC,KAAOmS,GAAa,OAOjBE,GAAkC,CAC3CtS,MAAO,CAAC,MAAQoS,GAAa,OAC7BnS,IAAK,CAAC,MAAO,OAGXsS,GAA0B,SAACC,EAAapG,GAK1C,IAJA,IAAMzP,EAAS,GACT8V,EAAMrG,IAASyF,EAAaa,MAAQ,OAAS,OAC7CC,EAAWvG,IAASyF,EAAaa,MAAQ,IAAM,IAC/CjC,EAAU,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACpE7U,EAAI,EAAGA,EAAI4W,EAAK5W,IAAK,CAE1B,IADA,IAAMgX,EAAa,GACV9V,EAAI,EAAGA,EAAI,GAAIA,IACpB8V,EAAWxW,KAAK,CACZmT,KAAM,GAAF,OAAKoD,GAAL,OAAgBlC,EAAQ7U,IAAxB,OAA6BkB,GACjC2T,QAAS,GAAF,OAAKkC,GAAL,OAAgBlC,EAAQ7U,IAC/B8J,QAAS,CAAC,GAAD,OAAI+M,EAAJ,YAAW7W,GAAX,OAAekB,GAAf,OAAmBA,GAAnB,UAA2B2V,EAA3B,YAAkC7W,EAAI,GAAtC,OAA0CkB,EAAI,GAA9C,OAAkDA,EAAI,IAC/DsO,QAAS,GAAF,OAAKqH,EAAL,YAAY7W,GAAZ,OAAgBkB,GAAhB,OAAoBA,GAC3ByO,GAAI,GAAF,OAAKkH,EAAL,YAAY7W,GAAZ,OAAgBkB,GAAhB,OAAoBA,KAG9BH,EAAOP,KAAKwW,GAEhB,OAAOjW,GAOEkW,GAAmBN,GAAwB,GAAIV,EAAaa,OAM5DI,GAAmBP,GAAwB,EAAGV,EAAakB,OAE3DC,GAAU,CACnBC,UAAW,IACXC,QAAS,IAGAC,GAAe,CACxB,CACI5D,KAAM,sBACN6D,MAAO,CAAC,MAAO,MAAO,QAE1B,CACI7D,KAAM,cACN6D,MAAO,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,QAE3E,CACI7D,KAAM,WACN6D,MAAO,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,QAEtD,CACI7D,KAAM,qBACN6D,MAAO,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,QAEtD,CACI7D,KAAM,UACN6D,MAAO,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,QAEtD,CACI7D,KAAM,cACN6D,MAAO,CAAC,MAAO,MAAO,SCjGjBC,GAAoB,CAC7B,CACFrT,MAAO,EAAE,KAAM,GACfC,IAAK,CAAC,OAAQ,MACdmM,KAAM,SAEJ,CACFpM,MAAO,CAAC,EAAG,OACXC,IAAK,CAAC,MAAO,OACbmM,KAAM,SAEJ,CACFpM,MAAO,CAAC,MAAO,OACfC,IAAK,CAAC,MAAO,QAEX,CACID,MAAO,CAAC,KAAM,OACdC,IAAK,CAAC,KAAM,SCVP,I,UAAb,wDACI,WAAmBD,EAAqBC,GAAiB,6BACrD,eACA,IAAMqT,EAAQ,IAAI,OAAW,EAAKC,aAAavT,EAAOC,GAAM,EAAKuT,gBACjE,EAAkB,EAAKC,kBAAkBzT,EAAOC,GAAhD,sBAAOS,EAAP,KAAUe,EAAV,KAAad,EAAb,KAHqD,OAIrD2S,EAAM7O,SAASK,IAAIpE,EAAGe,EAAGd,GACzB,EAAK6C,IAAI8P,GAL4C,EAD7D,mDASc,WACN,IAAMvN,EAAS,IAAI,OACb4C,EAAU5C,EAAOb,KAAKpG,EAAE,wBAK9B,OAJA6J,EAAQ+K,MAAQ,OAChB/K,EAAQgL,MAAQ,OAEhBhL,EAAQiL,OAAO9O,IAAI,EAAG,GACf,IAAI,OAA0B,CACjCrB,MAAO,cAjBnB,0BAqBc,SAAazD,EAAqBC,GACxC,qBAAyBD,EAAzB,GAAOI,EAAP,KAAeC,EAAf,KACA,iBAAqBJ,EAArB,GAAOK,EAAP,KAAaC,EAAb,KACMmH,EAAQpH,EAAOF,EACf0H,EAASvH,EAAOF,EACtB,OAAO,IAAI,OAAkByH,EAAQ,EAAGJ,KA1BhD,+BAgCc,SAAkB1H,EAAqBC,GAC7C,qBAAyBD,EAAzB,GAAOI,EAAP,KAAeC,EAAf,KACA,iBAAqBJ,EAArB,GAAOK,EAAP,KAAaC,EAAb,KACMmH,EAAQpH,EAAOF,EACf0H,EAASvH,EAAOF,EACtB,MAAO,CAACyH,EAAS,EAAG,EAAGJ,EAAQ,OArCvC,GAA2B,S,aCKd,GAAb,wDAII,eAGI0L,EACAhH,GAAkB,6BAFhByH,EAEgB,EAFhBA,QAASC,EAEO,EAFPA,QAEO,uBAElB,eAFkB,yDAKlB,IAAMC,EAAc,EAAKC,kBAAkB,CAAEH,UAASC,WAAWV,EAAOhH,GALtD,OAMlB,EAAK5I,IAAIuQ,GANS,EAR1B,sDAkBW,cAlBX,yBAoBW,WAEHlS,GAAsB,MADpBT,EACoB,EADpBA,qBAIF,OAAIS,QAAJ,IAAIA,GAAJ,UAAIA,EAAYyI,cAAhB,OAAI,EAAoB1G,SAASuI,YAC7B/K,EAAqBiB,gBAAkB,QAACR,QAAD,IAACA,OAAD,EAACA,EAAYyI,WA1BhE,yBA8BW,WAECjJ,KAAK4S,gBACL5S,KAAK4S,cAAcpI,UACnBxK,KAAK4S,mBAAgB1O,KAlCjC,qBAuCW,WAEH1D,GAAsB,EADpBT,qBACoB,IAGhB8S,EAAkB7J,EAAmBxI,GAC3C,UAAIqS,QAAJ,IAAIA,KAAiBtQ,SAASuI,UAAW,CAErC,IAAM+C,EAAU3E,EAAyB1I,EAAY,EAAQgC,WACzDqL,IACCA,EAAoBnN,OAAOF,GAE5BR,KAAK4S,cAAgB/E,MAnDrC,wCAyDW,WACH,IAAMiF,EAA6B,GAQnC,OAPA9S,KAAKsJ,SAASnI,SAAQ,SAAC4R,GACnBA,EAAWzJ,SAASnI,SAAQ,SAACgQ,GACzBA,EAAI7H,SAASnI,SAAQ,SAAC6R,GAClBF,EAAS/X,KAAKiY,YAInBF,IAlEf,oCAsEW,WACH,IAAMA,EAA6B,GAUnC,OARA9S,KAAKsJ,SAASnI,SAAQ,SAAC4R,GAEnBA,EAAWzJ,SAASnI,SAAQ,SAACgQ,GACzBA,EAAI7H,SAASnI,SAAQ,SAAC6R,GAClBF,EAAS/X,KAAKiY,YAInBF,IAjFf,+BAoFY,WAEJf,EACAhH,GAAkB,WAFhByH,EAEgB,EAFhBA,QAASC,EAEO,EAFPA,QAILQ,EAAUT,EAAUT,EAAMtX,OAC1ByY,EAAUT,EAAU,EACpBM,EAAa,IAAI,OAavB,OAZAhB,EAAM5Q,SAAQ,SAACgQ,EAAKgC,GAChB,IAAMC,EAAY,EAAKC,gBAAgBlC,GACvCiC,EAAU/W,KAAV,UAAoB0O,EAApB,oBAAoCoI,GAEpCC,EAAUhQ,SAAS9D,EAAI4T,EACvBE,EAAUhQ,SAAS/D,EAAI4T,EAAUE,EACjCJ,EAAW5Q,IAAIiR,MAGnBL,EAAW3P,SAAS/D,GAAKmT,EAAU,EAAI,GAEvCO,EAAW3P,SAAS9D,GAAK4T,EAAU,GAC5BH,IAxGf,6BA0GY,SAAgBO,GAUpB,IARA,IAAMC,EAAa,IAAI,OACjBC,EAAcF,EAAS7Y,OAEvBgZ,EAAaD,EAAc,EAC3BE,EAAW,IAAI,EAAKJ,EAAS,IACnC,EAAiB,EAAQI,EAAShG,OAA1BrO,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EAGF/E,EAAI,EAAGA,EAAIkZ,EAAYlZ,IAAK,CAEjC,IAAMoZ,EAAW,IAAI,EAAKL,EAAS/Y,IAE7BqZ,EAAW,IAAI,EAAKN,EAASE,EAAcjZ,EAAI,IAC/CsZ,EAASvU,EAAI/E,EACnBqZ,EAASxQ,SAAS9D,EAAIuU,EACtBD,EAASxQ,SAAS/D,EAAI,EACtBsU,EAASvQ,SAAS9D,EAAIuU,EAEtBF,EAAStQ,SAASjD,GAAKkD,KAAKC,GAC5BoQ,EAASvQ,SAAS/D,EAAIA,EAEtBkU,EAAWpR,IAAIyR,GACfL,EAAWpR,IAAIwR,GAGnB,OAAOJ,MArIf,GAAiC,QCJpB,GAAb,wDAGI,WAAmB5U,EAAqBC,EAAmB6H,EAAgBqN,GAAiB,6BACxF,eACA,IAAMC,EAAO,IAAI,OACb,EAAK7B,aAAavT,EAAOC,EAAK6H,EAAQqN,GACtC,EAAK3B,gBAET,EAAkB,EAAKC,kBAAkBzT,EAAOC,EAAK6H,GAArD,sBAAOpH,EAAP,KAAUe,EAAV,KAAad,EAAb,KANwF,OAOxFyU,EAAK3Q,SAASK,IAAIpE,EAAGe,EAAGd,GACxByU,EAAK1Q,SAASjD,EAAI,EAAK4T,kBAAkBrV,EAAOC,GAChD,EAAKuD,IAAI4R,GAT+E,EAHhG,mDAec,WACN,OAAO,IAAI,OAA0B,CAAE3R,MAAO,cAhBtD,0BAqBc,SACNzD,EACAC,EACA6H,EACAqN,GAEA,qBAAyBnV,EAAzB,GAAOI,EAAP,KAAeC,EAAf,KACA,iBAAqBJ,EAArB,GAAOK,EAAP,KAAaC,EAAb,KACM+U,EAAIhV,EAAOF,EACXmV,EAAIhV,EAAOF,EACXvE,EAAS6I,KAAK6Q,KAAK7Q,KAAKuE,IAAIoM,EAAG,GAAK3Q,KAAKuE,IAAIqM,EAAG,IACtD,OAAO,IAAI,OAAkBJ,EAAWrN,EAAQhM,KAhCxD,+BAmCc,SAAkBkE,EAAqBC,EAAmB6H,GAChE,qBAAyB9H,EAAzB,GAAOI,EAAP,KAAeC,EAAf,KACA,iBAAqBJ,EAArB,GAAOK,EAAP,KAAaC,EAAb,KACA,MAAO,EAAEA,EAAOF,GAAU,EAAGyH,EAAS,GAAIxH,EAAOF,GAAU,KAtCnE,+BAyCc,SAAkBJ,EAAqBC,GAC7C,qBAAyBD,EAAzB,GAAOI,EAAP,KAAeC,EAAf,KACA,iBAAqBJ,EAArB,GAAOK,EAAP,KAAaC,EAAb,KACA,OAAOoE,KAAK2M,MAAM/Q,EAAOF,EAAQC,EAAOF,OA5ChD,GAA0B,QCFb,GAAb,wDAGI,WAAmBJ,EAAqBC,EAAmB6H,EAAgBqN,GAAiB,0CAClFnV,EAAOC,EAAK6H,EAAQqN,GAJlC,mDAMc,WACN,OAAO,IAAI,OAA0B,CACjC1R,MAAO,UACPsF,aAAa,EACb0M,QAAS,QAVrB,GAAkC,ICArB,GAAb,wDAGI,WAAmBzV,EAAqBC,EAAmB6H,EAAgBqN,GAAiB,0CAClFnV,EAAOC,EAAK6H,EAAQqN,GAJlC,mDAMc,WACN,OAAO,IAAI,OAAwB,CAAE1R,MAAO,SAAUsF,aAAa,EAAM0M,QAAS,SAP1F,GAA+B,ICAlB,GAAb,wDAGI,WAAmBzV,EAAqBC,EAAmB6H,EAAgBqN,GAAiB,0CAClFnV,EAAOC,EAAK6H,EAAQqN,GAJlC,mDAOc,WACN,OAAO,IAAI,OAA0B,QAR7C,GAA+B,ICNlBO,GAAsB,CAC/B,CACI1V,MAAO,CAAC,MAAO,OACfC,IAAK,CAAC,IAAO,OACb0V,qBAAsB,GAE1B,CACI3V,MAAO,CAAC,MAAO,MACfC,IAAK,CAAC,IAAO,OACb0V,qBAAsB,GAE1B,CACI3V,MAAO,CAAC,MAAO,OACfC,IAAK,CAAC,IAAO,OACb0V,qBAAsB,IAIjBC,GAAsB,CAC/B,CACI5V,MAAO,CAAC,KAAM,OACdC,IAAK,CAAC,KAAM,OACZ0V,qBAAsB,GAE1B,CACI3V,MAAO,CAAC,KAAM,OACdC,IAAK,CAAC,KAAM,OACZ0V,qBAAsB,GAE1B,CACI3V,MAAO,CAAC,KAAM,OACdC,IAAK,CAAC,KAAM,OACZ0V,qBAAsB,GAE1B,CACI3V,MAAO,CAAC,KAAM,OACdC,IAAK,CAAC,KAAM,OACZ0V,qBAAsB,IC5BjB,I,UAAb,wDAII,WACIzV,EADJ,KAG0F,MADpFQ,EACoF,EADpFA,EAAGe,EACiF,EADjFA,EAAGd,EAC8E,EAD9EA,EACNkV,EAAoF,EAApFA,SAAUF,EAA0E,EAA1EA,qBAA0E,8BAEtF,eAFsF,oHAGtF,EAAKlR,SAAS9D,EAAIA,EAClB,EAAK8D,SAAS/D,EAAIA,EAClB,EAAK+D,SAAShD,EAAIA,EAClB,EAAKoU,SAAWA,EAChB,EAAKF,qBAAuBA,EAC5B,EAAKnS,IAAI,EAAKsS,kBAAkB5V,IAChC,EAAKsD,IAAI,EAAKuS,YATwE,EAP9F,kDAmBW,cAnBX,qBAqBW,WAUHlU,GAAsB,EARlBT,qBAQkB,IAPlBL,EAOkB,EAPlBA,OACA4B,EAMkB,EANlBA,SAQ6B,kBAA7Bd,EAAW+B,SAASwI,MACpB/K,KAAKkN,gBAAgB,CAAExN,SAAQ4B,eAlC3C,oCAsCW,WACH,OAAOtB,KAAKsJ,WAvCpB,6BA0CW,YAMN,WALG5J,EAKH,EALGA,OACA4B,EAIH,EAJGA,SAKA,EAAoBtB,KAAKuN,iBAAiB,IAAI,SAAtClO,EAAR,EAAQA,EAAGe,EAAX,EAAWA,EAAGd,EAAd,EAAcA,EACRkO,EACFxN,KAAKwU,WAAahE,EAAaa,MACzB,IAAI,QAAchS,EAAI,GAAIe,EAAI,IAAKd,EAAI,IACvC,IAAI,QAAcD,EAAGe,EAAI,GAAId,EAAI,IAErCgN,EAAsBtM,KAAKiJ,OAAOK,SAASqL,MAAK,SAACC,GAAD,OAClDA,EAAKvY,KAAKwY,SAAS,EAAKL,aAEtBpR,EAAWkJ,EAAOhD,SAAS,GAAGA,SAAStJ,KAAKsU,sBAAsB/G,iBACpE,IAAI,SAEFuH,EAAiB,IAAI,QAAQ1R,EAAS/D,EAAG+D,EAAShD,EAAGgD,EAAS9D,EAAI,KACxE,EACI,CAAEI,SAAQ4B,YACV,CAAEiK,eAAgB7L,EAAO0D,SAAUoI,oBAAqBlK,EAASgL,QACjE,CAAEf,eAAgBiC,EAAchC,oBAAqBsJ,MAjEjE,sBAqEW,SAASC,GACX/U,KAAKsJ,SAAS,GAAoBpH,SAASE,MAAMqB,IAAIsR,KAtE9D,sBAyEW,SAASvR,GACXxD,KAAKsJ,SAAS,GAAoB9F,MAAMC,IAAID,EAAOA,EAAOA,KA1EnE,+BA6Ec,SAAkB3E,GACxB,IAAMqD,EAAW,IAAI,OAAqB,CAAErD,QACtC8I,EAAS,IAAI,OAAazF,GAC1BsB,EAAQ,GAGd,OAFAmE,EAAOnE,MAAMC,IAAID,EAAOA,EAAOA,GAC/BmE,EAAOpF,SAASwI,KAAO,gBAChBpD,IAnFf,sBAsFc,WACN,IAAMqN,EAAS,CAAC,IAAI,QAAc,GAAI,GAAI,GAAI,IAAI,QAAc,EAAG,EAAG,IAChE3H,GAAW,IAAI,QAAuB4H,cAAcD,GAC1D3H,EAAS6H,aACL,QACA,IAAI,OACA,CACI,IAAI,OAAY,GAAUvY,EAC1B,IAAI,OAAY,GAAUwY,EAC1B,IAAI,OAAY,GAAUjB,EAC1B,IAAI,OAAY,UAAUvX,EAC1B,IAAI,OAAY,UAAUwY,EAC1B,IAAI,OAAY,UAAUjB,GAE9B,IAGR,IAAMhS,EAAW,IAAI,OAAwB,CAAEkT,cAAc,IAC7D,OAAO,IAAI,OAAW/H,EAAUnL,OAxGxC,GAAmC,SC+BtB,GAAb,wDAaI,iDACI,eADJ,8lBA4DwB,WACpB,IAAQvD,EAAeiS,EAAfjS,MAAOC,EAAQgS,EAARhS,IACf,EAAiB,EAAqBD,EAAuBC,GAArDS,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EACL8Q,EAAU,IAAI,EAGpB,OAFAA,EAAQhN,SAAS9D,EAAIA,EACrB8Q,EAAQhN,SAAS/D,EAAIA,EACd+Q,KAlEX,oDAqE0B,WACtB,IAAQzR,EAAekS,EAAflS,MAAOC,EAAQiS,EAARjS,IACf,EAAiB,EAAqBD,EAAuBC,GAArDS,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EACX,OAAO,IAAI,EAAKX,EAAOC,EAAK,CAAES,IAAGC,SAxErC,sDA2E4B,WACxB,IAAQX,EAAemS,GAAfnS,MAAOC,EAAQkS,GAARlS,IACf,EAAiB,EAAqBD,EAAuBC,GAArDS,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EACX,OAAO,IAAI,EAAY,CAAED,IAAGC,SA5E5B,EAAK8Q,QAAU,EAAKiF,gBACpB,EAAKC,UAAY,EAAKC,kBACtB,EAAK/F,YAAc,EAAKgG,oBACxB,EAAKvD,MAAQ,EAAKwD,cAClB,EAAKC,UAAY,EAAKC,kBACtB,EAAKhF,MAAQ,EAAKiF,aAClB,EAAKvB,oBAAsB,EAAKwB,oBAAoBrF,EAAakB,OACjE,EAAK6C,oBAAsB,EAAKsB,oBAAoBrF,EAAaa,OACjE,EAAKG,iBAAmB,EAAKsE,cACzB9E,GACAQ,GACAhB,EAAaa,OAEjB,EAAKI,iBAAmB,EAAKqE,cACzB7E,GACAQ,GACAjB,EAAakB,OAEjB,EAAKvP,IAAI,EAAKiO,SACd,EAAKjO,IAAI,EAAKmT,WACd,EAAKnT,IAAI,EAAKqN,aACd,EAAKrN,IAAI,EAAK8P,OACd,EAAK9P,IAAI,EAAKqP,kBACd,EAAKrP,IAAI,EAAKsP,kBACd,EAAKiE,UAAUvU,SAAQ,SAAC2L,GAAD,OAAc,EAAK3K,IAAI2K,MAC9C,EAAK6D,MAAMxP,SAAQ,SAAC4S,GAAD,OAAU,EAAK5R,IAAI4R,MACtC,EAAKM,oBAAoBlT,SAAQ,SAAC4U,GAAD,OAAmB,EAAK5T,IAAI4T,MAC7D,EAAKxB,oBAAoBpT,SAAQ,SAAC4U,GAAD,OAAmB,EAAK5T,IAAI4T,MAC7D,EAAKC,cA9BT,EAbJ,kDA8CW,WACH,MAAO,CACHtE,MAAO1R,KAAKqU,oBACZhD,MAAOrR,KAAKuU,uBAjDxB,yBAqDY,WACJ5S,EAAYsN,cAAc,CACtBlE,KAAM,mBACNmE,QAAS,CAAClP,KAAKwR,oBAEnB7P,EAAYsN,cAAc,CACtBlE,KAAM,mBACNmE,QAAS,CAAClP,KAAKyR,oBAEnB9P,EAAYsN,cAAc,CAAElE,KAAM,mBAAoBmE,QAASlP,KAAK0V,YACpE/T,EAAYsN,cAAc,CACtBlE,KAAM,mBACNmE,QAASlP,KAAKuU,sBAElB5S,EAAYsN,cAAc,CACtBlE,KAAM,mBACNmE,QAASlP,KAAKqU,wBArE1B,6BA8FY,WACJ,OAAOrC,GAAkBnT,KAAI,SAAC+V,GAC1B,IAAQjW,EAAeiW,EAAfjW,MAAOC,EAAQgW,EAARhW,IACf,EAAiB,EAAqBD,EAAuBC,GAArDS,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EACLwN,EAAW,IAAI,EAAS,IAM9B,OALAA,EAAS1J,SAAS9D,EAAIA,EACtBwN,EAAS1J,SAAShD,EAAI,EAAMqQ,GAC5B3D,EAAS1J,SAAS/D,EAAIA,EAEtByN,EAASvK,SAAS0T,iBAAiC,UAAdrB,EAAK7J,KACnC+B,OAxGnB,yBA4GY,WACJ,OAAO,IAAI,GACP,EAAMnO,MAAME,KAAI,SAACqX,GAAD,OAAS,EAAMA,MAC/B,EAAMtX,IAAIC,KAAI,SAACqX,GAAD,OAAS,EAAMA,SA/GzC,2BAmHY,SAAcC,EAA4BC,EAAwBrL,GACtE,IAAQpM,EAAewX,EAAfxX,MAAOC,EAAQuX,EAARvX,IACf,EAAiB,EAAqBD,EAAOC,GAArCS,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EACX,EAAyBX,EAAME,KAAI,SAACC,GAAD,OAAa,EAAMA,MAAtD,sBAAOC,EAAP,KAAeC,EAAf,KACA,EAAqBJ,EAAIC,KAAI,SAACC,GAAD,OAAa,EAAMA,MAAhD,sBAAOG,EAAP,KAAaC,EAAb,KACMmX,EAAiB,IAAI,GACvB,GACA,CAAE7D,QAAStT,EAAOF,EAAQyT,QAASxT,EAAOF,GAC1CqX,EACArL,GAKJ,OAHAsL,EAAejT,SAAS/D,EAAIA,EAC5BgX,EAAejT,SAAS9D,EAAIA,EAC5B+W,EAAeha,KAAf,UAAyB0O,EAAzB,eACOsL,IAjIf,wBAoIY,WACJ,OAAO1F,EAAM9R,KAAI,YAAyB,IAAtBkM,EAAsB,EAAtBA,KAAMpM,EAAgB,EAAhBA,MAAOC,EAAS,EAATA,IAC7B,EAAsD,CAClDD,EAAME,KAAI,SAAC+V,GAAD,OAAU,EAAMA,MAC1BhW,EAAIC,KAAI,SAAC+V,GAAD,OAAU,EAAMA,MACxB,EAAMnE,GACN,EAAMC,IAJH4F,EAAP,KAAqBC,EAArB,KAAiC9P,EAAjC,KAAyCqN,EAAzC,KAMA,MAAgB,aAAT/I,EACD,IAAI,GAAauL,EAAcC,EAAY9P,EAAQqN,GACzC,UAAT/I,EACD,IAAI,GAAUuL,EAAcC,EAAY9P,EAAQqN,GAChD,IAAI,GAAUwC,EAAcC,EAAY9P,EAAQqN,QAhJlE,iCAoJY,SAAoBU,GACxB,IAAM3V,GAAM,IAAI,QAAsBgF,KAAKpG,EAAE,gCAC7C,OAAO+W,IAAahE,EAAakB,MAC3B1R,KAAKwW,sBAAsBnC,GAAqBxV,EAAK2V,GACrDxU,KAAKwW,sBAAsBjC,GAAqB1V,EAAK2V,KAxJnE,mCA2JY,SACJiC,EACA5X,EACA2V,GAEA,OAAOiC,EAAe5X,KAAI,SAAC6X,GACvB,IAAQ/X,EAAqC+X,EAArC/X,MAAOC,EAA8B8X,EAA9B9X,IAAK0V,EAAyBoC,EAAzBpC,qBACpB,EAAiB,EAAqB3V,EAAuBC,GAArDS,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EACX,OAAO,IAAI,GACPT,EACA,CAAEQ,IAAGe,EAAG,EAAMqQ,GAAcnR,KAC5B,CAAEkV,WAAUF,gCAtK5B,GAA+B,Q,6ECjClB,GAAyB,SAClCqC,EACAjX,EACAkX,GAGA,IAAMC,EAAW,IAAIC,GAAA,KAAeF,GACpCC,EAASE,QAAQ,IAAIC,GAAA,KAAWL,EAAOjX,IAEvC,IAAMuX,EAAc,IAAIC,GAAA,KACpB,IAAI,QAAcvZ,OAAOS,WAAYT,OAAOY,aAC5CoY,EACAjX,GAIJuX,EAAYE,aAAeC,OAAO,GAClCH,EAAYI,SAAWD,OAAO,GAC9BH,EAAYK,cAAgBF,OAAO,GACnCH,EAAYM,YAAcH,OAAO,GACjCH,EAAYO,mBAAoB,EAChCP,EAAYQ,iBAAiBhU,IAAI,WACjCwT,EAAYS,gBAAgBjU,IAAI,WAEhCoT,EAASE,QAAQE,GAGjB,IAAMU,EAAa,IAAIC,GAAA,KAAWC,GAAA,MAIlC,OAHAF,EAAWG,SAAS,cAAchb,MAAM2G,IAAI,EAAI9F,OAAOS,WAAY,EAAIT,OAAOY,aAC9EsY,EAASE,QAAQY,GAEV,CAEHd,WAEAI,gB,aCvCK,GAAb,wDAKI,iDACI,eADJ,6JAGI,EAAKc,WAAa,EAAKC,mBACvB,EAAKC,WAAa,EAAKC,mBACvB,EAAKC,MAAQ,EAAKC,cAClB,EAAKjW,IAAI,EAAK4V,YACd,EAAK5V,IAAI,EAAK8V,YAPlB,EALJ,kDAeY,WAEJ,IAAME,EAAQ,IAAI,QAElB,OADAvX,SAASyX,KAAKC,OAAOH,EAAMI,KACpBJ,IAnBf,8BAsBY,WACJ,IAAMJ,EAAa,IAAI,OAAiB,KAGxC,OADAA,EAAW3U,SAASK,IAAI,EAAG,IAAK,GACzBsU,IA1Bf,8BA4BY,WACJ,OAAO,IAAI,OAAiB,IAAM,QA7B1C,GAA4B,QCmBtBS,GAAa,WACf,OAAOC,SAASC,OAAO7D,SAAS,WAGvB,GAAkB,SAAC8D,GAC5B,IAAM9T,EAAiB,IAAI,OAAqB8T,GAChD,OAAOjV,QAAQkV,IAAI,CACf,EAAYC,aAAahU,GACzB,EAAKgU,aAAahU,GAClB,EAAQgU,aAAahU,GACrB,EAAQgU,aAAahU,GACrB,EAAUgU,eACV,EAAKA,aAAahU,MAIb,GAAb,WAYI,mcACI7E,KAAK4W,SAAW5W,KAAK8Y,aAErB9Y,KAAKN,OAASM,KAAK+Y,aAEnB/Y,KAAKgZ,UAAYhZ,KAAK+Y,aAEtB/Y,KAAK2W,MAAQ3W,KAAKiZ,YAElBjZ,KAAKsB,SAAWtB,KAAKkZ,eAErBlZ,KAAKmZ,kBAAoBnZ,KAAKsB,SAASgL,OAAO8M,KAAK,IAAI,SAGnDZ,OACAxY,KAAKqZ,OAAS,IAAI,GAClBrZ,KAAK2W,MAAMxU,IAAInC,KAAKqZ,SAGxBrZ,KAAKsZ,YAGL,MAAkC,GAC9BtZ,KAAK2W,MACL3W,KAAKN,OACLM,KAAK4W,UAHDC,EAAR,EAAQA,SAAUI,EAAlB,EAAkBA,YAKlBjX,KAAKuZ,kBAAoB1C,EACzB7W,KAAKD,qBAAuBkX,EAE5BjX,KAAKG,YAELH,KAAKwZ,UAAY,IAAI,GAErBxZ,KAAK2W,MAAMxU,IAAInC,KAAKwZ,WAEpBxZ,KAAKyZ,cAELzZ,KAAK0Z,UAlDb,mDAqDW,WACH,OAAO1Z,KAAKwZ,YAtDpB,uBAyDW,WACH,OAAOxZ,KAAKN,SA1DpB,yBA4DW,WACH,OAAOM,KAAKsB,WA7DpB,qBAgEW,WACH,EACI,CAAE5B,OAAQM,KAAKN,OAAQ4B,SAAUtB,KAAKsB,UACtC,CACIiK,eAAgBvL,KAAKN,OAAO0D,SAC5BoI,oBAAqBxL,KAAKsB,SAASgL,QAEvC,CACIf,eAAgBvL,KAAKgZ,UAAU5V,SAC/BoI,oBAAqBxL,KAAKmZ,sBAzE1C,uBA8EW,SAAUpH,GAAe,WACtBe,EAAW3J,EAAoBnJ,KAAKwZ,UAAW,EAAKhX,WAC1DsQ,EAAS3R,SAAQ,SAAC6R,GACbA,EAAc2G,cAEnB5H,EAAM5Q,SAAQ,SAACyY,GACX,IAAM5G,EAAO,EAAiB,EAAKwG,UAAW,EAAKhX,UAAWoX,GAC1D5G,GAAOA,EAAc6G,eArFrC,uBAyFY,WAAS,WACblc,OAAOkD,iBAAiB,UAAU,SAACC,GAC3B,EAAKpB,QAAU,EAAKkX,WACpB,EAAKlX,OAAOoa,OAASnc,OAAOS,WAAaT,OAAOY,YAChD,EAAKmB,OAAOqa,yBACZ,EAAKnD,SAASoD,QAAQrc,OAAOS,WAAYT,OAAOY,iBAIxD,IAAM0b,EAAiB,IAAI,EAAU,CACjCva,OAAQM,KAAKN,OACbK,qBAAsBC,KAAKD,uBAE/B4B,EAAYd,iBAAiB,wBAAwB,gBAAGqO,EAAH,EAAGA,QAAH,OACjD+K,EAAeC,aAAahL,MAGhC,IAAMiL,EAAa,IAAI,EAAM,CACzBza,OAAQM,KAAKN,OACbK,qBAAsBC,KAAKD,qBAC3BuB,SAAUtB,KAAKsB,WAEnBK,EAAYd,iBAAiB,oBAAoB,gBAAGqO,EAAH,EAAGA,QAAH,OAC7CiL,EAAWD,aAAahL,QAhHpC,0BAoHY,WACJ,IAAM5N,EAAW,IAAI8Y,EAAA,KAAcpa,KAAKN,OAAQM,KAAK4W,SAASyD,YAI9D,OAHA/Y,EAASgZ,YAAc,KACvBhZ,EAASiZ,oBAAqB,EAC9BjZ,EAASkZ,cAAgBlX,KAAKC,GAAK,KAC5BjC,IAzHf,uBA4HY,WAEJ,IAAMmZ,EAAe,IAAI,OAAmB,QAAU,GACtDza,KAAK2W,MAAMxU,IAAIsY,KA/HvB,wBAsIY,WACJ,IAAM/a,EAAS,IAAI,OACf,GACA/B,OAAOS,WAAaT,OAAOY,YAC3B,EACA,KAIJ,OAFAmB,EAAO0D,SAASK,KAAK,IAAK,KAAO,KACjC/D,EAAOyN,OAAO,EAAG,EAAG,GACbzN,IA/If,uBAkJY,WACJ,OAAO,IAAI,SAnJnB,wBAsJY,WACJ,IAAMkX,EAAW,IAAI,QAAoB,CAAE8D,WAAW,EAAMC,OAAO,IAKnE,OAJA/D,EAASgE,cAAc,IACvBhE,EAASiE,cAAcld,OAAOmd,kBAC9BlE,EAASoD,QAAQrc,OAAOS,WAAYT,OAAOY,aAC3CqC,SAASyX,KAAKC,OAAO1B,EAASyD,YACvBzD,IA5Jf,qBA+JY,WAIc,OAHlB7V,sBAAsBf,KAAK0Z,QAAQrc,KAAK2C,OACxC,SACAA,KAAKuZ,kBAAkBwB,SACnBvC,QACA,UAAAxY,KAAKqZ,cAAL,SAAalB,MAAM5L,YApK/B,yBAwKY,WACJ,IAAM/D,EAAO,IAAI,OACjBA,EAAKwS,eAAehb,KAAKwZ,WACzB,IAAMtS,EAAS,IAAI,QACnBsB,EAAKyS,UAAU/T,GACflH,KAAKwZ,UAAUpW,SAAS/D,EAAIW,KAAKwZ,UAAUpW,SAAS/D,EAAI6H,EAAO7H,EAC/DW,KAAKwZ,UAAUpW,SAAS9D,EAAIU,KAAKwZ,UAAUpW,SAAS9D,EAAI4H,EAAO5H,MA9KvE,K,0CCpCa4b,MAAM,mB,IAEEA,MAAM,c,IACJA,MAAM,mB,IACCA,MAAM,c,IACNA,MAAM,gB,IAEbA,MAAM,c,4GARzB,eAyBU,GAzBDA,MAAM,iBAAiBC,MAAM,S,0BAClC,iBAuBM,CAvBN,eAuBM,MAvBN,GAuBM,E,mBAtBF,eAqBM,2BArBe,EAAAC,QAAM,SAAfC,G,wBAAZ,eAqBM,OArBwBje,IAAKie,EAAMnN,KAAMgN,MAAM,U,CACjD,eAmBM,MAnBN,GAmBM,CAlBF,eAGI,IAHJ,GAGI,CAFA,eAAiD,OAAjD,GAAiD,eAApBG,EAAMnN,MAAI,GACvC,eAA0D,OAA1D,GAA0D,eAA5BmN,EAAMtJ,MAAMtX,QAAM,KAEpD,eAaI,IAbJ,GAaI,E,mBAZA,eAWS,2BAVU4gB,EAAMtJ,OAAK,SAAnB6C,G,wBADX,eAWS,GATJxX,IAAKwX,EACNsG,MAAM,WACNtO,KAAK,OACL0O,OAAO,OACNC,uBAAqB,EACrBnZ,MAAO,EAAAoZ,aAAe5G,EAAI,oBAC1B,QAAK,mBAAE,EAAA9W,YAAY8W,K,0BAEpB,iBAAwB,C,8BAArBA,EAAK6G,eAAW,O,8HCjB9BP,MAAM,e,iFAFnB,eAOU,GAPDA,MAAM,cAAcQ,OAAO,S,CACrBC,OAAM,iBACb,iBAEM,CAFN,eAEM,MAFN,GAEM,CADF,eAA2B,2BAAlB,EAAAC,UAAQ,S,yBAGzB,iBAAa,CAAb,eAAa,qC,uBCHN,sBAAgB,CAC3Bvf,KAAM,MACNwf,WAAY,CAAEC,OAAA,QACdC,MAAO,CACHZ,MAAO,CACHa,UAAU,EACVjR,KAAMkR,SAGdC,MAT2B,SASrBH,GACF,MAAO,CAAEH,SAAUG,EAAMZ,U,UCTjC,GAAOJ,OAAS,GAChB,GAAOoB,UAAY,kBAEJ,UCDA,kBAAgB,CAC3BN,WAAY,CAAEO,OAAA,GAAQC,MAAA,QACtBC,MAAO,CAAC,cACRJ,MAH2B,SAGrBK,EAAQ7V,GACV,IAAM8U,EAAa,iBACb1d,EAAc,SAACkV,GACjBwI,EAAW1e,MAAQkW,EACnBtM,EAAQ8V,KAAK,aAAcxJ,IAE/B,MAAO,CACHoI,OAAQtJ,GACRD,QAASF,GAAQE,QACjBD,UAAWD,GAAQC,UACnB6K,UAAWnZ,KAAKoZ,KAAM/K,GAAQE,QAAUF,GAAQC,UAAa,KAC7D4J,WAAYA,EACZ1d,kB,UCjBZ,GAAOid,OAAS,GAChB,GAAOoB,UAAY,kBAEJ,U,0CCNFjB,MAAM,W,IASOA,MAAM,oB,GACZ,eAA2C,QAArCA,MAAM,oBAAmB,SAAK,G,IAGvCA,MAAM,iB,IACJA,MAAM,sB,GACL,eACC,QADKA,MAAM,SAAQ,SAAK,G,IAClBA,MAAM,a,IAEdA,MAAM,sB,GACL,eACC,QADKA,MAAM,SAAQ,UAAM,G,IACnBA,MAAM,gB,iHArB7B,eAyBU,GAzBDA,MAAM,iBAAiBC,MAAM,U,0BAClC,iBAuBM,CAvBN,eAuBM,MAvBN,GAuBM,CAtBF,eAWc,GAVVD,MAAM,eACLyB,eAAc,GACf5R,KAAK,SACJ6R,WAAY,EAAAH,UACbra,MAAM,W,CAEKya,QAAO,iBACd,gBADkBD,EAClB,EADkBA,WAClB,MAD4B,CAC5B,eAAuD,OAAvD,GAAuD,eAArBA,GAAa,IAAC,GAChD,O,uBAGR,eASM,MATN,GASM,CARF,eAGI,IAHJ,GAGI,CAFA,GACC,eAA4C,OAA5C,GAA4C,eAAjB,EAAA/K,SAAO,KAEvC,eAGI,IAHJ,GAGI,CAFA,GACC,eAA2D,OAA3D,GAA2D,eAA7B,EAAAD,UAAY,EAAAC,SAAO,a,uBCfvD,sBAAgB,CAC3BgK,WAAY,CAAEO,OAAA,GAAQU,WAAA,QACtBZ,MAF2B,WAGvB,MAAO,CACHd,OAAQtJ,GACRD,QAASF,GAAQE,QACjBD,UAAWD,GAAQC,UACnB6K,UAAWnZ,KAAKoZ,KAAM/K,GAAQE,QAAUF,GAAQC,UAAa,S,UCTzE,GAAOmJ,OAAS,GAChB,GAAOoB,UAAY,kBAEJ,U,wDCNwD,Q,kBAO1D,S,kBAQA,S,kBAQA,S,kBAQA,S,kBAQA,S,kBAQA,S,kBAQA,S,uHAxDT,eA0DkB,GA1DDjB,MAAM,WAAS,C,yBAC5B,iBAA+E,CAA/E,eAA+E,GAApE6B,KAAK,kBAAkBnQ,KAAK,OAAQ,QAAO,EAAAoQ,S,0BAAS,iBAAI,C,2BACnE,eAOC,GANGD,KAAK,mBACLnQ,KAAK,OACJ,QAAK,+BAAE,EAAAqQ,YAAW,EAAI,EAAAC,aAAa7L,SACnC,aAAU,+BAAE,EAAA8L,gBAAe,EAAI,EAAAD,aAAa7L,SAC5C,aAAU,+BAAE,EAAA8L,gBAAe,EAAI,EAAAD,aAAa7L,MAAK,M,0BACjD,iBAAK,C,aAEV,eAOC,GANG0L,KAAK,mBACLnQ,KAAK,OACJ,QAAK,+BAAE,EAAAqQ,YAAW,EAAI,EAAAC,aAAa7L,SACnC,aAAU,+BAAE,EAAA8L,gBAAe,EAAI,EAAAD,aAAa7L,SAC5C,aAAU,+BAAE,EAAA8L,gBAAe,EAAI,EAAAD,aAAa7L,MAAK,M,0BACjD,iBAAK,C,aAEV,eAOC,GANG0L,KAAK,mBACLnQ,KAAK,OACJ,QAAK,+BAAE,EAAAqQ,YAAW,EAAI,EAAAC,aAAa7L,SACnC,aAAU,+BAAE,EAAA8L,gBAAe,EAAI,EAAAD,aAAa7L,SAC5C,aAAU,+BAAE,EAAA8L,gBAAe,EAAI,EAAAD,aAAa7L,MAAK,M,0BACjD,iBAAK,C,aAEV,eAOC,GANG0L,KAAK,mBACLnQ,KAAK,OACJ,QAAK,+BAAE,EAAAqQ,YAAW,EAAI,EAAAC,aAAa7L,SACnC,aAAU,iCAAE,EAAA8L,gBAAe,EAAI,EAAAD,aAAa7L,SAC5C,aAAU,iCAAE,EAAA8L,gBAAe,EAAI,EAAAD,aAAa7L,MAAK,M,0BACjD,iBAAK,C,aAEV,eAOC,GANG0L,KAAK,mBACLnQ,KAAK,OACJ,QAAK,iCAAE,EAAAqQ,YAAW,EAAI,EAAAC,aAAaxL,SACnC,aAAU,iCAAE,EAAAyL,gBAAe,EAAI,EAAAD,aAAaxL,SAC5C,aAAU,iCAAE,EAAAyL,gBAAe,EAAI,EAAAD,aAAaxL,MAAK,M,0BACjD,iBAAK,C,aAEV,eAOC,GANGqL,KAAK,mBACLnQ,KAAK,OACJ,QAAK,iCAAE,EAAAqQ,YAAW,EAAI,EAAAC,aAAaxL,SACnC,aAAU,iCAAE,EAAAyL,gBAAe,EAAI,EAAAD,aAAaxL,SAC5C,aAAU,iCAAE,EAAAyL,gBAAe,EAAI,EAAAD,aAAaxL,MAAK,M,0BACjD,iBAAK,C,aAEV,eAOC,GANGqL,KAAK,mBACLnQ,KAAK,OACJ,QAAK,iCAAE,EAAAqQ,YAAW,EAAI,EAAAC,aAAaxL,SACnC,aAAU,iCAAE,EAAAyL,gBAAe,EAAI,EAAAD,aAAaxL,SAC5C,aAAU,iCAAE,EAAAyL,gBAAe,EAAI,EAAAD,aAAaxL,MAAK,M,0BACjD,iBAAK,C,wCCnDH,sBAAgB,CAC3BmK,WAAY,CAAEuB,cAAA,OAAeC,SAAA,QAC7BtB,MAAO,CACHuB,YAAa,CACTvS,KAAMrQ,SAGd4hB,MAAO,CAAC,oBAAqB,qBAAsB,WACnDJ,MAR2B,SAQrBH,EAAOrV,GACT,IAAMuW,EAAc,SAAC3S,EAAeiT,GAChC7W,EAAQ8V,KAAK,oBAAqB,CAAElS,QAAOiT,UAGzCP,EAAU,WACZtW,EAAQ8V,KAAK,YAEXW,EAAkB,SAAC7S,EAAeiT,EAAeC,GACnD9W,EAAQ8V,KAAK,qBAAsB,CAAElS,QAAOiT,OAAMC,YAEtD,MAAO,CACHP,cACAE,kBACAH,QAASA,EACTE,aAAc1M,M,UCxB1B,GAAOuK,OAAS,GAChB,GAAOoB,UAAY,kBAEJ,UCIA,kBAAgB,CAC3B9f,KAAM,MACNwf,WAAY,CAAE4B,aAAA,GAAcC,aAAA,GAAcC,eAAA,IAC1CzB,MAH2B,WAIvB,IAAI0B,EACEC,EAAU,OAAUC,QAAQ,CAC9BC,MAAM,EACNhZ,KAAM,UACNiZ,WAAY,uBAGhB,IAAgB,kBAAMH,EAAQI,WAAS9P,MAAK,WACxCyP,EAAM,IAAI,MAEd,IAAM9f,EAAc,SAACoQ,GACb0P,GACAA,EAAIM,UAAU,CAAChQ,KAGjBiQ,EAA0B,SAAC,GAM5B,QALD7T,EAKC,EALDA,MACAiT,EAIC,EAJDA,KAKA,OAAOA,IAAS/M,EAAaa,MAAtB,UACDuM,SADC,aACD,EAAKQ,eAAeC,cAAchN,MAAM/G,GADvC,UAEDsT,SAFC,aAED,EAAKQ,eAAeC,cAAc3M,MAAMpH,IAE5CvM,EAAiB,SAAC,GAA0D,QAAxDuM,EAAwD,EAAxDA,MAAOiT,EAAiD,EAAjDA,KACvBe,EAAuBH,EAAwB,CAAE7T,QAAOiT,SAC1C,OAApBe,QAAoB,IAApBA,KAAsBpR,gBAAgB,CAClCxN,OAAM,UAAEke,SAAF,aAAE,EAAKW,YACbjd,SAAQ,UAAEsc,SAAF,aAAE,EAAKY,iBAGjBxgB,EAAqB,SAAC,GAQvB,IAPDsM,EAOC,EAPDA,MACAiT,EAMC,EANDA,KACAC,EAKC,EALDA,OAMMc,EAAuBH,EAAwB,CAAE7T,QAAOiT,SACxDxI,EAAiB,IAAXyI,EAAe,SAAW,QAClB,OAApBc,QAAoB,IAApBA,KAAsBG,SAAS1J,GAC/B,IAAMvR,EAAmB,IAAXga,EAAe,GAAK,GACd,OAApBc,QAAoB,IAApBA,KAAsBI,SAASlb,IAE7BvF,EAAY,WAAK,MAChB,QAAH,EAAA2f,SAAA,SAAKZ,WAET,MAAO,CACHlf,cACAC,iBACAC,qBACAC,gBCpEZ,GAAO8c,OAASA,EAED,U,8BCGf,eAAU,IAAK4D,MAAM,S","file":"js/app.26d51401.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/odc-monitor/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=a5dcbc9a&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=b161edfe&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=905ebe34&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=c257aee6&scoped=true&lang=scss\"","<template>\n    <overview-info />\n    <biz-group-info @seat-click=\"onSeatClick\" />\n    <monitor-toolbar\n        @click-monitor-btn=\"onMonitorClick\"\n        @monitor-mouse-move=\"onMonitorMouseMove\"\n        @refresh=\"onRefresh\"\n    />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { ElLoading } from 'element-plus';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport * as THREE from 'three';\n\nimport { loadODCResource, ODC } from '@/scenes/odc';\nimport BizGroupInfo from '@/views/biz-group-info/index.vue';\nimport OverviewInfo from '@/views/overview-info/index.vue';\nimport MonitorToolbar from '@/views/monitor-toolbar/index.vue';\nimport { SeatAreaType } from '@/data/workstations-data';\n\nexport default defineComponent({\n    name: 'App',\n    components: { BizGroupInfo, OverviewInfo, MonitorToolbar },\n    setup() {\n        let odc: undefined | ODC;\n        const loading = ElLoading.service({\n            lock: true,\n            text: 'Loading',\n            background: 'rgba(0, 0, 0, 0.7)',\n        });\n\n        loadODCResource(() => loading.close()).then(() => {\n            odc = new ODC();\n        });\n        const onSeatClick = (code: string) => {\n            if (odc) {\n                odc.lightSeat([code]);\n            }\n        };\n        const getCurrentCameraMonitor = ({\n            index,\n            area,\n        }: {\n            index: number;\n            area: SeatAreaType;\n        }) => {\n            return area === SeatAreaType.north\n                ? odc?.getStructure().getMonitors().north[index]\n                : odc?.getStructure().getMonitors().south[index];\n        };\n        const onMonitorClick = ({ index, area }: { index: number; area: SeatAreaType }) => {\n            const currentCameraMonitor = getCurrentCameraMonitor({ index, area });\n            currentCameraMonitor?.observationArea({\n                camera: odc?.getCamera() as THREE.PerspectiveCamera,\n                controls: odc?.getControls() as OrbitControls,\n            });\n        };\n        const onMonitorMouseMove = ({\n            index,\n            area,\n            option,\n        }: {\n            index: number;\n            area: SeatAreaType;\n            option: number;\n        }) => {\n            const currentCameraMonitor = getCurrentCameraMonitor({ index, area });\n            const hex = option === 0 ? 0xffffff : 0x459eef;\n            currentCameraMonitor?.setColor(hex);\n            const scale = option === 0 ? 30 : 40;\n            currentCameraMonitor?.setScale(scale);\n        };\n        const onRefresh = () => {\n            odc?.refresh();\n        };\n        return {\n            onSeatClick,\n            onMonitorClick,\n            onMonitorMouseMove,\n            onRefresh,\n        };\n    },\n});\n</script>\n","import { ModelPointer } from '@/scenes/types';\n\nexport const clientX2X = (clientX: number) => {\n    return (clientX / window.innerWidth) * 2 - 1;\n};\n\nexport const clientY2Y = (clientY: number) => {\n    return -(clientY / window.innerHeight) * 2 + 1;\n};\n\nexport const scale = (measurement: number) => {\n    // ODC 长 71米\n    const measurementLength = 71200;\n    const viewLength = 1600;\n    return (measurement * viewLength) / measurementLength;\n};\n\nexport const getCenterOfModelArea = (begin: ModelPointer, end: ModelPointer) => {\n    const [beginX, beginY] = begin.map((element) => scale(element));\n    const [endX, endY] = end.map((element) => scale(element));\n    // 模型的 x 对应 坐标系 z 轴\n    const centerZ = (beginX + endX) / 2;\n    // 模型的 y 对应 坐标系 x 轴\n    const centerX = (beginY + endY) / 2;\n    return { x: centerX, z: centerZ };\n};\n","import * as THREE from 'three';\n\nexport const getIntersectedMesh = (\n    { camera, raycasterInstance }: { camera: THREE.Camera; raycasterInstance: THREE.Raycaster },\n    pointer: { x: number; y: number },\n    intersectObject: THREE.Object3D[],\n): THREE.Object3D | undefined => {\n    raycasterInstance.setFromCamera(pointer, camera);\n    const intersects = raycasterInstance.intersectObjects(intersectObject, true);\n    if (intersects.length > 0) {\n        return intersects[0].object;\n    }\n};\n","import * as THREE from 'three';\nimport { OutlinePass } from 'three/examples/jsm/postprocessing/OutlinePass';\n\nimport { clientX2X, clientY2Y } from '@/scenes/util/location';\nimport { getIntersectedMesh } from '@/scenes/util/raycaster';\n\nexport interface MousemoveObserver {\n    onMousemove: (\n        {\n            highlightOutlinePass,\n        }: {\n            highlightOutlinePass: OutlinePass;\n        },\n        activeMesh: THREE.Mesh,\n    ) => void;\n    beforeMousemove: ({ highlightOutlinePass }: { highlightOutlinePass: OutlinePass }) => void;\n    getMousemoveObserveObjects: () => THREE.Object3D[];\n}\n\ninterface MousemoveObserverGroup {\n    active: { activeMesh: THREE.Mesh; observer: MousemoveObserver }[];\n    inactive: { observer: MousemoveObserver }[];\n}\n\nexport class Mousemove {\n    private observers: any[];\n    private readonly camera: THREE.Camera;\n    private readonly highlightOutlinePass: OutlinePass;\n    private readonly moveRaycaster: THREE.Raycaster;\n\n    public constructor({\n        camera,\n        highlightOutlinePass,\n    }: {\n        highlightOutlinePass: OutlinePass;\n        camera: THREE.Camera;\n    }) {\n        // 被观测的实例\n        this.observers = [];\n        // 用于捕获光线\n        this.camera = camera;\n        this.moveRaycaster = new THREE.Raycaster();\n        // 用于制作高亮\n        this.highlightOutlinePass = highlightOutlinePass;\n        this.initEvent();\n    }\n\n    public addObservers(observers: MousemoveObserver[]) {\n        this.observers.push(...observers);\n    }\n\n    // TODO 合理抽象\n    private getObserverGroup({ x, y }: { x: number; y: number }) {\n        // 遍历每一个观测者 找到中奖选手\n        return this.observers.reduce(\n            (acc, observer) => {\n                const activeMesh = getIntersectedMesh(\n                    { camera: this.camera, raycasterInstance: this.moveRaycaster },\n                    { x, y },\n                    observer.getMousemoveObserveObjects(),\n                );\n                return activeMesh\n                    ? {\n                          active: [...acc.active, { activeMesh, observer }],\n                          inactive: acc.inactive,\n                      }\n                    : {\n                          active: acc.active,\n                          inactive: [...acc.inactive, { observer }],\n                      };\n            },\n            { active: [], inactive: [] },\n        );\n    }\n\n    private initEvent() {\n        document.addEventListener('mousemove', (event) => {\n            const x = clientX2X(event.clientX);\n            const y = clientY2Y(event.clientY);\n            requestAnimationFrame(() => {\n                // 移动执行前准备\n                this.highlightOutlinePass.selectedObjects = [];\n                // 遍历每一个观测者 找到中奖选手\n                const observerGroup = this.getObserverGroup({ x, y }) as MousemoveObserverGroup;\n                // 遍历未中奖选手 安慰 (优先这样处理是防止对中奖选手产生影响,有的为中奖选手会 移除 this.highlightOutlinePass.selectedObjects)\n                observerGroup.inactive.forEach(({ observer }) => {\n                    if (observer.beforeMousemove) {\n                        observer.beforeMousemove({\n                            highlightOutlinePass: this.highlightOutlinePass,\n                        });\n                    }\n                });\n                // 遍历中奖选手 发奖 暂时不考虑头奖选手 不让其他 mesh 得奖\n                observerGroup.active.forEach(({ observer, activeMesh }) => {\n                    if (observer.beforeMousemove) {\n                        observer.beforeMousemove({\n                            highlightOutlinePass: this.highlightOutlinePass,\n                        });\n                    }\n                    if (observer.onMousemove) {\n                        observer.onMousemove(\n                            { highlightOutlinePass: this.highlightOutlinePass },\n                            activeMesh,\n                        );\n                    }\n                });\n            });\n        });\n    }\n}\n","import * as THREE from 'three';\nimport { OutlinePass } from 'three/examples/jsm/postprocessing/OutlinePass';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\n\nimport { clientX2X, clientY2Y } from '@/scenes/util/location';\nimport { getIntersectedMesh } from '@/scenes/util/raycaster';\n\nexport interface ClickObserver {\n    onClick: (\n        {\n            highlightOutlinePass,\n            controls,\n            camera,\n        }: {\n            highlightOutlinePass: OutlinePass;\n            controls: OrbitControls;\n            camera: THREE.Camera;\n        },\n        activeMesh: THREE.Mesh,\n    ) => void;\n    beforeClick: () => void;\n    getClickObserveObjects: () => THREE.Object3D[];\n}\ninterface ClickObserverGroup {\n    active: { activeMesh: THREE.Mesh; observer: ClickObserver }[];\n    inactive: { observer: ClickObserver }[];\n}\n\nexport class Click {\n    // TODO type\n    private observers: any[];\n    private readonly camera: THREE.Camera;\n    private readonly controls: OrbitControls;\n    private readonly highlightOutlinePass: OutlinePass;\n    private readonly clickRaycaster: THREE.Raycaster;\n\n    public constructor({\n        camera,\n        highlightOutlinePass,\n        controls,\n    }: {\n        highlightOutlinePass: OutlinePass;\n        controls: OrbitControls;\n        camera: THREE.Camera;\n    }) {\n        // 被观测的实例\n        this.observers = [];\n        // 用于捕获光线\n        this.camera = camera;\n        this.controls = controls;\n        this.clickRaycaster = new THREE.Raycaster();\n        // 用于制作高亮\n        this.highlightOutlinePass = highlightOutlinePass;\n        this.initEvent();\n    }\n\n    public addObservers(observers: ClickObserver[]) {\n        this.observers.push(...observers);\n    }\n\n    // TODO 合理抽象\n    private getObserverGroup({ x, y }: { x: number; y: number }) {\n        // 遍历每一个观测者 找到中奖选手\n        return this.observers.reduce(\n            (acc, observer) => {\n                const activeMesh = getIntersectedMesh(\n                    { camera: this.camera, raycasterInstance: this.clickRaycaster },\n                    { x, y },\n                    observer.getClickObserveObjects(),\n                );\n                return activeMesh\n                    ? {\n                          active: [...acc.active, { activeMesh, observer }],\n                          inactive: acc.inactive,\n                      }\n                    : {\n                          active: acc.active,\n                          inactive: [...acc.inactive, { observer }],\n                      };\n            },\n            { active: [], inactive: [] },\n        );\n    }\n\n    private initEvent() {\n        document.addEventListener('click', (event) => {\n            const x = clientX2X(event.clientX);\n            const y = clientY2Y(event.clientY);\n            // TODO 类型\n            // 遍历每一个观测者 找到中奖选手\n            const observerGroup = this.getObserverGroup({ x, y }) as unknown as ClickObserverGroup;\n            observerGroup.inactive.forEach(({ observer }) => {\n                if (observer.beforeClick) observer.beforeClick();\n            });\n            // 遍历中奖选手 发奖 暂时不考虑头奖选手 不让其他 mesh 得奖\n            observerGroup.active.forEach(({ observer, activeMesh }) => {\n                if (observer.beforeClick) observer.beforeClick();\n                if (observer.onClick) {\n                    observer.onClick(\n                        {\n                            highlightOutlinePass: this.highlightOutlinePass,\n                            controls: this.controls,\n                            camera: this.camera,\n                        },\n                        activeMesh,\n                    );\n                }\n            });\n        });\n    }\n}\n","import * as THREE from 'three';\n\nexport const globalEvent = new THREE.EventDispatcher();\n","import * as THREE from 'three';\n\nexport class Host extends THREE.Group {\n    public readonly baseWidth: number;\n    public readonly baseHeight: number;\n    public readonly baseDepth: number;\n    public readonly host: THREE.Mesh<THREE.BoxGeometry, THREE.MeshLambertMaterial>;\n    public readonly hostMaterial: THREE.MeshLambertMaterial;\n\n    public constructor() {\n        super();\n        this.baseHeight = 18;\n        this.baseDepth = 6;\n        this.baseWidth = 18;\n        this.host = this.createHost();\n        this.hostMaterial = this.host.material;\n        this.add(this.host);\n    }\n\n    public active() {\n        this.host.material = new THREE.MeshPhongMaterial({ color: 0x409eff });\n    }\n\n    public silence() {\n        this.host.material = this.hostMaterial;\n    }\n\n    protected createHostGeometry() {\n        return new THREE.BoxGeometry(this.baseWidth, this.baseHeight, this.baseDepth);\n    }\n\n    protected createHostMaterial() {\n        return new THREE.MeshLambertMaterial({ color: '#282c34' });\n    }\n\n    protected createHost() {\n        return new THREE.Mesh(this.createHostGeometry(), this.createHostMaterial());\n    }\n}\n","import { Host } from './host';\n\nexport class HWHost extends Host {\n    public static clazzName = 'HWHost';\n\n    public constructor() {\n        super();\n        this.userData.clazzName = HWHost.clazzName;\n    }\n}\n","export const p = (path: string) => {\n    const publicPath = '/odc-monitor';\n    if (process.env.NODE_ENV === 'production') return `${publicPath}${path}`;\n    return path;\n};\n","import * as THREE from 'three';\nimport { MTLLoader } from 'three/examples/jsm/loaders/MTLLoader';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\n\nimport { Host } from './host';\n\nimport { p } from '@/scenes/util/path';\n\nexport class AppleHost extends Host {\n    public static clazzName = 'AppleHost';\n\n    private static resource: Record<string, undefined | THREE.Object3D> = {\n        logoObject3D: undefined,\n    };\n\n    public static loadResource() {\n        return new Promise((resolve) => {\n            new MTLLoader().load(p('/3d-model/apple-logo/apple-logo.mtl'), (materials) => {\n                const objLoader = new OBJLoader();\n                objLoader.setMaterials(materials);\n                objLoader.load(p('/3d-model/apple-logo/apple-logo.obj'), (obj) => {\n                    AppleHost.resource.logoObject3D = obj;\n                    resolve({ logoObject3D: obj });\n                });\n            });\n        });\n    }\n\n    private readonly logo: THREE.Object3D | undefined;\n\n    public constructor() {\n        super();\n        this.userData.clazzName = AppleHost.clazzName;\n        this.logo = this.createLogo();\n        this.add(this.logo);\n    }\n\n    protected createHostMaterial() {\n        return new THREE.MeshLambertMaterial({});\n    }\n\n    private createLogo() {\n        if (!AppleHost.resource.logoObject3D) throw new Error('No Resource');\n        const obj = AppleHost.resource.logoObject3D.clone();\n        obj.position.x = this.host.position.x - this.baseWidth / 2;\n        obj.position.z = this.host.position.z;\n        obj.position.y = this.baseHeight / 8;\n        obj.rotation.y = -Math.PI / 2;\n        obj.scale.set(0.04, 0.04, 0.04);\n        return obj;\n    }\n}\n","import * as THREE from 'three';\nimport { MTLLoader } from 'three/examples/jsm/loaders/MTLLoader';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\nimport { Group, Material, Mesh } from 'three';\n\nimport { p } from '@/scenes/util/path';\n\nexport class Monitor extends THREE.Group {\n    public static clazzName = 'monitor';\n\n    private static resource: Record<string, undefined | Group> = {\n        monitorObject3D: undefined,\n    };\n\n    public static loadResource(loadingManager: THREE.LoadingManager) {\n        return new Promise((resolve) => {\n            new MTLLoader(loadingManager).load(p('/3d-model/monitor/monitor.mtl'), (materials) => {\n                const objLoader = new OBJLoader(loadingManager);\n                objLoader.setMaterials(materials);\n                objLoader.load(p('/3d-model/monitor/monitor.obj'), (obj) => {\n                    Monitor.resource.monitorObject3D = obj;\n                    return resolve({ monitorObject3D: obj });\n                });\n            });\n        });\n    }\n\n    private readonly monitor: Group;\n\n    private readonly screenMaterial: Material;\n\n    public constructor() {\n        super();\n        this.monitor = this.createMonitor();\n        this.userData.clazzName = Monitor.clazzName;\n        // 用于备份高亮\n        this.screenMaterial = (this.monitor.getObjectByName('Screen') as Mesh)\n            .material as Material;\n        this.add(this.monitor);\n    }\n\n    public active() {\n        const loader = new THREE.TextureLoader();\n        const screenTexture = loader.load(p('/texture/screen.png'));\n        const screenMesh = this.monitor.getObjectByName('Screen');\n        if (screenMesh instanceof Mesh) {\n            screenMesh.material = new THREE.MeshPhongMaterial({\n                map: screenTexture,\n            });\n        }\n    }\n\n    public silence() {\n        const screenMesh = this.monitor.getObjectByName('Screen');\n        if (screenMesh instanceof Mesh) {\n            screenMesh.material = this.screenMaterial;\n        }\n    }\n\n    private createMonitor = () => {\n        if (!Monitor.resource.monitorObject3D) throw new Error('You have not loadResource');\n        const monitor = Monitor.resource.monitorObject3D.clone();\n        monitor.userData.external = true;\n        return monitor;\n    };\n}\n","import * as THREE from 'three';\n\n/**\n * @author Roger Qi / https://github.com/SouthpawGoblin\n * @description function for generating multi-line text sprite with Three.\n * @param {*} text text to show on sprite, use '\\n' to seperate lines\n * @param {*} config {\n *   fontFace: string,\n *   fontSize: number,\n *   fontColor: string(rgba),\n *   fontBold: boolean,\n *   fontItalic: boolean,\n *   textAlign: string,\n *   borderThickness: number,\n *   borderColor: string(rgba),\n *   borderRadius: number,\n *   backgroundColor: string(rgba)\n * }\n */\nexport const generateTextSprite = function (text, config) {\n    config || (config = {});\n\n    let fontFace = config.hasOwnProperty('fontFace') ? config['fontFace'] : 'Arial';\n    let fontSize = config.hasOwnProperty('fontSize') ? config['fontSize'] : 18;\n    let fontColor = config.hasOwnProperty('fontColor') ? config['fontColor'] : 'rgba(0, 0, 0, 1)';\n    let fontBold = config.hasOwnProperty('fontBold') ? config['fontBold'] : false;\n    let fontItalic = config.hasOwnProperty('fontItalic') ? config['fontItalic'] : false;\n    let textAlign = config.hasOwnProperty('textAlign') ? config['textAlign'] : 'left';\n    let borderThickness = config.hasOwnProperty('borderThickness') ? config['borderThickness'] : 4;\n    let borderColor = config.hasOwnProperty('borderColor')\n        ? config['borderColor']\n        : 'rgba(0, 0, 0, 1)';\n    let borderRadius = config.hasOwnProperty('borderRadius') ? config['borderRadius'] : 0;\n    let backgroundColor = config.hasOwnProperty('backgroundColor')\n        ? config['backgroundColor']\n        : 'rgba(255, 255, 255, 1)';\n\n    let ruler = document.createElement('canvas').getContext('2d');\n    ruler.font =\n        (fontBold ? 'Bold ' : '') + (fontItalic ? 'Italic ' : '') + fontSize + 'px ' + fontFace;\n\n    let textLines = text.split('\\n');\n    let textWidth = 0;\n    // canvas width shall be based on the longest width of text lines\n    textLines.forEach((line) => {\n        let metrics = ruler.measureText(line);\n        textWidth = metrics.width > textWidth ? metrics.width : textWidth;\n    });\n    // 1.4 is extra height factor for text below baseline: g,j,p,q.\n    let textHeight = fontSize * 1.4 * textLines.length;\n\n    // texture canvas\n    let canvas = document.createElement('canvas');\n    canvas.width = _ceilPow2(textWidth);\n    canvas.height = _ceilPow2(textHeight);\n    let context = canvas.getContext('2d');\n\n    // draw background\n    context.font = ruler.font;\n    context.fillStyle = backgroundColor;\n    context.strokeStyle = borderColor;\n    context.lineWidth = borderThickness;\n    _roundRect(\n        context,\n        borderThickness / 2,\n        borderThickness / 2,\n        textWidth + borderThickness,\n        textHeight + borderThickness,\n        borderRadius,\n    );\n\n    // draw text\n    context.fillStyle = fontColor;\n    context.textAlign = textAlign;\n    let fillTextX = {\n        left: borderThickness,\n        start: borderThickness,\n        center: textWidth / 2 + borderThickness,\n        right: textWidth + borderThickness,\n        end: textWidth + borderThickness,\n    };\n    let curY = fontSize + borderThickness;\n    textLines.forEach((line) => {\n        context.fillText(line, fillTextX[textAlign], curY);\n        curY += fontSize * 1.4;\n    });\n\n    // generate sprite\n    let texture = new THREE.Texture(canvas);\n    texture.needsUpdate = true;\n    let spriteMaterial = new THREE.SpriteMaterial({\n        map: texture,\n        transparent: true,\n    });\n    let sprite = new THREE.Sprite(spriteMaterial);\n    sprite.scale.set(canvas.width / 2, canvas.height / 2, 1);\n\n    return sprite;\n\n    // ceil the input number to the nearest powers of 2\n    function _ceilPow2(num) {\n        let i = 0;\n        while (num > Math.pow(2, i)) {\n            i++;\n        }\n        return Math.pow(2, i);\n    }\n\n    // draw round rect\n    function _roundRect(ctx, x, y, w, h, r) {\n        ctx.beginPath();\n        ctx.moveTo(x + r, y);\n        ctx.lineTo(x + w - r, y);\n        ctx.quadraticCurveTo(x + w, y, x + w, y + r);\n        ctx.lineTo(x + w, y + h - r);\n        ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n        ctx.lineTo(x + r, y + h);\n        ctx.quadraticCurveTo(x, y + h, x, y + h - r);\n        ctx.lineTo(x, y + r);\n        ctx.quadraticCurveTo(x, y, x + r, y);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n    }\n};\n","import * as THREE from 'three';\n\nexport const getSize = (obj: THREE.Object3D) => {\n    const box3 = new THREE.Box3();\n    const v3 = new THREE.Vector3();\n    box3.setFromObject(obj);\n    return box3.getSize(v3);\n};\n\nexport const setEqualScale = (obj: THREE.Object3D, scale: number) => {\n    const { x: oldX, y: oldY, z: oldZ } = obj.scale;\n    obj.scale.set(oldX * scale, oldY * scale, oldZ * scale);\n};\n\nexport const getDefinedObject3D = (obj: THREE.Object3D): THREE.Object3D | undefined => {\n    if (obj.parent) {\n        // 找到 desktop 的标识\n        return obj.parent?.userData.clazzName ? obj.parent : getDefinedObject3D(obj.parent);\n    } else {\n        return;\n    }\n};\n\nexport const getDefinedObject3DByName = (\n    obj: THREE.Object3D,\n    name: string,\n): THREE.Object3D | undefined => {\n    if (obj.parent) {\n        // 找到 desktop 的标识\n        return obj.parent.userData && obj.parent.userData.clazzName === name\n            ? obj.parent\n            : getDefinedObject3DByName(obj.parent, name);\n    } else {\n        return;\n    }\n};\n\nexport const getObject3DChildren = (obj: THREE.Object3D, clazzName: string) => {\n    const collection: THREE.Object3D[] = [];\n    const collectObj = (obj: THREE.Object3D) => {\n        if (obj.userData?.clazzName === clazzName) {\n            collection.push(obj);\n        } else {\n            if (obj.children) obj.children.forEach((child) => collectObj(child));\n        }\n    };\n    collectObj(obj);\n    return collection;\n};\n\nexport const getObject3DChild = (\n    obj: THREE.Object3D,\n    clazzName: string,\n    id: string,\n): THREE.Object3D | undefined => {\n    if (obj.userData?.clazzName === clazzName && obj.userData?.id === id) {\n        return obj;\n    }\n    if (!obj.children) return;\n    for (const child of obj.children) {\n        const obj = getObject3DChild(child, clazzName, id);\n        if (obj) return obj;\n    }\n};\n","import * as THREE from 'three';\n\nimport { HWHost } from '../computer-host/hw-host';\nimport { AppleHost } from '../computer-host/apple-host';\nimport { Monitor } from '../monitor/monitor';\n\n// @ts-ignore\nimport { generateTextSprite } from '@/scenes/util/generate-text-sprite.js';\nimport { getDefinedObject3D, getSize, setEqualScale } from '@/scenes/util/object-3d';\nimport { SeatInfo } from '@/data/workstations-data';\n\nexport class Desktop extends THREE.Group {\n    public static clazzName = 'desktop';\n\n    private readonly monitors: Monitor[];\n    private monitorTips: THREE.Sprite[];\n    private readonly pc: HWHost;\n    private readonly pcTip: THREE.Sprite;\n    private readonly macMini: AppleHost;\n    private readonly macMiniTip: THREE.Sprite;\n\n    public constructor(name: string, seatInfo: SeatInfo) {\n        super();\n        this.monitors = [];\n        this.monitorTips = [];\n        // 稳定性标识用于识别 当前 Group\n        this.userData.clazzName = Desktop.clazzName;\n        const { monitors, monitorTips } = this.createMonitor(name, seatInfo);\n        this.monitors.push(...monitors);\n        this.monitorTips.push(...monitorTips);\n        const { macMini, macMiniTip } = this.createMacMini(name, seatInfo);\n        const { pc, pcTip } = this.createPC(name, seatInfo);\n        this.pc = pc;\n        this.pcTip = pcTip;\n        this.macMini = macMini;\n        this.macMiniTip = macMiniTip;\n        this.add(this.pc);\n        this.add(this.pcTip);\n        this.add(this.macMini);\n        this.add(this.macMiniTip);\n        this.monitors.forEach((monitor) => this.add(monitor));\n        this.monitorTips.forEach((monitorTip) => this.add(monitorTip));\n    }\n\n    public active(activeMesh: THREE.Mesh) {\n        const member = getDefinedObject3D(activeMesh);\n        const clazzName = member?.userData.clazzName;\n        if (clazzName === Monitor.clazzName) {\n            // 有两个屏幕不好定位\n            (member as Monitor).active();\n            const index = member?.userData.index;\n            this.monitorTips[index].material.visible = true;\n        }\n        if (clazzName === AppleHost.clazzName) {\n            this.macMiniTip.material.visible = true;\n            this.macMini.active();\n        }\n        if (clazzName === HWHost.clazzName) {\n            this.pcTip.material.visible = true;\n            this.pc.active();\n        }\n    }\n\n    public silence() {\n        this.pc.silence();\n        this.macMini.silence();\n        this.monitors.forEach((monitor) => {\n            monitor.silence();\n        });\n        this.pcTip.material.visible = false;\n        this.macMiniTip.material.visible = false;\n        this.monitorTips.forEach((object3D) => {\n            object3D.material.visible = false;\n        });\n    }\n\n    private createMonitor(name: string, seatInfo: SeatInfo) {\n        const monitors = [];\n        const monitorTips = [];\n        const theMonitorObj = new Monitor();\n        if (!Array.isArray(seatInfo.monitor)) return { monitors: [], monitorTips: [] };\n        for (let i = 0; i < seatInfo.monitor.length; i++) {\n            const monitorObj = theMonitorObj.clone();\n            monitorObj.rotation.y = -Math.PI;\n            monitorObj.position.z = i * 40;\n            monitorObj.name = `${name}_monitor_${i}`;\n            monitorObj.userData.highlight = true;\n            monitorObj.userData.type = `monitor.${i}`;\n            monitorObj.userData.index = i;\n            monitorObj.userData.data = seatInfo;\n            const monitorTip = this.createTextSprite(seatInfo.monitor[i]);\n            const { y, z } = getSize(monitorObj);\n            monitorTip.position.y = y + 3;\n            monitorTip.position.z = monitorObj.position.z + z / 2;\n            monitorTip.material.visible = false;\n            monitors.push(monitorObj);\n            monitorTips.push(monitorTip);\n        }\n        return { monitors, monitorTips };\n    }\n    private createPC(name: string, info: SeatInfo) {\n        const hwHost = new HWHost();\n        const { y, z } = getSize(hwHost);\n        hwHost.position.z = -z - 1;\n        hwHost.position.y = y / 2;\n        hwHost.name = `${name}_pc`;\n        hwHost.userData.highlight = true;\n        hwHost.userData.type = 'pc';\n        hwHost.userData.data = info;\n        const hwTip = this.createTextSprite(info.pc);\n        hwTip.position.y = y + 3;\n        hwTip.position.z = hwHost.position.z;\n        hwTip.material.visible = false;\n        return {\n            pc: hwHost,\n            pcTip: hwTip,\n        };\n    }\n    private createMacMini(name: string, info: SeatInfo) {\n        const macMini = new AppleHost();\n        const { y } = getSize(macMini);\n        // macMini 放在显示器右边\n        const { z: monitorZ } = getSize(this.monitors[0]);\n\n        macMini.position.z = monitorZ * 2 + 1;\n        macMini.position.y = y / 2;\n        macMini.name = `${name}_macMini`;\n        macMini.userData.highlight = true;\n        macMini.userData.type = 'macMini';\n        macMini.userData.data = info;\n        const macMiniTip = this.createTextSprite(info.macMini);\n        const { x: tipX } = getSize(macMiniTip);\n        macMiniTip.position.y = y + 3;\n        macMiniTip.position.z = macMini.position.z + tipX / 3;\n        macMiniTip.material.visible = false;\n        return {\n            macMini: macMini,\n            macMiniTip: macMiniTip,\n        };\n    }\n    private createTextSprite(text: string) {\n        const textSprite = generateTextSprite(text || '', {\n            fontFace: 'Helvetica',\n            fontSize: 36,\n            fontColor: 'rgba(255, 255, 255, 1)',\n            fontBold: false,\n            fontItalic: false,\n            textAlign: 'center',\n            borderThickness: 3,\n            borderColor: 'rgba(50, 50, 255, 0.8)',\n            borderRadius: 6,\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\n        });\n        setEqualScale(textSprite, 0.1);\n        return textSprite as THREE.Sprite;\n    }\n}\n","import * as THREE from 'three';\nimport * as TWEEN from '@tweenjs/tween.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\n\nexport const animateOrbitCamera = (\n    { camera, controls }: { camera: THREE.Camera; controls: OrbitControls },\n    {\n        cameraPosition,\n        orbitTargetPosition,\n    }: { cameraPosition: THREE.Vector3; orbitTargetPosition: THREE.Vector3 },\n    {\n        cameraPosition: endCameraPosition,\n        orbitTargetPosition: endOrbitTargetPosition,\n    }: { cameraPosition: THREE.Vector3; orbitTargetPosition: THREE.Vector3 },\n) => {\n    const tween = new TWEEN.Tween({\n        x1: cameraPosition.x, // 相机x\n        y1: cameraPosition.y, // 相机y\n        z1: cameraPosition.z, // 相机z\n        x2: orbitTargetPosition.x, // 控制点的中心点x\n        y2: orbitTargetPosition.y, // 控制点的中心点y\n        z2: orbitTargetPosition.z, // 控制点的中心点z\n    });\n    tween.onStart(() => {\n        controls.enabled = false;\n    });\n    tween.to(\n        {\n            x1: endCameraPosition.x,\n            y1: endCameraPosition.y,\n            z1: endCameraPosition.z,\n            x2: endOrbitTargetPosition.x,\n            y2: endOrbitTargetPosition.y,\n            z2: endOrbitTargetPosition.z,\n        },\n        2000,\n    );\n    tween.onUpdate((result) => {\n        camera.position.x = result.x1;\n        camera.position.y = result.y1;\n        camera.position.z = result.z1;\n        controls.target.x = result.x2;\n        controls.target.y = result.y2;\n        controls.target.z = result.z2;\n        controls.update();\n    });\n    tween.onComplete(() => {\n        controls.enabled = true;\n    });\n    tween.easing(TWEEN.Easing.Cubic.InOut);\n    tween.start();\n};\n","import * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { OutlinePass } from 'three/examples/jsm/postprocessing/OutlinePass';\n\nimport { animateOrbitCamera } from '@/scenes/util/camera';\nimport { ClickObserver } from '@/scenes/odc/event/click';\nimport { p } from '@/scenes/util/path';\n\nexport class KeyPoint extends THREE.Group implements ClickObserver {\n    public static clazzName = 'keyPoint';\n\n    private looAtPosition: THREE.Vector3;\n    private readonly keyPoint: THREE.Mesh<THREE.PlaneGeometry, THREE.MeshBasicMaterial>;\n\n    public constructor(size: number) {\n        super();\n        this.looAtPosition = new THREE.Vector3(0, 0, 0);\n        this.keyPoint = new THREE.Mesh(this.createGeometry(size), this.createMaterial());\n        this.keyPoint.userData.type = 'keypoint';\n        this.userData.clazzName = KeyPoint.clazzName;\n        this.add(this.keyPoint);\n    }\n\n    public beforeClick() {}\n\n    public onClick(\n        {\n            highlightOutlinePass,\n            camera,\n            controls,\n        }: {\n            highlightOutlinePass: OutlinePass;\n            controls: OrbitControls;\n            camera: THREE.Camera;\n        },\n        activeMesh: THREE.Mesh,\n    ) {\n        if (activeMesh.userData.type === 'keypoint') {\n            this.observationArea({ camera, controls }, activeMesh);\n        }\n    }\n\n    public getClickObserveObjects() {\n        return this.children;\n    }\n\n    public setLookAt(lookAt: THREE.Vector3) {\n        this.looAtPosition = lookAt;\n    }\n\n    private createMaterial() {\n        const loader = new THREE.TextureLoader();\n        const texture = loader.load(p('/texture/key-point.png'));\n        return new THREE.MeshBasicMaterial({\n            map: texture,\n            transparent: true,\n            side: THREE.DoubleSide,\n        });\n    }\n\n    private createGeometry(size: number) {\n        const geometry = new THREE.PlaneGeometry(size, size);\n        geometry.rotateX(Math.PI / 2);\n        return geometry;\n    }\n\n    private observationArea(\n        { camera, controls }: { camera: THREE.Camera; controls: OrbitControls },\n        activeMesh: THREE.Mesh,\n    ) {\n        const { x, y, z } = activeMesh.getWorldPosition(new THREE.Vector3());\n        const basePosition = new THREE.Vector3(x, y, z);\n        animateOrbitCamera(\n            { camera, controls },\n            { cameraPosition: camera.position, orbitTargetPosition: controls.target },\n            { cameraPosition: basePosition, orbitTargetPosition: this.looAtPosition },\n        );\n    }\n}\n","import * as THREE from 'three';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\nimport { RectAreaLightHelper } from 'three/examples/jsm/helpers/RectAreaLightHelper';\n\nimport { Desktop } from '../desktop/desktop';\nimport { KeyPoint } from '../key-point/key-point';\nimport { globalEvent } from '../../event';\n\nimport { getSize } from '@/scenes/util/object-3d';\nimport { SeatInfo } from '@/data/workstations-data';\nimport { p } from '@/scenes/util/path';\n\nexport class Seat extends THREE.Group {\n    public static clazzName = 'seat';\n\n    private static resource: Record<string, undefined | THREE.Object3D> = {\n        tableObject3D: undefined,\n    };\n\n    public static loadResource(loadingManager: THREE.LoadingManager) {\n        return new Promise((resolve) => {\n            const objLoader = new OBJLoader(loadingManager);\n            objLoader.load(p('/3d-model/table/table.obj'), (obj) => {\n                Seat.resource.tableObject3D = obj;\n                resolve({ tableObject3D: obj });\n            });\n        });\n    }\n\n    public readonly table: THREE.Object3D;\n    public readonly keyPoint: KeyPoint;\n    public readonly desktop: Desktop;\n    public readonly light: THREE.SpotLight;\n\n    public constructor(seatInfo: SeatInfo) {\n        const theSeatInfo = seatInfo || {};\n        super();\n        // 桌子为外部模型\n        this.table = this.createTable();\n        this.keyPoint = this.createKeyPoint();\n        this.desktop = this.createDeskTop(theSeatInfo);\n        this.light = this.createLight();\n        this.userData.clazzName = Seat.clazzName;\n        this.userData.id = `${seatInfo.code}`;\n        this.add(this.table);\n        this.add(this.keyPoint);\n        this.add(this.desktop);\n        this.add(this.light);\n        // TODO 延时加载观测点 注视方向\n        // eslint-disable-next-line no-promise-executor-return\n        new Promise((resolve) => resolve(true)).then(() => {\n            this.locationKeyPoint();\n        });\n    }\n\n    public lightOff() {\n        this.light.visible = false;\n    }\n\n    public lightOn() {\n        this.light.visible = true;\n    }\n\n    private locationKeyPoint() {\n        const { y: heightY } = this.getWorldPosition(new THREE.Vector3());\n        const { x: lookX } = this.desktop.getWorldPosition(new THREE.Vector3());\n        const { x: keyPointX, z: keyPointZ } = this.keyPoint.getWorldPosition(new THREE.Vector3());\n        const lockAtPosition = new THREE.Vector3(\n            lookX > keyPointX ? keyPointX + 100 : keyPointX - 100,\n            heightY + 16,\n            keyPointZ,\n        );\n        this.keyPoint.setLookAt(lockAtPosition);\n    }\n    private createLight() {\n        const topLight = new THREE.SpotLight('rgb(245,108,108)', 2, 180);\n        const { x: lookAtX, y: lookAtY, z: lookAtZ } = this.table.position;\n        topLight.position.set(lookAtX + 2, lookAtY + 20, lookAtZ);\n        topLight.target = this.table;\n        // 光照强度\n        topLight.decay = 2;\n        topLight.visible = false;\n        return topLight;\n    }\n    private createKeyPoint() {\n        const keyPoint = new KeyPoint(16);\n        const { x: tableX } = getSize(this.table);\n        keyPoint.position.y = 10;\n        keyPoint.position.x = -tableX - 6;\n        // 添加观测事件\n        globalEvent.dispatchEvent({ type: 'addClickObserver', message: [keyPoint] });\n        return keyPoint;\n    }\n    private createDeskTop(seatInfo: SeatInfo) {\n        const desktopName = `desktop_${seatInfo.rowCode}`;\n        const desktop = new Desktop(desktopName, seatInfo);\n        desktop.name = desktopName;\n        desktop.scale.set(0.25, 0.25, 0.25);\n        const { z: tableZ, y: tableY } = getSize(this.table);\n        desktop.position.y = tableY;\n        desktop.position.z = this.table.position.z - tableZ / 4;\n        return desktop;\n    }\n    private createTable() {\n        if (!Seat.resource.tableObject3D) throw new Error('No Resource');\n        const table = Seat.resource.tableObject3D.clone();\n        // 单张桌子长度\n        // const { x, z } = getSize(table);\n        // 能放桌子的区域 比 目前桌子长\n        // TODO scale 计算错误\n        // const scale = (zLength / seats.length - 1) / x;\n        const scale = 0.25;\n        table.rotation.x = -Math.PI / 2;\n        table.rotation.z = Math.PI / 2;\n        table.scale.set(scale, scale, scale);\n        return table;\n    }\n}\n","import * as THREE from 'three';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\nimport { LoadingManager, Object3D } from 'three';\n\nimport { p } from '@/scenes/util/path';\n\n// TODO\n/**\n * 北区沙发\n */\nexport class CoffeeTable extends THREE.Group {\n    private static resource: Record<string, undefined | THREE.Object3D> = {\n        coffeeTableObject3D: undefined,\n    };\n\n    public static loadResource(loadingManager?: LoadingManager) {\n        return new Promise((resolve) => {\n            const objLoader = new OBJLoader(loadingManager);\n            objLoader.load(p('/3d-model/coffee-table/coffee-table.obj'), (obj: Object3D) => {\n                const scale = 0.5;\n                obj.scale.set(scale, scale, scale);\n                CoffeeTable.resource.coffeeTableObject3D = obj;\n                resolve({ coffeeTableObject3D: obj });\n            });\n        });\n    }\n    private readonly coffeeTable: THREE.Object3D;\n\n    public constructor({ x, z }: { x: number; z: number }) {\n        super();\n        this.coffeeTable = this.createCoffeeTable();\n        this.add(this.coffeeTable);\n        this.position.z = z;\n        this.position.x = x;\n    }\n\n    private createCoffeeTable() {\n        if (!CoffeeTable.resource.coffeeTableObject3D) throw new Error('No Resource');\n        const obj = CoffeeTable.resource.coffeeTableObject3D.clone();\n        const scale = 0.5;\n        obj.scale.set(scale, scale, scale);\n        return obj;\n    }\n}\n","import * as THREE from 'three';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\n\nimport { p } from '@/scenes/util/path';\n\n// TODO\n/**\n * 北区沙发\n */\nexport class Sofa extends THREE.Group {\n    private static resource: Record<string, undefined | THREE.Object3D> = {\n        sofaObject3D: undefined,\n    };\n\n    public static loadResource(loadManager: THREE.LoadingManager) {\n        return new Promise((resolve) => {\n            const objLoader = new OBJLoader(loadManager);\n            objLoader.load(p('/3d-model/couch/couch.obj'), (obj) => {\n                Sofa.resource.sofaObject3D = obj;\n                resolve({ sofaObject3D: obj });\n            });\n        });\n    }\n\n    private readonly sofa: THREE.Object3D;\n\n    public constructor(begin: number[], end: number[], { x, z }: { x: number; z: number }) {\n        super();\n        this.position.z = z;\n        this.position.x = x;\n        this.sofa = this.createSofa(begin, end);\n        this.add(this.sofa);\n    }\n\n    private createSofa(begin: number[], end: number[]) {\n        if (!Sofa.resource?.sofaObject3D) throw new Error('No Resource');\n        const sofaObj = Sofa.resource.sofaObject3D.clone();\n        const scale = 50;\n        sofaObj.scale.set(116, scale, scale);\n        sofaObj.rotation.x = -Math.PI / 2;\n        const [beginX, beginY] = begin;\n        const [endX, endY] = end;\n        sofaObj.rotation.z = Math.atan2(endY - beginY, endX - beginX) + Math.PI / 2;\n        sofaObj.translateY(-15);\n        ((sofaObj.children[0] as THREE.Mesh).material as THREE.MeshPhongMaterial).color.set(\n            0x4682b4,\n        );\n        return sofaObj;\n    }\n}\n","import * as THREE from 'three';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\n\nimport { p } from '@/scenes/util/path';\n\n// TODO\nexport class Kitchen extends THREE.Group {\n    private static resource: Record<string, undefined | THREE.Object3D> = {\n        kitchenObject3D: undefined,\n    };\n\n    public static loadResource(loadingManager: THREE.LoadingManager) {\n        return new Promise((resolve) => {\n            const objLoader = new OBJLoader(loadingManager);\n            objLoader.load(p('/3d-model/kitchen/kitchen.obj'), (obj) => {\n                Kitchen.resource.kitchenObject3D = obj;\n                resolve({ kitchenObject3D: obj });\n            });\n        });\n    }\n    private readonly kitchen: THREE.Object3D;\n\n    public constructor() {\n        super();\n        this.kitchen = this.createKitchen();\n        this.add(this.kitchen);\n    }\n\n    private createKitchen() {\n        if (!Kitchen.resource.kitchenObject3D) throw new Error('No Resource');\n        const obj = Kitchen.resource.kitchenObject3D.clone();\n        const scale = 0.8;\n        obj.scale.set(scale, scale, scale);\n        ((obj.children[0] as THREE.Mesh).material as THREE.MeshPhongMaterial).color.set(0xdeb887);\n        return obj;\n    }\n}\n","import { ModelLine } from '@/scenes/types';\n\nexport interface WallData extends ModelLine {\n    type: string;\n}\n\n/**\n * 墙的高度\n * @type {number}\n */\nexport const WALL_HEIGHT = 2800;\n/**\n * 墙的厚度\n * @type {number}\n */\nexport const WALL_THICKNESS = 100;\n/**\n * 地面参数\n * @type {{end: number[], begin: number[]}}\n */\nexport const floor: ModelLine = {\n    begin: [0, 0],\n    end: [25200, 71200],\n};\n\n/**\n * 以西北方为(0,0)坐标,x 轴为 北南 轴， y 为 西东 轴\n * @type {({end: number[], type: string, begin: number[]}|{end: number[], type: string, begin: number[]}|{end: number[], type: string, begin: number[]}|{end: number[], type: string, begin: number[]}|{end: number[], type: string, begin: number[]})[]}\n */\nexport const walls: WallData[] = [\n    // 外墙\n    {\n        type: 'external',\n        begin: [0, 0],\n        end: [0, 71200],\n    },\n    {\n        type: 'external',\n        begin: [25200, 0],\n        end: [25200, 71200],\n    },\n    {\n        type: 'external',\n        begin: [0, 0],\n        end: [25200, 0],\n    },\n    {\n        type: 'external',\n        begin: [0, 71200],\n        end: [25200, 71200],\n    },\n    // 入户区域\n    {\n        type: 'glass',\n        begin: [8400, 0],\n        end: [8400, 8400],\n    },\n    {\n        type: 'inner',\n        begin: [0, 8400],\n        end: [8400, 8400],\n    },\n    // 柜体区域\n    {\n        type: 'inner',\n        begin: [8400, 8400],\n        end: [8400, 12600],\n    },\n    {\n        type: 'inner',\n        begin: [8400, 12600],\n        end: [14400, 16800],\n    },\n    // ODC 外卫生间区域\n    {\n        type: 'inner',\n        begin: [16800, 0],\n        end: [16800, 8400],\n    },\n    {\n        type: 'inner',\n        begin: [16800, 8400],\n        end: [25200, 8400],\n    },\n    // ODC 外会议室区域\n    {\n        type: 'inner',\n        begin: [16800, 19200],\n        end: [16800, 26800],\n    },\n    {\n        type: 'glass',\n        begin: [16800, 16800],\n        end: [16800, 19200],\n    },\n    {\n        type: 'glass',\n        begin: [16800, 19200],\n        end: [25200, 19200],\n    },\n    {\n        type: 'inner',\n        begin: [16800, 26800],\n        end: [25200, 26800],\n    },\n    // ODC 中间隔断的大墙\n    {\n        type: 'inner',\n        begin: [14400, 16800],\n        end: [14400, 36000],\n    },\n    {\n        type: 'inner',\n        begin: [14400, 36000],\n        end: [8400, 42000],\n    },\n    {\n        type: 'inner',\n        begin: [8400, 45600],\n        end: [8400, 49200],\n    },\n    // 会议室区域离墙\n    {\n        type: 'glass',\n        begin: [16800, 49200],\n        end: [16800, 64800],\n    },\n    {\n        type: 'inner',\n        begin: [10800, 49200],\n        end: [10800, 64800],\n    },\n    {\n        type: 'glass',\n        begin: [10800, 49200],\n        end: [16800, 49200],\n    },\n    {\n        type: 'inner',\n        begin: [10800, 64800],\n        end: [16800, 64800],\n    },\n    // 内部厕所走道墙\n    {\n        type: 'inner',\n        begin: [0, 49200],\n        end: [8400, 49200],\n    },\n    // 尾部会议室\n    {\n        type: 'glass',\n        begin: [14400, 68000],\n        end: [25200, 66000],\n    },\n];\n\n// 厨房参数\nexport const kitchenStation = {\n    begin: [8400, 59200],\n    end: [8400, 66400],\n};\n\n// 机器人参数\nexport const robotStation = {\n    begin: [15400, 16800],\n    end: [15400, 36000],\n};\n\n// 北区沙发参数\nexport const northSofaStation = {\n    begin: [8400, 12600],\n    end: [14400, 16800],\n};\n\n// 北区桌子参数\nexport const coffeeTableStation = {\n    begin: [8400, 20400],\n    end: [14400, 25200],\n};\n","import { ModelLine } from '@/scenes/types';\n\nconst sideSpacing = 1200;\n\nexport enum SeatAreaType {\n    north = 'north',\n    south = 'south',\n}\n\nexport interface SeatInfo {\n    code: string;\n    rowCode: string;\n    monitor: string[];\n    macMini: string;\n    pc: string;\n}\n\nexport type AreaSeats = SeatInfo[][];\n\n/**\n * 北部工位区域\n * */\nexport const northWorkstationArea: ModelLine = {\n    begin: [120, 8400],\n    end: [8400 - sideSpacing, 48000],\n};\n\n/**\n * 南部工位区域\n * @type {{end: number[], begin: number[]}}\n */\nexport const southWorkstationArea: ModelLine = {\n    begin: [16800 + sideSpacing, 26800],\n    end: [25200, 66000],\n};\n\nconst generateWorkstationData = (row: number, type: SeatAreaType): AreaSeats => {\n    const result = [];\n    const pre = type === SeatAreaType.north ? '2900' : '2800';\n    const areaCode = type === SeatAreaType.north ? 'n' : 's';\n    const rowCode = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm'];\n    for (let i = 0; i < row; i++) {\n        const currentRow = [];\n        for (let j = 0; j < 10; j++) {\n            currentRow.push({\n                code: `${areaCode}${rowCode[i]}${j}`,\n                rowCode: `${areaCode}${rowCode[i]}`,\n                monitor: [`${pre}6${i}${j}${j}`, `${pre}6${i + 1}${j + 1}${j + 1}`],\n                macMini: `${pre}3${i}${j}${j}`,\n                pc: `${pre}2${i}${j}${j}`,\n            });\n        }\n        result.push(currentRow);\n    }\n    return result;\n};\n/**\n * 北区的座位，从门开始算第一排\n * @type {*[]}\n */\n\nexport const northWorkstation = generateWorkstationData(10, SeatAreaType.north);\n\n/**\n * 南区的座位，从门开始算第一排\n * @type {*[]}\n */\nexport const southWorkstation = generateWorkstationData(9, SeatAreaType.south);\n\nexport const odcInfo = {\n    totalSeat: 190,\n    useSeat: 80,\n};\n\nexport const bizGroupInfo = [\n    {\n        code: 'E-commerce Frontend',\n        seats: ['sa1', 'sa5', 'sb9'],\n    },\n    {\n        code: 'Car Network',\n        seats: ['sc1', 'sc2', 'sc3', 'sc4', 'sc5', 'sc6', 'sc7', 'sc8', 'sc9', 'sd6'],\n    },\n    {\n        code: 'Low Code',\n        seats: ['se1', 'se2', 'se3', 'se4', 'se5', 'se6', 'se7'],\n    },\n    {\n        code: 'E-commerce Backend',\n        seats: ['sf1', 'sf2', 'sf3', 'sf4', 'sf5', 'sf6', 'sf7'],\n    },\n    {\n        code: 'Express',\n        seats: ['sg1', 'sg2', 'sg3', 'sg4', 'sg5', 'sg6', 'sg7'],\n    },\n    {\n        code: 'IT Security',\n        seats: ['sj1', 'sj5', 'sj9'],\n    },\n];\n","export const keyPointPositions = [\n    {\n\t\tbegin: [-3500, 0],\n\t\tend: [25200, -3500],\n\t\ttype: 'hight'\n    },\n    {\n\t\tbegin: [0, 73700],\n\t\tend: [25200, 73700],\n\t\ttype: 'hight'\n    },\n    {\n\t\tbegin: [13800, 49200],\n\t\tend: [13800, 64800]\n    },\n    {\n        begin: [4200, 49200],\n        end: [4200, 71200]\n    }\n];\n","import * as THREE from 'three';\n\nimport { ModelPointer } from '@/scenes/types';\nimport { p } from '@/scenes/util/path';\n\n// TODO\n\nexport class Floor extends THREE.Group {\n    public constructor(begin: ModelPointer, end: ModelPointer) {\n        super();\n        const floor = new THREE.Mesh(this.initGeometry(begin, end), this.initMaterial());\n        const [x, y, z] = this.calculatePosition(begin, end);\n        floor.position.set(x, y, z);\n        this.add(floor);\n    }\n\n    protected initMaterial() {\n        const loader = new THREE.TextureLoader();\n        const texture = loader.load(p('/texture/floor.jpeg'));\n        texture.wrapS = THREE.RepeatWrapping;\n        texture.wrapT = THREE.RepeatWrapping;\n        // uv两个方向纹理重复数量\n        texture.repeat.set(2, 1);\n        return new THREE.MeshLambertMaterial({\n            color: '#5e98c6',\n        });\n    }\n\n    protected initGeometry(begin: ModelPointer, end: ModelPointer) {\n        const [beginX, beginY] = begin;\n        const [endX, endY] = end;\n        const width = endX - beginX;\n        const height = endY - beginY;\n        return new THREE.BoxGeometry(height, 2, width);\n    }\n\n    /**\n     * 计算坐标\n     */\n    protected calculatePosition(begin: ModelPointer, end: ModelPointer) {\n        const [beginX, beginY] = begin;\n        const [endX, endY] = end;\n        const width = endX - beginX;\n        const height = endY - beginY;\n        return [height / 2, 0, width / 2];\n    }\n}\n","import * as THREE from 'three';\nimport { OutlinePass } from 'three/examples/jsm/postprocessing/OutlinePass';\n\n// import { StationInfo } from '../info/station-info';\nimport { Seat } from '../seat/seat';\nimport { MousemoveObserver } from '../../event/mousemove';\nimport { ClickObserver } from '../../event/click';\nimport { Desktop } from '../desktop/desktop';\n\nimport { getDefinedObject3D, getDefinedObject3DByName, getSize } from '@/scenes/util/object-3d';\nimport { AreaSeats, SeatInfo, SeatAreaType } from '@/data/workstations-data';\n\nexport class Workstation extends THREE.Group implements MousemoveObserver, ClickObserver {\n    private activeDesktop: any;\n\n    // eslint-disable-next-line max-params\n    public constructor(\n        {},\n        { xLength, zLength }: { xLength: number; zLength: number },\n        seats: AreaSeats,\n        type: SeatAreaType,\n    ) {\n        super();\n        // 初始化信息面板\n        // this.seatInfoPlan = new StationInfo();\n        const workstation = this.createWorkstation({ xLength, zLength }, seats, type);\n        this.add(workstation);\n    }\n\n    // 暂时不需要在没有 hover 的时候做任何事情\n    public beforeMousemove() {}\n\n    public onMousemove(\n        { highlightOutlinePass }: { highlightOutlinePass: OutlinePass },\n        activeMesh: THREE.Mesh,\n    ) {\n        // 是不是可以进行高亮操作\n        if (activeMesh?.parent?.userData.highlight) {\n            highlightOutlinePass.selectedObjects = [activeMesh?.parent];\n        }\n    }\n\n    public beforeClick() {\n        // 清除上次高亮的设备\n        if (this.activeDesktop) {\n            this.activeDesktop.silence();\n            this.activeDesktop = undefined;\n            // this.seatInfoPlan.hide();\n        }\n    }\n\n    public onClick(\n        { highlightOutlinePass }: { highlightOutlinePass: OutlinePass },\n        activeMesh: THREE.Mesh,\n    ) {\n        // 是不是可以进行高亮操作\n        const definedObject3D = getDefinedObject3D(activeMesh);\n        if (definedObject3D?.userData.highlight) {\n            // 高亮当前的设备\n            const desktop = getDefinedObject3DByName(activeMesh, Desktop.clazzName);\n            if (desktop) {\n                (desktop as Desktop).active(activeMesh);\n                // 记录当前激活物\n                this.activeDesktop = desktop;\n            }\n            // this.seatInfoPlan.show(definedObject3D.userData.data, definedObject3D.userData.type);\n        }\n    }\n\n    public getMousemoveObserveObjects() {\n        const allSeats: THREE.Object3D[] = [];\n        this.children.forEach((innerGroup) => {\n            innerGroup.children.forEach((row) => {\n                row.children.forEach((seat) => {\n                    allSeats.push(seat);\n                });\n            });\n        });\n        return allSeats;\n    }\n\n    // eslint-disable-next-line sonarjs/no-identical-functions\n    public getClickObserveObjects() {\n        const allSeats: THREE.Object3D[] = [];\n        // eslint-disable-next-line sonarjs/no-identical-functions\n        this.children.forEach((innerGroup) => {\n            // eslint-disable-next-line sonarjs/no-identical-functions\n            innerGroup.children.forEach((row) => {\n                row.children.forEach((seat) => {\n                    allSeats.push(seat);\n                });\n            });\n        });\n        return allSeats;\n    }\n\n    private createWorkstation(\n        { xLength, zLength }: { xLength: number; zLength: number },\n        seats: AreaSeats,\n        type: SeatAreaType,\n    ) {\n        const spacing = xLength / seats.length;\n        const xCenter = zLength / 2;\n        const innerGroup = new THREE.Group();\n        seats.forEach((row, idx) => {\n            const seatGroup = this.createSeatGroup(row);\n            seatGroup.name = `${type}_seatRow_${idx}`;\n            // 排列位置\n            seatGroup.position.z = xCenter;\n            seatGroup.position.x = spacing * idx;\n            innerGroup.add(seatGroup);\n        });\n        // 前面要留点空位置\n        innerGroup.position.x = -xLength / 2 + 60;\n        // TODO scale 计算错误\n        innerGroup.position.z = -xCenter - 66;\n        return innerGroup;\n    }\n    private createSeatGroup(rowSeats: SeatInfo[]) {\n        // 按照南北 分为两排\n        const seatsGroup = new THREE.Group();\n        const seatsLength = rowSeats.length;\n        // 背靠背两排的个数\n        const itemNumber = seatsLength / 2;\n        const tempSeat = new Seat(rowSeats[0]);\n        const { x, z } = getSize(tempSeat.table);\n\n        // 循环排列工位\n        for (let i = 0; i < itemNumber; i++) {\n            // 创建一个 工位\n            const eastSeat = new Seat(rowSeats[i]);\n            // 获取宽高信息计算排列\n            const westSeat = new Seat(rowSeats[seatsLength - i - 1]);\n            const offset = z * i;\n            westSeat.position.z = offset;\n            westSeat.position.x = 0;\n            eastSeat.position.z = offset;\n            // 东变的座位需要旋转下, 再移动桌子的距离\n            eastSeat.rotation.y = -Math.PI;\n            eastSeat.position.x = x;\n            // 添加到分组中\n            seatsGroup.add(westSeat);\n            seatsGroup.add(eastSeat);\n        }\n\n        return seatsGroup;\n    }\n}\n","import * as THREE from 'three';\nimport { Group, Material } from 'three';\n\nimport { ModelPointer } from '@/scenes/types';\n\n/**\n * 墙体 仅支持笔直的墙，不打弯\n */\nexport class Wall extends Group {\n    // TODO\n    // eslint-disable-next-line max-params\n    public constructor(begin: ModelPointer, end: ModelPointer, height: number, thickness: number) {\n        super();\n        const wall = new THREE.Mesh(\n            this.initGeometry(begin, end, height, thickness),\n            this.initMaterial(),\n        );\n        const [x, y, z] = this.calculatePosition(begin, end, height);\n        wall.position.set(x, y, z);\n        wall.rotation.y = this.calculateRotation(begin, end);\n        this.add(wall);\n    }\n\n    protected initMaterial(): Material {\n        return new THREE.MeshLambertMaterial({ color: '#67C23A' });\n    }\n\n    // TODO\n    // eslint-disable-next-line max-params\n    protected initGeometry(\n        begin: ModelPointer,\n        end: ModelPointer,\n        height: number,\n        thickness: number,\n    ) {\n        const [beginX, beginY] = begin;\n        const [endX, endY] = end;\n        const a = endX - beginX;\n        const b = endY - beginY;\n        const length = Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2));\n        return new THREE.BoxGeometry(thickness, height, length);\n    }\n\n    protected calculatePosition(begin: ModelPointer, end: ModelPointer, height: number) {\n        const [beginX, beginY] = begin;\n        const [endX, endY] = end;\n        return [(endY + beginY) / 2, height / 2, (endX + beginX) / 2];\n    }\n\n    protected calculateRotation(begin: ModelPointer, end: ModelPointer) {\n        const [beginX, beginY] = begin;\n        const [endX, endY] = end;\n        return Math.atan2(endY - beginY, endX - beginX);\n    }\n}\n","import * as THREE from 'three';\n\nimport { Wall } from './wall';\n\nimport { ModelPointer } from '@/scenes/types';\n\nexport class ExternalWall extends Wall {\n    // TODO\n    // eslint-disable-next-line max-params\n    public constructor(begin: ModelPointer, end: ModelPointer, height: number, thickness: number) {\n        super(begin, end, height, thickness);\n    }\n    protected initMaterial() {\n        return new THREE.MeshLambertMaterial({\n            color: '#2f6186',\n            transparent: true,\n            opacity: 1,\n        });\n    }\n}\n","import * as THREE from 'three';\n\nimport { Wall } from './wall';\n\nimport { ModelPointer } from '@/scenes/types';\n\nexport class GlassWall extends Wall {\n    // TODO\n    // eslint-disable-next-line max-params\n    public constructor(begin: ModelPointer, end: ModelPointer, height: number, thickness: number) {\n        super(begin, end, height, thickness);\n    }\n    protected initMaterial() {\n        return new THREE.MeshBasicMaterial({ color: 0xECF1F3, transparent: true, opacity: 0.4 });\n    }\n}\n","import * as THREE from 'three';\n\nimport { Wall } from './wall';\n\nimport { ModelPointer } from '@/scenes/types';\n\nexport class InnerWall extends Wall {\n    // TODO\n    // eslint-disable-next-line max-params\n    public constructor(begin: ModelPointer, end: ModelPointer, height: number, thickness: number) {\n        super(begin, end, height, thickness);\n    }\n\n    protected initMaterial() {\n        return new THREE.MeshLambertMaterial({});\n    }\n}\n","export const southCameraMonitors = [\n    {\n        begin: [14400, 32800],\n        end: [20000, 35200],\n        observedSeatRowIndex: 1,\n    },\n    {\n        begin: [14400, 46000],\n        end: [20000, 48400],\n        observedSeatRowIndex: 4,\n    },\n    {\n        begin: [14400, 59200],\n        end: [20000, 61600],\n        observedSeatRowIndex: 7,\n    },\n];\n\nexport const northCameraMonitors = [\n    {\n        begin: [7600, 14200],\n        end: [7600, 16600],\n        observedSeatRowIndex: 1,\n    },\n    {\n        begin: [7600, 26800],\n        end: [7600, 27800],\n        observedSeatRowIndex: 4,\n    },\n    {\n        begin: [7600, 38800],\n        end: [7600, 39400],\n        observedSeatRowIndex: 7,\n    },\n    {\n        begin: [7600, 44600],\n        end: [7600, 46200],\n        observedSeatRowIndex: 9,\n    },\n];\n\nexport interface CameraMonitorItem {\n    begin: number[];\n    end: number[];\n    observedSeatRowIndex: number;\n}\n","import * as THREE from 'three';\nimport { Vector3 } from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { OutlinePass } from 'three/examples/jsm/postprocessing/OutlinePass';\n\nimport { ClickObserver } from '@/scenes/odc/event/click';\nimport { animateOrbitCamera } from '@/scenes/util/camera';\nimport { SeatAreaType } from '@/data/workstations-data';\n\nexport class CameraMonitor extends THREE.Group implements ClickObserver {\n    private readonly areaType: string;\n    private observedSeatRowIndex: number;\n\n    public constructor(\n        map: THREE.Texture,\n        { x, y, z }: { x: number; y: number; z: number },\n        { areaType, observedSeatRowIndex }: { areaType: string; observedSeatRowIndex: number },\n    ) {\n        super();\n        this.position.z = z;\n        this.position.x = x;\n        this.position.y = y;\n        this.areaType = areaType;\n        this.observedSeatRowIndex = observedSeatRowIndex;\n        this.add(this.initCameraMonitor(map));\n        this.add(this.initLine());\n    }\n\n    public beforeClick() {}\n\n    public onClick(\n        {\n            highlightOutlinePass,\n            camera,\n            controls,\n        }: {\n            highlightOutlinePass: OutlinePass;\n            controls: OrbitControls;\n            camera: THREE.Camera;\n        },\n        activeMesh: THREE.Mesh,\n    ) {\n        if (activeMesh.userData.type === 'cameraMonitor') {\n            this.observationArea({ camera, controls });\n        }\n    }\n\n    public getClickObserveObjects() {\n        return this.children;\n    }\n\n    public observationArea({\n        camera,\n        controls,\n    }: {\n        camera: THREE.Camera;\n        controls: OrbitControls;\n    }) {\n        const { x, y, z } = this.getWorldPosition(new Vector3());\n        const basePosition =\n            this.areaType === SeatAreaType.north\n                ? new THREE.Vector3(x - 10, y + 120, z + 60)\n                : new THREE.Vector3(x, y + 80, z - 80);\n        // @ts-ignore\n        const target: THREE.Group = this.parent.children.find((item) =>\n            item.name.includes(this.areaType),\n        );\n        const position = target.children[0].children[this.observedSeatRowIndex].getWorldPosition(\n            new Vector3(),\n        );\n        const lookAtPosition = new Vector3(position.x, position.y, position.z + 100);\n        animateOrbitCamera(\n            { camera, controls },\n            { cameraPosition: camera.position, orbitTargetPosition: controls.target },\n            { cameraPosition: basePosition, orbitTargetPosition: lookAtPosition },\n        );\n    }\n\n    public setColor(hex: number) {\n        (this.children[0] as THREE.Sprite).material.color.set(hex);\n    }\n\n    public setScale(scale: number) {\n        (this.children[0] as THREE.Sprite).scale.set(scale, scale, scale);\n    }\n\n    protected initCameraMonitor(map: THREE.Texture) {\n        const material = new THREE.SpriteMaterial({ map });\n        const sprite = new THREE.Sprite(material);\n        const scale = 30;\n        sprite.scale.set(scale, scale, scale);\n        sprite.userData.type = 'cameraMonitor';\n        return sprite;\n    }\n\n    protected initLine() {\n        const points = [new THREE.Vector3(0, -80, 0), new THREE.Vector3(0, 0, 0)];\n        const geometry = new THREE.BufferGeometry().setFromPoints(points);\n        geometry.setAttribute(\n            'color',\n            new THREE.Float32BufferAttribute(\n                [\n                    new THREE.Color(0x000000).r,\n                    new THREE.Color(0x000000).g,\n                    new THREE.Color(0x000000).b,\n                    new THREE.Color(0xffffff).r,\n                    new THREE.Color(0xffffff).g,\n                    new THREE.Color(0xffffff).b,\n                ],\n                3,\n            ),\n        );\n        const material = new THREE.LineBasicMaterial({ vertexColors: true });\n        return new THREE.Line(geometry, material);\n    }\n}\n","import * as THREE from 'three';\n\nimport {\n    coffeeTableStation,\n    floor,\n    kitchenStation,\n    northSofaStation,\n    WALL_HEIGHT,\n    WALL_THICKNESS,\n    walls,\n} from '@/data/buildings-data';\nimport {\n    AreaSeats,\n    northWorkstation,\n    northWorkstationArea,\n    SeatAreaType,\n    southWorkstation,\n    southWorkstationArea,\n} from '@/data/workstations-data';\nimport { ModelLine, ModelPointer } from '@/scenes/types';\nimport { Kitchen } from '@/scenes/odc/model/kitchen/kitchen';\nimport { Sofa } from '@/scenes/odc/model/sofa/sofa';\nimport { CoffeeTable } from '@/scenes/odc/model/coffee-table/coffee-table';\nimport { getCenterOfModelArea, scale } from '@/scenes/util/location';\nimport { keyPointPositions } from '@/data/key-point-data';\nimport { KeyPoint } from '@/scenes/odc/model/key-point/key-point';\nimport { Floor } from '@/scenes/odc/model/floor/floor';\nimport { Workstation } from '@/scenes/odc/model/workstation/workstation';\nimport { globalEvent } from '@/scenes/odc/event';\nimport { ExternalWall } from '@/scenes/odc/model/wall/external-wall';\nimport { GlassWall } from '@/scenes/odc/model/wall/glass-wall';\nimport { InnerWall } from '@/scenes/odc/model/wall/inner-wall';\nimport { p } from '@/scenes/util/path';\nimport {\n    CameraMonitorItem,\n    northCameraMonitors,\n    southCameraMonitors,\n} from '@/data/camera-monitor-data';\nimport { CameraMonitor } from '@/scenes/odc/model/camera-monitor/camera-monitor';\n\nexport class Structure extends THREE.Group {\n    private readonly kitchen: Kitchen;\n    private readonly northSofa: Sofa;\n    private readonly coffeeTable: CoffeeTable;\n    private readonly floor: Floor;\n    private walls: (GlassWall | ExternalWall | InnerWall)[];\n\n    private readonly northWorkstation: Workstation;\n    private readonly southWorkstation: Workstation;\n    private readonly keyPoints: KeyPoint[];\n    private readonly southCameraMonitors: CameraMonitor[];\n    private readonly northCameraMonitors: CameraMonitor[];\n\n    public constructor() {\n        super();\n        this.kitchen = this.renderKitchen();\n        this.northSofa = this.renderNorthSofa();\n        this.coffeeTable = this.renderCoffeeTable();\n        this.floor = this.renderFloor();\n        this.keyPoints = this.renderKeyPoints();\n        this.walls = this.renderWall();\n        this.southCameraMonitors = this.renderCameraMonitor(SeatAreaType.south);\n        this.northCameraMonitors = this.renderCameraMonitor(SeatAreaType.north);\n        this.northWorkstation = this.renderStation(\n            northWorkstationArea,\n            northWorkstation,\n            SeatAreaType.north,\n        );\n        this.southWorkstation = this.renderStation(\n            southWorkstationArea,\n            southWorkstation,\n            SeatAreaType.south,\n        );\n        this.add(this.kitchen);\n        this.add(this.northSofa);\n        this.add(this.coffeeTable);\n        this.add(this.floor);\n        this.add(this.northWorkstation);\n        this.add(this.southWorkstation);\n        this.keyPoints.forEach((keyPoint) => this.add(keyPoint));\n        this.walls.forEach((wall) => this.add(wall));\n        this.southCameraMonitors.forEach((cameraMonitor) => this.add(cameraMonitor));\n        this.northCameraMonitors.forEach((cameraMonitor) => this.add(cameraMonitor));\n        this.addObserver();\n    }\n\n    public getMonitors() {\n        return {\n            south: this.southCameraMonitors,\n            north: this.northCameraMonitors,\n        };\n    }\n\n    private addObserver() {\n        globalEvent.dispatchEvent({\n            type: 'addClickObserver',\n            message: [this.northWorkstation],\n        });\n        globalEvent.dispatchEvent({\n            type: 'addClickObserver',\n            message: [this.southWorkstation],\n        });\n        globalEvent.dispatchEvent({ type: 'addClickObserver', message: this.keyPoints });\n        globalEvent.dispatchEvent({\n            type: 'addClickObserver',\n            message: this.northCameraMonitors,\n        });\n        globalEvent.dispatchEvent({\n            type: 'addClickObserver',\n            message: this.southCameraMonitors,\n        });\n    }\n\n    private renderKitchen = () => {\n        const { begin, end } = kitchenStation;\n        const { x, z } = getCenterOfModelArea(begin as ModelPointer, end as ModelPointer);\n        const kitchen = new Kitchen();\n        kitchen.position.z = z;\n        kitchen.position.x = x;\n        return kitchen;\n    };\n\n    private renderNorthSofa = () => {\n        const { begin, end } = northSofaStation;\n        const { x, z } = getCenterOfModelArea(begin as ModelPointer, end as ModelPointer);\n        return new Sofa(begin, end, { x, z });\n    };\n\n    private renderCoffeeTable = () => {\n        const { begin, end } = coffeeTableStation;\n        const { x, z } = getCenterOfModelArea(begin as ModelPointer, end as ModelPointer);\n        return new CoffeeTable({ x, z });\n    };\n\n    private renderKeyPoints() {\n        return keyPointPositions.map((item) => {\n            const { begin, end } = item;\n            const { x, z } = getCenterOfModelArea(begin as ModelPointer, end as ModelPointer);\n            const keyPoint = new KeyPoint(20);\n            keyPoint.position.z = z;\n            keyPoint.position.y = scale(WALL_HEIGHT);\n            keyPoint.position.x = x;\n            // TODO error word\n            keyPoint.userData.isNeedLiftCamera = item.type === 'hight';\n            return keyPoint;\n        });\n    }\n\n    private renderFloor() {\n        return new Floor(\n            floor.begin.map((itm) => scale(itm)) as ModelPointer,\n            floor.end.map((itm) => scale(itm)) as ModelPointer,\n        );\n    }\n\n    private renderStation(workStationArea: ModelLine, workStation: AreaSeats, type: SeatAreaType) {\n        const { begin, end } = workStationArea;\n        const { x, z } = getCenterOfModelArea(begin, end);\n        const [beginX, beginY] = begin.map((element) => scale(element));\n        const [endX, endY] = end.map((element) => scale(element));\n        const theWorkstation = new Workstation(\n            {},\n            { xLength: endY - beginY, zLength: endX - beginX },\n            workStation,\n            type,\n        );\n        theWorkstation.position.x = x;\n        theWorkstation.position.z = z;\n        theWorkstation.name = `${type}Workstation`;\n        return theWorkstation;\n    }\n\n    private renderWall() {\n        return walls.map(({ type, begin, end }) => {\n            const [beginPointer, endPointer, height, thickness] = [\n                begin.map((item) => scale(item)) as ModelPointer,\n                end.map((item) => scale(item)) as ModelPointer,\n                scale(WALL_HEIGHT),\n                scale(WALL_THICKNESS),\n            ];\n            return type === 'external'\n                ? new ExternalWall(beginPointer, endPointer, height, thickness)\n                : (type === 'glass'\n                ? new GlassWall(beginPointer, endPointer, height, thickness)\n                : new InnerWall(beginPointer, endPointer, height, thickness));\n        });\n    }\n\n    private renderCameraMonitor(areaType: SeatAreaType) {\n        const map = new THREE.TextureLoader().load(p('/texture/camera-monitor.png'));\n        return areaType === SeatAreaType.south\n            ? this.generateCameraMonitor(southCameraMonitors, map, areaType)\n            : this.generateCameraMonitor(northCameraMonitors, map, areaType);\n    }\n\n    private generateCameraMonitor(\n        cameraMonitors: CameraMonitorItem[],\n        map: THREE.Texture,\n        areaType: SeatAreaType,\n    ) {\n        return cameraMonitors.map((cameraMonitorPosition) => {\n            const { begin, end, observedSeatRowIndex } = cameraMonitorPosition;\n            const { x, z } = getCenterOfModelArea(begin as ModelPointer, end as ModelPointer);\n            return new CameraMonitor(\n                map,\n                { x, y: scale(WALL_HEIGHT), z },\n                { areaType, observedSeatRowIndex },\n            );\n        });\n    }\n}\n","import * as THREE from 'three';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader';\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass';\nimport { OutlinePass } from 'three/examples/jsm/postprocessing/OutlinePass';\n\nexport const createHighlightElement = (\n    scene: THREE.Scene,\n    camera: THREE.Camera,\n    renderer: THREE.WebGLRenderer,\n) => {\n    // 效果组合器\n    const composer = new EffectComposer(renderer);\n    composer.addPass(new RenderPass(scene, camera));\n\n    const outlinePass = new OutlinePass(\n        new THREE.Vector2(window.innerWidth, window.innerHeight),\n        scene,\n        camera,\n    );\n\n    // 高亮效果配置\n    outlinePass.edgeStrength = Number(3);\n    outlinePass.edgeGlow = Number(0);\n    outlinePass.edgeThickness = Number(1);\n    outlinePass.pulsePeriod = Number(0);\n    outlinePass.usePatternTexture = false;\n    outlinePass.visibleEdgeColor.set('#ffffff');\n    outlinePass.hiddenEdgeColor.set('#190a05');\n\n    composer.addPass(outlinePass);\n\n    // TODO\n    const effectFXAA = new ShaderPass(FXAAShader);\n    effectFXAA.uniforms['resolution'].value.set(1 / window.innerWidth, 1 / window.innerHeight);\n    composer.addPass(effectFXAA);\n\n    return {\n        // 暴漏给外界使用渲染 composer.render()\n        composer,\n        // 暴漏给外界用于，添加高亮元素 outlinePass.selectedObjects = [ activeObjects ]\n        outlinePass,\n    };\n};\n","import * as THREE from 'three';\nimport Stats from 'three/examples/jsm/libs/stats.module';\n\nexport class Helper extends THREE.Group {\n    public readonly stats: Stats;\n\n    private readonly axesHelper: THREE.AxesHelper;\n    private readonly gridHelper: THREE.GridHelper;\n    public constructor() {\n        super();\n        // 坐标轴\n        this.axesHelper = this.createAxesHelper();\n        this.gridHelper = this.createGridHelper();\n        this.stats = this.createStats();\n        this.add(this.axesHelper);\n        this.add(this.gridHelper);\n    }\n\n    private createStats() {\n        // @ts-ignore\n        const stats = new Stats();\n        document.body.append(stats.dom);\n        return stats;\n    }\n\n    private createAxesHelper() {\n        const axesHelper = new THREE.AxesHelper(200);\n        // 红色代表 X 轴. 绿色代表 Y 轴. 蓝色代表 Z 轴.\n        axesHelper.position.set(0, 100, 0);\n        return axesHelper;\n    }\n    private createGridHelper() {\n        return new THREE.GridHelper(2000, 50);\n    }\n}\n","import * as THREE from 'three';\nimport * as TWEEN from '@tweenjs/tween.js';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\nimport { OutlinePass } from 'three/examples/jsm/postprocessing/OutlinePass';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\n\nimport { Mousemove } from './event/mousemove';\nimport { Click } from './event/click';\nimport { globalEvent } from './event';\nimport { Seat } from './model/seat/seat';\nimport { Monitor } from './model/monitor/monitor';\nimport { AppleHost } from './model/computer-host/apple-host';\nimport { CoffeeTable } from './model/coffee-table/coffee-table';\nimport { Sofa } from './model/sofa/sofa';\nimport { Kitchen } from './model/kitchen/kitchen';\nimport { Structure } from './structure';\n\nimport { createHighlightElement } from '@/scenes/util/highlight';\nimport { animateOrbitCamera } from '@/scenes/util/camera';\nimport { getObject3DChild, getObject3DChildren } from '@/scenes/util/object-3d';\nimport { Helper } from '@/scenes/odc/helper';\n\nconst isNeedHelp = () => {\n    return location.search.includes('help=1');\n};\n\nexport const loadODCResource = (onLoad: () => void) => {\n    const loadingManager = new THREE.LoadingManager(onLoad);\n    return Promise.all([\n        CoffeeTable.loadResource(loadingManager),\n        Sofa.loadResource(loadingManager),\n        Kitchen.loadResource(loadingManager),\n        Monitor.loadResource(loadingManager),\n        AppleHost.loadResource(),\n        Seat.loadResource(loadingManager),\n    ]);\n};\n\nexport class ODC {\n    private readonly renderer: THREE.WebGLRenderer;\n    private readonly camera: THREE.PerspectiveCamera;\n    private readonly oldCamera: THREE.PerspectiveCamera;\n    private readonly scene: THREE.Scene;\n    private readonly highlightComposer: EffectComposer;\n    private readonly highlightOutlinePass: OutlinePass;\n    private readonly controls: OrbitControls;\n    private readonly structure: Structure;\n    private readonly baseMonitorTarget: THREE.Vector3;\n    private readonly helper: Helper | undefined;\n\n    public constructor() {\n        this.renderer = this.initRender();\n\n        this.camera = this.initCamera();\n\n        this.oldCamera = this.initCamera();\n\n        this.scene = this.initScene();\n\n        this.controls = this.initControls();\n\n        this.baseMonitorTarget = this.controls.target.copy(new THREE.Vector3());\n\n        // 正式情况无需展示\n        if (isNeedHelp()) {\n            this.helper = new Helper();\n            this.scene.add(this.helper);\n        }\n\n        this.initLight();\n\n        // 事件准备\n        const { composer, outlinePass } = createHighlightElement(\n            this.scene,\n            this.camera,\n            this.renderer,\n        );\n        this.highlightComposer = composer;\n        this.highlightOutlinePass = outlinePass;\n\n        this.initEvent();\n\n        this.structure = new Structure();\n\n        this.scene.add(this.structure);\n\n        this.locationODC();\n\n        this.animate();\n    }\n\n    public getStructure() {\n        return this.structure;\n    }\n\n    public getCamera() {\n        return this.camera;\n    }\n    public getControls() {\n        return this.controls;\n    }\n\n    public refresh() {\n        animateOrbitCamera(\n            { camera: this.camera, controls: this.controls },\n            {\n                cameraPosition: this.camera.position,\n                orbitTargetPosition: this.controls.target,\n            },\n            {\n                cameraPosition: this.oldCamera.position,\n                orbitTargetPosition: this.baseMonitorTarget,\n            },\n        );\n    }\n\n    public lightSeat(seats: string[]) {\n        const allSeats = getObject3DChildren(this.structure, Seat.clazzName);\n        allSeats.forEach((seat) => {\n            (seat as Seat).lightOff();\n        });\n        seats.forEach((seatCode) => {\n            const seat = getObject3DChild(this.structure, Seat.clazzName, seatCode);\n            if (seat) (seat as Seat).lightOn();\n        });\n    }\n\n    private initEvent() {\n        window.addEventListener('resize', (event) => {\n            if (this.camera && this.renderer) {\n                this.camera.aspect = window.innerWidth / window.innerHeight;\n                this.camera.updateProjectionMatrix();\n                this.renderer.setSize(window.innerWidth, window.innerHeight);\n            }\n        });\n        // 移动事件\n        const mousemoveEvent = new Mousemove({\n            camera: this.camera,\n            highlightOutlinePass: this.highlightOutlinePass,\n        });\n        globalEvent.addEventListener('addMousemoveObserver', ({ message }) =>\n            mousemoveEvent.addObservers(message),\n        );\n        // 点击事件\n        const clickEvent = new Click({\n            camera: this.camera,\n            highlightOutlinePass: this.highlightOutlinePass,\n            controls: this.controls,\n        });\n        globalEvent.addEventListener('addClickObserver', ({ message }) =>\n            clickEvent.addObservers(message),\n        );\n    }\n\n    private initControls() {\n        const controls = new OrbitControls(this.camera, this.renderer.domElement);\n        controls.maxDistance = 1800;\n        controls.screenSpacePanning = false;\n        controls.maxPolarAngle = Math.PI / 2.06;\n        return controls;\n    }\n\n    private initLight() {\n        // 环境光源\n        const ambientLight = new THREE.AmbientLight(0x606060, 2);\n        this.scene.add(ambientLight);\n\n        // const directionalLight = new THREE.DirectionalLight(0xffffff);\n        // directionalLight.position.set(1, 0.75, 0.5).normalize();\n        // this.scene.add(directionalLight);\n    }\n\n    private initCamera() {\n        const camera = new THREE.PerspectiveCamera(\n            50,\n            window.innerWidth / window.innerHeight,\n            1,\n            6000,\n        );\n        camera.position.set(-712, 1000, -712);\n        camera.lookAt(0, 0, 0);\n        return camera;\n    }\n\n    private initScene() {\n        return new THREE.Scene();\n    }\n\n    private initRender() {\n        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n        renderer.setClearAlpha(0.2);\n        renderer.setPixelRatio(window.devicePixelRatio);\n        renderer.setSize(window.innerWidth, window.innerHeight);\n        document.body.append(renderer.domElement);\n        return renderer;\n    }\n\n    private animate() {\n        requestAnimationFrame(this.animate.bind(this));\n        TWEEN.update();\n        this.highlightComposer.render();\n        if (isNeedHelp()) {\n            this.helper?.stats.update();\n        }\n    }\n\n    private locationODC() {\n        const box3 = new THREE.Box3();\n        box3.expandByObject(this.structure);\n        const center = new THREE.Vector3();\n        box3.getCenter(center);\n        this.structure.position.x = this.structure.position.x - center.x;\n        this.structure.position.z = this.structure.position.z - center.z;\n    }\n}\n","<template>\n    <o-panel class=\"info-container\" title=\"项目组信息\">\n        <div class=\"group-container\">\n            <div v-for=\"group in groups\" :key=\"group.code\" class=\"groups\">\n                <div class=\"group-item\">\n                    <p class=\"group-base-info\">\n                        <span class=\"group-name\"> {{ group.code }}</span>\n                        <span class=\"people-count\">{{ group.seats.length }}</span>\n                    </p>\n                    <p class=\"group-seat\">\n                        <el-tag\n                            v-for=\"item in group.seats\"\n                            :key=\"item\"\n                            class=\"seat-tag\"\n                            size=\"mini\"\n                            effect=\"dark\"\n                            :disable-transitions=\"true\"\n                            :color=\"activeSeat === item ? '#409EFF' : '#909399'\"\n                            @click=\"onSeatClick(item)\"\n                        >\n                            {{ item.toUpperCase() }}\n                        </el-tag>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </o-panel>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from 'vue';\nimport { ElTag } from 'element-plus';\n\nimport OPanel from '@/components/panel/index.vue';\nimport { odcInfo, bizGroupInfo } from '@/data/workstations-data';\n\nexport default defineComponent({\n    components: { OPanel, ElTag },\n    emits: ['seat-click'],\n    setup(_props, context) {\n        const activeSeat = ref<string>();\n        const onSeatClick = (seat: string) => {\n            activeSeat.value = seat;\n            context.emit('seat-click', seat);\n        };\n        return {\n            groups: bizGroupInfo,\n            useSeat: odcInfo.useSeat,\n            totalSeat: odcInfo.totalSeat,\n            usageRate: Math.ceil((odcInfo.useSeat / odcInfo.totalSeat) * 100),\n            activeSeat: activeSeat,\n            onSeatClick,\n        };\n    },\n});\n</script>\n<style scoped lang=\"scss\">\n.info-container {\n    left: 20px;\n    top: 66px;\n    max-height: calc(100% - 66px);\n    overflow: hidden;\n    width: 280px;\n    background: transparent;\n    border: 1px solid #0f375a;\n    border-radius: 8px;\n    .group-container {\n        max-height: calc(100% - 100px);\n        .groups {\n            .group-item {\n                text-align: left;\n                margin: 2px 0;\n                .group-base-info {\n                    margin: 0;\n                    overflow: auto;\n                    .group-name {\n                        float: left;\n                        display: block;\n                        width: 180px;\n                        color: #afe5f3;\n                    }\n                    .people-count {\n                        display: block;\n                        float: right;\n                        font-weight: 600;\n                        color: #afe5f3;\n                    }\n                }\n                .seat-tag {\n                    cursor: pointer;\n                    margin: 2px 2px;\n                    color: #afe5f3;\n                }\n            }\n        }\n    }\n}\n</style>\n","<template>\n    <el-card class=\"card-define\" shadow=\"hover\">\n        <template #header>\n            <div class=\"card-header\">\n                <span>{{ theTitle }}</span>\n            </div>\n        </template>\n        <slot></slot>\n    </el-card>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { ElCard } from 'element-plus';\n\nexport default defineComponent({\n    name: 'App',\n    components: { ElCard },\n    props: {\n        title: {\n            required: true,\n            type: String as PropType<string>,\n        },\n    },\n    setup(props) {\n        return { theTitle: props.title };\n    },\n});\n</script>\n<style lang=\"scss\" scoped>\n.card-define {\n    position: absolute;\n    max-width: 280px;\n    .card-header {\n        font-size: 15px;\n        font-weight: 600;\n\n    }\n}\n</style>\n","\nimport { defineComponent, PropType } from 'vue';\nimport { ElCard } from 'element-plus';\n\nexport default defineComponent({\n    name: 'App',\n    components: { ElCard },\n    props: {\n        title: {\n            required: true,\n            type: String as PropType<string>,\n        },\n    },\n    setup(props) {\n        return { theTitle: props.title };\n    },\n});\n","import { render } from \"./index.vue?vue&type=template&id=a5dcbc9a&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=a5dcbc9a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-a5dcbc9a\"\n\nexport default script","\nimport { defineComponent, ref } from 'vue';\nimport { ElTag } from 'element-plus';\n\nimport OPanel from '@/components/panel/index.vue';\nimport { odcInfo, bizGroupInfo } from '@/data/workstations-data';\n\nexport default defineComponent({\n    components: { OPanel, ElTag },\n    emits: ['seat-click'],\n    setup(_props, context) {\n        const activeSeat = ref<string>();\n        const onSeatClick = (seat: string) => {\n            activeSeat.value = seat;\n            context.emit('seat-click', seat);\n        };\n        return {\n            groups: bizGroupInfo,\n            useSeat: odcInfo.useSeat,\n            totalSeat: odcInfo.totalSeat,\n            usageRate: Math.ceil((odcInfo.useSeat / odcInfo.totalSeat) * 100),\n            activeSeat: activeSeat,\n            onSeatClick,\n        };\n    },\n});\n","import { render } from \"./index.vue?vue&type=template&id=c257aee6&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=c257aee6&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-c257aee6\"\n\nexport default script","<template>\n    <o-panel class=\"info-container\" title=\"ODC 概况\">\n        <div class=\"content\">\n            <el-progress\n                class=\"odc-progress\"\n                :stroke-width=\"12\"\n                type=\"circle\"\n                :percentage=\"usageRate\"\n                color=\"#459eff\"\n            >\n                <template #default=\"{ percentage }\">\n                    <span class=\"percentage-value\">{{ percentage }}%</span>\n                    <span class=\"percentage-label\">工位使用率</span>\n                </template>\n            </el-progress>\n            <div class=\"progress-info\">\n                <p class=\"progress-info-item\">\n                    <span class=\"label\">使用中工位</span\n                    ><span class=\"value-use\">{{ useSeat }}</span>\n                </p>\n                <p class=\"progress-info-item\">\n                    <span class=\"label\">未使用中工位</span\n                    ><span class=\"value-no-use\">{{ totalSeat - useSeat }}</span>\n                </p>\n            </div>\n        </div>\n    </o-panel>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { ElProgress } from 'element-plus';\n\nimport OPanel from '@/components/panel/index.vue';\nimport { odcInfo, bizGroupInfo } from '@/data/workstations-data';\n\nexport default defineComponent({\n    components: { OPanel, ElProgress },\n    setup() {\n        return {\n            groups: bizGroupInfo,\n            useSeat: odcInfo.useSeat,\n            totalSeat: odcInfo.totalSeat,\n            usageRate: Math.ceil((odcInfo.useSeat / odcInfo.totalSeat) * 100),\n        };\n    },\n});\n</script>\n<style scoped lang=\"scss\">\n.info-container {\n    right: 20px;\n    top: 66px;\n    max-height: calc(100% - 66px);\n    overflow: hidden;\n    width: 280px;\n    background: transparent;\n    border: 1px solid #0f375a;\n    border-radius: 8px;\n    .panel-split {\n        margin: 18px 0 8px 0;\n        text-align: left;\n        font-size: 15px;\n    }\n    .content {\n        text-align: center;\n        .odc-progress {\n            .percentage-value {\n                display: block;\n                font-size: 28px;\n            }\n            .percentage-label {\n                display: block;\n                margin-top: 10px;\n                font-size: 12px;\n                color: #a1a1a6;\n            }\n        }\n        .progress-info {\n            .progress-info-item {\n                margin: 5px 0;\n                text-align: left;\n                overflow: auto;\n                .label {\n                    margin-right: 20px;\n                    color: #afe5f3;\n                }\n                .value-use {\n                    font-size: 16px;\n                    font-weight: 600;\n                    color: #459eff;\n                    float: right;\n                }\n                .value-no-use {\n                    font-size: 16px;\n                    font-weight: 600;\n                    float: right;\n                    color: #ffffff;\n                }\n            }\n        }\n    }\n}\n</style>\n","\nimport { defineComponent } from 'vue';\nimport { ElProgress } from 'element-plus';\n\nimport OPanel from '@/components/panel/index.vue';\nimport { odcInfo, bizGroupInfo } from '@/data/workstations-data';\n\nexport default defineComponent({\n    components: { OPanel, ElProgress },\n    setup() {\n        return {\n            groups: bizGroupInfo,\n            useSeat: odcInfo.useSeat,\n            totalSeat: odcInfo.totalSeat,\n            usageRate: Math.ceil((odcInfo.useSeat / odcInfo.totalSeat) * 100),\n        };\n    },\n});\n","import { render } from \"./index.vue?vue&type=template&id=b161edfe&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=b161edfe&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-b161edfe\"\n\nexport default script","<template>\n    <el-button-group class=\"toolbar\">\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"refresh\"> 重置 </el-button>\n        <el-button\n            icon=\"el-icon-location\"\n            size=\"mini\"\n            @click=\"handleClick(0, seatAreaType.north)\"\n            @mouseenter=\"handleMouseMove(0, seatAreaType.north)\"\n            @mouseleave=\"handleMouseMove(0, seatAreaType.north, 0)\"\n            >北1观测点</el-button\n        >\n        <el-button\n            icon=\"el-icon-location\"\n            size=\"mini\"\n            @click=\"handleClick(1, seatAreaType.north)\"\n            @mouseenter=\"handleMouseMove(1, seatAreaType.north)\"\n            @mouseleave=\"handleMouseMove(1, seatAreaType.north, 0)\"\n            >北2观测点</el-button\n        >\n        <el-button\n            icon=\"el-icon-location\"\n            size=\"mini\"\n            @click=\"handleClick(2, seatAreaType.north)\"\n            @mouseenter=\"handleMouseMove(2, seatAreaType.north)\"\n            @mouseleave=\"handleMouseMove(2, seatAreaType.north, 0)\"\n            >北3观测点</el-button\n        >\n        <el-button\n            icon=\"el-icon-location\"\n            size=\"mini\"\n            @click=\"handleClick(3, seatAreaType.north)\"\n            @mouseenter=\"handleMouseMove(3, seatAreaType.north)\"\n            @mouseleave=\"handleMouseMove(3, seatAreaType.north, 0)\"\n            >北4观测点</el-button\n        >\n        <el-button\n            icon=\"el-icon-location\"\n            size=\"mini\"\n            @click=\"handleClick(2, seatAreaType.south)\"\n            @mouseenter=\"handleMouseMove(2, seatAreaType.south)\"\n            @mouseleave=\"handleMouseMove(2, seatAreaType.south, 0)\"\n            >南3观测点</el-button\n        >\n        <el-button\n            icon=\"el-icon-location\"\n            size=\"mini\"\n            @click=\"handleClick(1, seatAreaType.south)\"\n            @mouseenter=\"handleMouseMove(1, seatAreaType.south)\"\n            @mouseleave=\"handleMouseMove(1, seatAreaType.south, 0)\"\n            >南2观测点</el-button\n        >\n        <el-button\n            icon=\"el-icon-location\"\n            size=\"mini\"\n            @click=\"handleClick(0, seatAreaType.south)\"\n            @mouseenter=\"handleMouseMove(0, seatAreaType.south)\"\n            @mouseleave=\"handleMouseMove(0, seatAreaType.south, 0)\"\n            >南1观测点</el-button\n        >\n    </el-button-group>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch } from 'vue';\nimport { ElButton, ElButtonGroup } from 'element-plus';\n\nimport { SeatAreaType } from '@/data/workstations-data';\n\nexport default defineComponent({\n    components: { ElButtonGroup, ElButton },\n    props: {\n        odcInstance: {\n            type: Object,\n        },\n    },\n    emits: ['click-monitor-btn', 'monitor-mouse-move', 'refresh'],\n    setup(props, context) {\n        const handleClick = (index: number, area?: string) => {\n            context.emit('click-monitor-btn', { index, area });\n        };\n\n        const refresh = () => {\n            context.emit('refresh');\n        };\n        const handleMouseMove = (index: number, area?: string, option?: 0 | 1) => {\n            context.emit('monitor-mouse-move', { index, area, option });\n        };\n        return {\n            handleClick,\n            handleMouseMove,\n            refresh: refresh,\n            seatAreaType: SeatAreaType,\n        };\n    },\n});\n</script>\n<style scoped lang=\"scss\">\n.toolbar {\n    position: absolute;\n    top: 38px;\n    left: 50%;\n    transform: translateX(-50%);\n}\n.el-button {\n    background: #2f6186;\n    border: 1px solid #2f6186;\n    &:hover {\n        background: #2f6186;\n        border: 1px solid #5e98c6;\n        color: #459eef;\n    }\n}\n</style>\n","\nimport { defineComponent, ref, watch } from 'vue';\nimport { ElButton, ElButtonGroup } from 'element-plus';\n\nimport { SeatAreaType } from '@/data/workstations-data';\n\nexport default defineComponent({\n    components: { ElButtonGroup, ElButton },\n    props: {\n        odcInstance: {\n            type: Object,\n        },\n    },\n    emits: ['click-monitor-btn', 'monitor-mouse-move', 'refresh'],\n    setup(props, context) {\n        const handleClick = (index: number, area?: string) => {\n            context.emit('click-monitor-btn', { index, area });\n        };\n\n        const refresh = () => {\n            context.emit('refresh');\n        };\n        const handleMouseMove = (index: number, area?: string, option?: 0 | 1) => {\n            context.emit('monitor-mouse-move', { index, area, option });\n        };\n        return {\n            handleClick,\n            handleMouseMove,\n            refresh: refresh,\n            seatAreaType: SeatAreaType,\n        };\n    },\n});\n","import { render } from \"./index.vue?vue&type=template&id=905ebe34&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=905ebe34&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-905ebe34\"\n\nexport default script","\nimport { defineComponent } from 'vue';\nimport { ElLoading } from 'element-plus';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport * as THREE from 'three';\n\nimport { loadODCResource, ODC } from '@/scenes/odc';\nimport BizGroupInfo from '@/views/biz-group-info/index.vue';\nimport OverviewInfo from '@/views/overview-info/index.vue';\nimport MonitorToolbar from '@/views/monitor-toolbar/index.vue';\nimport { SeatAreaType } from '@/data/workstations-data';\n\nexport default defineComponent({\n    name: 'App',\n    components: { BizGroupInfo, OverviewInfo, MonitorToolbar },\n    setup() {\n        let odc: undefined | ODC;\n        const loading = ElLoading.service({\n            lock: true,\n            text: 'Loading',\n            background: 'rgba(0, 0, 0, 0.7)',\n        });\n\n        loadODCResource(() => loading.close()).then(() => {\n            odc = new ODC();\n        });\n        const onSeatClick = (code: string) => {\n            if (odc) {\n                odc.lightSeat([code]);\n            }\n        };\n        const getCurrentCameraMonitor = ({\n            index,\n            area,\n        }: {\n            index: number;\n            area: SeatAreaType;\n        }) => {\n            return area === SeatAreaType.north\n                ? odc?.getStructure().getMonitors().north[index]\n                : odc?.getStructure().getMonitors().south[index];\n        };\n        const onMonitorClick = ({ index, area }: { index: number; area: SeatAreaType }) => {\n            const currentCameraMonitor = getCurrentCameraMonitor({ index, area });\n            currentCameraMonitor?.observationArea({\n                camera: odc?.getCamera() as THREE.PerspectiveCamera,\n                controls: odc?.getControls() as OrbitControls,\n            });\n        };\n        const onMonitorMouseMove = ({\n            index,\n            area,\n            option,\n        }: {\n            index: number;\n            area: SeatAreaType;\n            option: number;\n        }) => {\n            const currentCameraMonitor = getCurrentCameraMonitor({ index, area });\n            const hex = option === 0 ? 0xffffff : 0x459eef;\n            currentCameraMonitor?.setColor(hex);\n            const scale = option === 0 ? 30 : 40;\n            currentCameraMonitor?.setScale(scale);\n        };\n        const onRefresh = () => {\n            odc?.refresh();\n        };\n        return {\n            onSeatClick,\n            onMonitorClick,\n            onMonitorMouseMove,\n            onRefresh,\n        };\n    },\n});\n","import { render } from \"./app.vue?vue&type=template&id=d17e4486\"\nimport script from \"./app.vue?vue&type=script&lang=ts\"\nexport * from \"./app.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue';\n\nimport App from './app.vue';\n\nimport 'element-theme-dark';\nimport '@/element-theme/index.scss';\nimport '@/main.css';\n\ncreateApp(App).mount('#app');\n"],"sourceRoot":""}