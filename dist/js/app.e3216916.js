(function(e){function t(t){for(var a,i,c=t[0],s=t[1],u=t[2],b=0,d=[];b<c.length;b++)i=c[b],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);l&&l(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/odc-monitor/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"05b3":function(e,t,n){},2616:function(e,t,n){},"4a1d":function(e,t,n){},"5f7b":function(e,t,n){"use strict";n("2616")},"703d":function(e,t,n){},"73cf":function(e,t,n){"use strict";n("b027")},"89e9":function(e,t,n){},b027:function(e,t,n){},c227:function(e,t,n){"use strict";n("89e9")},ccca:function(e,t,n){"use strict";n("4a1d")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function o(e,t,n,o,r,i){var c=Object(a["Q"])("overview-info"),s=Object(a["Q"])("biz-group-info"),u=Object(a["Q"])("seat-info"),l=Object(a["Q"])("monitor-toolbar");return Object(a["H"])(),Object(a["m"])(a["b"],null,[Object(a["q"])(c),Object(a["q"])(s,{onSeatClick:e.onSeatClick},null,8,["onSeatClick"]),Object(a["q"])(u,{visible:e.seatInfo.visible,data:e.seatInfo.data,onClose:t[0]||(t[0]=function(t){return e.seatInfo.visible=!1})},null,8,["visible","data"]),Object(a["q"])(l,{onClickMonitorBtn:e.onMonitorClick,onMonitorMouseMove:e.onMonitorMouseMove,onRefresh:e.onRefresh},null,8,["onClickMonitorBtn","onMonitorMouseMove","onRefresh"])],64)}var r=n("7864"),i=n("d4ec"),c=n("bee2"),s=n("ade3"),u=(n("caad"),n("2532"),n("ac1f"),n("841c"),n("d3b7"),n("3ca3"),n("ddb0"),n("4160"),n("159b"),n("c0b6"),n("5a89")),l=n("22b5"),b=n("4721"),d=n("2909"),v=(n("13d5"),n("99af"),n("3835")),h=(n("d81d"),function(e){return e/window.innerWidth*2-1}),f=function(e){return-e/window.innerHeight*2+1},O=function(e){var t=71200,n=1600;return e*n/t},p=function(e,t){var n=e.map((function(e){return O(e)})),a=Object(v["a"])(n,2),o=a[0],r=a[1],i=t.map((function(e){return O(e)})),c=Object(v["a"])(i,2),s=c[0],u=c[1],l=(o+s)/2,b=(r+u)/2;return{x:b,z:l}},j=function(e,t,n){var a=e.camera,o=e.raycasterInstance;o.setFromCamera(t,a);var r=o.intersectObjects(n,!0);if(r.length>0)return r[0].object},m=function(e,t,n){var a=e.camera,o=e.raycasterInstance;o.setFromCamera(t,a);var r=o.intersectObjects(n,!0);if(r.length>0)return r[0]},g=function(){function e(t){var n=t.camera,a=t.highlightOutlinePass;Object(i["a"])(this,e),Object(s["a"])(this,"observers",void 0),Object(s["a"])(this,"camera",void 0),Object(s["a"])(this,"highlightOutlinePass",void 0),Object(s["a"])(this,"moveRaycaster",void 0),this.observers=[],this.camera=n,this.moveRaycaster=new u["N"],this.highlightOutlinePass=a,this.initEvent()}return Object(c["a"])(e,[{key:"addObservers",value:function(e){var t;(t=this.observers).push.apply(t,Object(d["a"])(e))}},{key:"getObserverGroup",value:function(e){var t=this,n=e.x,a=e.y;return this.observers.reduce((function(e,o){var r=j({camera:t.camera,raycasterInstance:t.moveRaycaster},{x:n,y:a},o.getMousemoveObserveObjects());return r?{active:[].concat(Object(d["a"])(e.active),[{activeMesh:r,observer:o}]),inactive:e.inactive}:{active:e.active,inactive:[].concat(Object(d["a"])(e.inactive),[{observer:o}])}}),{active:[],inactive:[]})}},{key:"initEvent",value:function(){var e=this;document.addEventListener("mousemove",(function(t){var n=h(t.clientX),a=f(t.clientY);requestAnimationFrame((function(){e.highlightOutlinePass.selectedObjects=[];var t=e.getObserverGroup({x:n,y:a});t.inactive.forEach((function(t){var n=t.observer;n.beforeMousemove&&n.beforeMousemove({highlightOutlinePass:e.highlightOutlinePass})})),t.active.forEach((function(t){var n=t.observer,a=t.activeMesh;n.beforeMousemove&&n.beforeMousemove({highlightOutlinePass:e.highlightOutlinePass}),n.onMousemove&&n.onMousemove({highlightOutlinePass:e.highlightOutlinePass},a)}))}))}))}}]),e}(),y=n("2ef0"),k=function(){function e(t){var n=t.camera,a=t.highlightOutlinePass,o=t.controls;Object(i["a"])(this,e),Object(s["a"])(this,"observers",void 0),Object(s["a"])(this,"camera",void 0),Object(s["a"])(this,"controls",void 0),Object(s["a"])(this,"highlightOutlinePass",void 0),Object(s["a"])(this,"clickRaycaster",void 0),this.observers=[],this.camera=n,this.controls=o,this.clickRaycaster=new u["N"],this.highlightOutlinePass=a,this.initEvent()}return Object(c["a"])(e,[{key:"addObservers",value:function(e){var t;(t=this.observers).push.apply(t,Object(d["a"])(e))}},{key:"getObserverGroup",value:function(e){var t=this,n=e.x,a=e.y,o=this.observers.reduce((function(e,o){var r=m({camera:t.camera,raycasterInstance:t.clickRaycaster},{x:n,y:a},o.getClickObserveObjects());return r?{active:[].concat(Object(d["a"])(e.active),[{intersection:r,observer:o}]),inactive:e.inactive}:{active:e.active,inactive:[].concat(Object(d["a"])(e.inactive),[{observer:o}])}}),{active:[],inactive:[]});return o.active=Object(y["sortBy"])(o.active,(function(e){var t=e.intersection;return t.distance})),o}},{key:"initEvent",value:function(){var e=this;document.addEventListener("click",(function(t){var n=h(t.clientX),a=f(t.clientY),o=e.getObserverGroup({x:n,y:a});o.inactive.forEach((function(e){var t=e.observer;t.beforeClick&&t.beforeClick()}));var r=!1;o.active.forEach((function(t){var n=t.observer,a=t.intersection;n.beforeClick&&n.beforeClick(),!r&&n.onClick&&(r=n.onClick({highlightOutlinePass:e.highlightOutlinePass,controls:e.controls,camera:e.camera},a.object))}))}))}}]),e}(),w=new u["k"],x=n("257e"),M=n("262e"),z=n("2caf"),P=(n("b0c0"),n("e642")),C=(n("277d"),function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.call(this),Object(s["a"])(Object(x["a"])(e),"baseWidth",void 0),Object(s["a"])(Object(x["a"])(e),"baseHeight",void 0),Object(s["a"])(Object(x["a"])(e),"baseDepth",void 0),Object(s["a"])(Object(x["a"])(e),"host",void 0),Object(s["a"])(Object(x["a"])(e),"hostMaterial",void 0),e.baseHeight=18,e.baseDepth=6,e.baseWidth=18,e.host=e.createHost(),e.hostMaterial=e.host.material,e.add(e.host),e}return Object(c["a"])(n,[{key:"active",value:function(){this.host.material=new u["E"]({color:4235007})}},{key:"silence",value:function(){this.host.material=this.hostMaterial}},{key:"createHostGeometry",value:function(){return new u["e"](this.baseWidth,this.baseHeight,this.baseDepth)}},{key:"createHostMaterial",value:function(){return new u["D"]({color:"#282c34"})}},{key:"createHost",value:function(){return new u["A"](this.createHostGeometry(),this.createHostMaterial())}}]),n}(u["p"])),T=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.call(this),e.userData.clazzName=n.clazzName,e}return n}(C);Object(s["a"])(T,"clazzName","HWHost");var S=n("4086"),D=function(e){var t="/odc-monitor";return"".concat(t).concat(e)},E=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.call(this),Object(s["a"])(Object(x["a"])(e),"logo",void 0),e.userData.clazzName=n.clazzName,e.logo=e.createLogo(),e.add(e.logo),e}return Object(c["a"])(n,[{key:"createHostMaterial",value:function(){return new u["D"]({color:"rgb(224,224,224)"})}},{key:"createLogo",value:function(){if(!n.resource.logoObject3D)throw new Error("No Resource");var e=n.resource.logoObject3D.clone();return e.position.x=this.host.position.x-this.baseWidth/2,e.position.z=this.host.position.z,e.position.y=this.baseHeight/8,e.rotation.y=-Math.PI/2,e.scale.set(.04,.04,.04),e}}],[{key:"loadResource",value:function(){return new Promise((function(e){(new S["a"]).load(D("/3d-model/apple-logo/apple-logo.mtl"),(function(t){var a=new P["a"];a.setMaterials(t),a.load(D("/3d-model/apple-logo/apple-logo.obj"),(function(t){n.resource.logoObject3D=t,e({logoObject3D:t})}))}))}))}}]),n}(C);Object(s["a"])(E,"clazzName","AppleHost"),Object(s["a"])(E,"resource",{logoObject3D:void 0});var I=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.call(this),Object(s["a"])(Object(x["a"])(e),"monitor",void 0),Object(s["a"])(Object(x["a"])(e),"screenMaterial",void 0),Object(s["a"])(Object(x["a"])(e),"createMonitor",(function(){if(!n.resource.monitorObject3D)throw new Error("You have not loadResource");var e=n.resource.monitorObject3D.clone();return e.userData.external=!0,e})),e.monitor=e.createMonitor(),e.userData.clazzName=n.clazzName,e.screenMaterial=e.monitor.getObjectByName("Screen").material,e.add(e.monitor),e}return Object(c["a"])(n,[{key:"active",value:function(){var e=new u["X"],t=e.load(D("/texture/screen.png")),n=this.monitor.getObjectByName("Screen");n instanceof u["A"]&&(n.material=new u["E"]({map:t}))}},{key:"silence",value:function(){var e=this.monitor.getObjectByName("Screen");e instanceof u["A"]&&(e.material=this.screenMaterial)}}],[{key:"loadResource",value:function(e){return new Promise((function(t){new S["a"](e).load(D("/3d-model/monitor/monitor.mtl"),(function(a){var o=new P["a"](e);o.setMaterials(a),o.load(D("/3d-model/monitor/monitor.obj"),(function(e){return n.resource.monitorObject3D=e,t({monitorObject3D:e})}))}))}))}}]),n}(u["p"]);Object(s["a"])(I,"clazzName","monitor"),Object(s["a"])(I,"resource",{monitorObject3D:void 0});n("1276"),n("cb29");var R=function(e,t){t||(t={});var n=t.hasOwnProperty("fontFace")?t["fontFace"]:"Arial",a=t.hasOwnProperty("fontSize")?t["fontSize"]:18,o=t.hasOwnProperty("fontColor")?t["fontColor"]:"rgba(0, 0, 0, 1)",r=!!t.hasOwnProperty("fontBold")&&t["fontBold"],i=!!t.hasOwnProperty("fontItalic")&&t["fontItalic"],c=t.hasOwnProperty("textAlign")?t["textAlign"]:"left",s=t.hasOwnProperty("borderThickness")?t["borderThickness"]:4,l=t.hasOwnProperty("borderColor")?t["borderColor"]:"rgba(0, 0, 0, 1)",b=t.hasOwnProperty("borderRadius")?t["borderRadius"]:0,d=t.hasOwnProperty("backgroundColor")?t["backgroundColor"]:"rgba(255, 255, 255, 1)",v=document.createElement("canvas").getContext("2d");v.font=(r?"Bold ":"")+(i?"Italic ":"")+a+"px "+n;var h=e.split("\n"),f=0;h.forEach((function(e){var t=v.measureText(e);f=t.width>f?t.width:f}));var O=1.4*a*h.length,p=document.createElement("canvas"),j=p.getContext("2d");j.font=v.font,j.fillStyle=d,j.strokeStyle=l,j.lineWidth=s,x(j,s/2,s/2,f+s,O+s,b),j.fillStyle=o,j.textAlign=c;var m={left:s,start:s,center:f/2+s,right:f+s,end:f+s},g=a+s;h.forEach((function(e){j.fillText(e,m[c],g),g+=1.4*a}));var y=new u["W"](p);y.needsUpdate=!0;var k=new u["U"]({map:y,transparent:!0}),w=new u["T"](k);return w.scale.set(p.width/2,p.height/2,1),w;function x(e,t,n,a,o,r){e.beginPath(),e.moveTo(t+r,n),e.lineTo(t+a-r,n),e.quadraticCurveTo(t+a,n,t+a,n+r),e.lineTo(t+a,n+o-r),e.quadraticCurveTo(t+a,n+o,t+a-r,n+o),e.lineTo(t+r,n+o),e.quadraticCurveTo(t,n+o,t,n+o-r),e.lineTo(t,n+r),e.quadraticCurveTo(t,n,t+r,n),e.closePath(),e.fill(),e.stroke()}},H=n("b85c"),N=function(e){var t=new u["d"],n=new u["ab"];return t.setFromObject(e),t.getSize(n)},A=function(e,t){var n=e.scale,a=n.x,o=n.y,r=n.z;e.scale.set(a*t,o*t,r*t)},W=function e(t){var n;return t.parent?null!==(n=t.parent)&&void 0!==n&&n.userData.clazzName?t.parent:e(t.parent):void 0},_=function e(t,n){return t.parent?t.parent.userData&&t.parent.userData.clazzName===n?t.parent:e(t.parent,n):void 0},L=function(e,t){var n=[],a=function e(a){var o;(null===(o=a.userData)||void 0===o?void 0:o.clazzName)===t?n.push(a):a.children&&a.children.forEach((function(t){return e(t)}))};return a(e),n},B=function e(t,n,a){var o,r;if((null===(o=t.userData)||void 0===o?void 0:o.clazzName)===n&&(null===(r=t.userData)||void 0===r?void 0:r.id)===a)return t;if(t.children){var i,c=Object(H["a"])(t.children);try{for(c.s();!(i=c.n()).done;){var s=i.value,u=e(s,n,a);if(u)return u}}catch(l){c.e(l)}finally{c.f()}}},q=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(e,a){var o,r,c;Object(i["a"])(this,n),c=t.call(this),Object(s["a"])(Object(x["a"])(c),"monitors",void 0),Object(s["a"])(Object(x["a"])(c),"monitorTips",void 0),Object(s["a"])(Object(x["a"])(c),"pc",void 0),Object(s["a"])(Object(x["a"])(c),"pcTip",void 0),Object(s["a"])(Object(x["a"])(c),"macMini",void 0),Object(s["a"])(Object(x["a"])(c),"macMiniTip",void 0),c.monitors=[],c.monitorTips=[],c.userData.clazzName=n.clazzName;var u=c.createMonitor(e,a),l=u.monitors,b=u.monitorTips;(o=c.monitors).push.apply(o,Object(d["a"])(l)),(r=c.monitorTips).push.apply(r,Object(d["a"])(b));var v=c.createMacMini(e,a),h=v.macMini,f=v.macMiniTip,O=c.createPC(e,a),p=O.pc,j=O.pcTip;return c.pc=p,c.pcTip=j,c.macMini=h,c.macMiniTip=f,c.add(c.pc),c.add(c.pcTip),c.add(c.macMini),c.add(c.macMiniTip),c.monitors.forEach((function(e){return c.add(e)})),c.monitorTips.forEach((function(e){return c.add(e)})),c}return Object(c["a"])(n,[{key:"active",value:function(e){var t=W(e),n=null===t||void 0===t?void 0:t.userData.clazzName;if(n===I.clazzName){t.active();var a=null===t||void 0===t?void 0:t.userData.index;this.monitorTips[a].material.visible=!0}n===E.clazzName&&(this.macMiniTip.material.visible=!0,this.macMini.active()),n===T.clazzName&&(this.pcTip.material.visible=!0,this.pc.active())}},{key:"silence",value:function(){this.pc.silence(),this.macMini.silence(),this.monitors.forEach((function(e){e.silence()})),this.pcTip.material.visible=!1,this.macMiniTip.material.visible=!1,this.monitorTips.forEach((function(e){e.material.visible=!1}))}},{key:"createMonitor",value:function(e,t){var n=[],a=[],o=new I;if(!Array.isArray(t.monitor))return{monitors:[],monitorTips:[]};for(var r=0;r<t.monitor.length;r++){var i=o.clone();i.rotation.y=-Math.PI,i.position.z=40*r,i.name="".concat(e,"_monitor_").concat(r),i.userData.highlight=!0,i.userData.type="monitor.".concat(r),i.userData.index=r,i.userData.data=t;var c=this.createTextSprite(t.monitor[r]),s=N(i),u=s.y,l=s.z;c.position.y=u+3,c.position.z=i.position.z+l/2,c.material.visible=!1,n.push(i),a.push(c)}return{monitors:n,monitorTips:a}}},{key:"createPC",value:function(e,t){var n=new T,a=N(n),o=a.y,r=a.z;n.position.z=-r-1,n.position.y=o/2,n.name="".concat(e,"_pc"),n.userData.highlight=!0,n.userData.type="pc",n.userData.data=t;var i=this.createTextSprite(t.pc);return i.position.y=o+3,i.position.z=n.position.z-r/2,i.material.visible=!1,{pc:n,pcTip:i}}},{key:"createMacMini",value:function(e,t){var n=new E,a=N(n),o=a.y,r=N(this.monitors[0]),i=r.z;n.position.z=2*i+1,n.position.y=o/2,n.name="".concat(e,"_macMini"),n.userData.highlight=!0,n.userData.type="macMini",n.userData.data=t;var c=this.createTextSprite(t.macMini),s=N(c),u=s.x;return c.position.y=o+3,c.position.z=n.position.z+u/2,c.material.visible=!1,{macMini:n,macMiniTip:c}}},{key:"createTextSprite",value:function(e){var t=R(e||"",{fontFace:"Helvetica",fontSize:36,fontColor:"rgba(255, 255, 255, 1)",fontBold:!1,fontItalic:!1,textAlign:"center",borderThickness:3,borderColor:"rgba(50, 50, 255, 0.8)",borderRadius:6,backgroundColor:"rgba(0, 0, 0, 0.8)"});return A(t,.12),t}}]),n}(u["p"]);Object(s["a"])(q,"clazzName","desktop");var U,Q=function(e,t,n){var a=e.camera,o=e.controls,r=t.cameraPosition,i=t.orbitTargetPosition,c=n.cameraPosition,s=n.orbitTargetPosition,u=new l["b"]({x1:r.x,y1:r.y,z1:r.z,x2:i.x,y2:i.y,z2:i.z});u.onStart((function(){o.enabled=!1})),u.to({x1:c.x,y1:c.y,z1:c.z,x2:s.x,y2:s.y,z2:s.z},2e3),u.onUpdate((function(e){a.position.x=e.x1,a.position.y=e.y1,a.position.z=e.z1,o.target.x=e.x2,o.target.y=e.y2,o.target.z=e.z2,o.update()})),u.onComplete((function(){o.enabled=!0})),u.easing(l["a"].Cubic.InOut),u.start()},K=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.call(this),Object(s["a"])(Object(x["a"])(e),"looAtPosition",void 0),Object(s["a"])(Object(x["a"])(e),"keyPoint",void 0),Object(s["a"])(Object(x["a"])(e),"clickCallback",void 0),e.clickCallback=[],e.looAtPosition=new u["ab"](0,0,0),e.keyPoint=e.createKeypoint(),e.keyPoint.userData.type="keypoint",e.userData.clazzName=n.clazzName,e.add(e.keyPoint),e}return Object(c["a"])(n,[{key:"addClickCallback",value:function(e){this.clickCallback.push(e)}},{key:"beforeClick",value:function(){}},{key:"onClick",value:function(e,t){e.highlightOutlinePass;var n=e.camera,a=e.controls;return"keypoint"===t.userData.type&&(this.observationArea({camera:n,controls:a},t),this.clickCallback.forEach((function(e){return e()}))),!0}},{key:"observationArea",value:function(e,t){var n,a=e.camera,o=e.controls,r=t.getWorldPosition(new u["ab"]),i=r.x,c=r.y,s=r.z,l=null!==(n=t.parent)&&void 0!==n&&n.userData.isSideKeypoint?new u["ab"](i,c+800,s-100):new u["ab"](i,c,s);Q({camera:a,controls:o},{cameraPosition:a.position,orbitTargetPosition:o.target},{cameraPosition:l,orbitTargetPosition:this.looAtPosition})}},{key:"getClickObserveObjects",value:function(){return this.children}},{key:"setLookAt",value:function(e){this.looAtPosition=e}},{key:"createKeypoint",value:function(){var e=new u["X"],t=e.load(D("/texture/key-point.png")),n=new u["U"]({map:t}),a=new u["T"](n),o=20;return a.scale.set(o,o,o),a}}]),n}(u["p"]);Object(s["a"])(K,"clazzName","keyPoint"),function(e){e["showSeatInfo"]="showSeatInfo"}(U||(U={}));var G=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(e){var a;Object(i["a"])(this,n);var o=e||{};return a=t.call(this),Object(s["a"])(Object(x["a"])(a),"table",void 0),Object(s["a"])(Object(x["a"])(a),"keyPoint",void 0),Object(s["a"])(Object(x["a"])(a),"desktop",void 0),Object(s["a"])(Object(x["a"])(a),"light",void 0),a.table=a.createTable(),a.keyPoint=a.createKeyPoint(o),a.desktop=a.createDeskTop(o),a.light=a.createLight(),a.userData.clazzName=n.clazzName,a.userData.id="".concat(e.code),a.add(a.table),a.add(a.keyPoint),a.add(a.desktop),a.add(a.light),new Promise((function(e){return e(!0)})).then((function(){a.locationKeyPoint()})),a}return Object(c["a"])(n,[{key:"lightOff",value:function(){this.light.visible=!1}},{key:"lightOn",value:function(){this.light.visible=!0}},{key:"locationKeyPoint",value:function(){var e=this.getWorldPosition(new u["ab"]),t=e.y,n=this.desktop.getWorldPosition(new u["ab"]),a=n.x,o=this.keyPoint.getWorldPosition(new u["ab"]),r=o.x,i=o.z,c=new u["ab"](a>r?r+100:r-100,t+16,i);this.keyPoint.setLookAt(c)}},{key:"createLight",value:function(){var e=new u["S"]("rgb(245,108,108)",2,180),t=this.table.position,n=t.x,a=t.y,o=t.z;return e.position.set(n+2,a+20,o),e.target=this.table,e.decay=2,e.visible=!1,e}},{key:"createKeyPoint",value:function(e){var t=new K;t.addClickCallback((function(){return w.dispatchEvent({type:U.showSeatInfo,message:e})}));var n=N(this.table),a=n.x;return t.position.y=10,t.position.x=-a-6,w.dispatchEvent({type:"addClickObserver",message:[t]}),t}},{key:"createDeskTop",value:function(e){var t="desktop_".concat(e.rowCode),n=new q(t,e);n.name=t,n.scale.set(.25,.25,.25);var a=N(this.table),o=a.z,r=a.y;return n.position.y=r,n.position.z=this.table.position.z-o/4,n}},{key:"createTable",value:function(){if(!n.resource.tableObject3D)throw new Error("No Resource");var e=n.resource.tableObject3D.clone(),t=.25;return e.rotation.x=-Math.PI/2,e.rotation.z=Math.PI/2,e.scale.set(t,t,t),e}}],[{key:"loadResource",value:function(e){return new Promise((function(t){var a=new P["a"](e);a.load(D("/3d-model/table/table.obj"),(function(e){n.resource.tableObject3D=e,t({tableObject3D:e})}))}))}}]),n}(u["p"]);Object(s["a"])(G,"clazzName","seat"),Object(s["a"])(G,"resource",{tableObject3D:void 0});var F=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(e){var a,o=e.x,r=e.z;return Object(i["a"])(this,n),a=t.call(this),Object(s["a"])(Object(x["a"])(a),"coffeeTable",void 0),a.coffeeTable=a.createCoffeeTable(),a.add(a.coffeeTable),a.position.z=r,a.position.x=o,a}return Object(c["a"])(n,[{key:"createCoffeeTable",value:function(){if(!n.resource.coffeeTableObject3D)throw new Error("No Resource");var e=n.resource.coffeeTableObject3D.clone(),t=.5;return e.scale.set(t,t,t),e}}],[{key:"loadResource",value:function(e){return new Promise((function(t){var a=new P["a"](e);a.load(D("/3d-model/coffee-table/coffee-table.obj"),(function(e){var a=.5;e.scale.set(a,a,a),n.resource.coffeeTableObject3D=e,t({coffeeTableObject3D:e})}))}))}}]),n}(u["p"]);Object(s["a"])(F,"resource",{coffeeTableObject3D:void 0});var X=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(e,a,o){var r,c=o.x,u=o.z;return Object(i["a"])(this,n),r=t.call(this),Object(s["a"])(Object(x["a"])(r),"sofa",void 0),r.position.z=u,r.position.x=c,r.sofa=r.createSofa(e,a),r.add(r.sofa),r}return Object(c["a"])(n,[{key:"createSofa",value:function(e,t){var a;if(null===(a=n.resource)||void 0===a||!a.sofaObject3D)throw new Error("No Resource");var o=n.resource.sofaObject3D.clone(),r=50;o.scale.set(116,r,r),o.rotation.x=-Math.PI/2;var i=Object(v["a"])(e,2),c=i[0],s=i[1],u=Object(v["a"])(t,2),l=u[0],b=u[1];return o.rotation.z=Math.atan2(b-s,l-c)+Math.PI/2,o.translateY(-15),o.children[0].material.color.set(4620980),o}}],[{key:"loadResource",value:function(e){return new Promise((function(t){var a=new P["a"](e);a.load(D("/3d-model/couch/couch.obj"),(function(e){n.resource.sofaObject3D=e,t({sofaObject3D:e})}))}))}}]),n}(u["p"]);Object(s["a"])(X,"resource",{sofaObject3D:void 0});var Y=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.call(this),Object(s["a"])(Object(x["a"])(e),"kitchen",void 0),e.kitchen=e.createKitchen(),e.add(e.kitchen),e}return Object(c["a"])(n,[{key:"createKitchen",value:function(){if(!n.resource.kitchenObject3D)throw new Error("No Resource");var e=n.resource.kitchenObject3D.clone(),t=.8;return e.scale.set(t,t,t),e.children[0].material.color.set(14596231),e}}],[{key:"loadResource",value:function(e){return new Promise((function(t){var a=new P["a"](e);a.load(D("/3d-model/kitchen/kitchen.obj"),(function(e){n.resource.kitchenObject3D=e,t({kitchenObject3D:e})}))}))}}]),n}(u["p"]);Object(s["a"])(Y,"resource",{kitchenObject3D:void 0});var J,Z=2800,$=100,V={begin:[0,0],end:[25200,71200]},ee=[{type:"external",begin:[0,0],end:[0,71200]},{type:"external",begin:[25200,0],end:[25200,71200]},{type:"external",begin:[0,0],end:[25200,0]},{type:"external",begin:[0,71200],end:[25200,71200]},{type:"glass",begin:[8400,0],end:[8400,8400]},{type:"inner",begin:[0,8400],end:[8400,8400]},{type:"inner",begin:[8400,8400],end:[8400,12600]},{type:"inner",begin:[8400,12600],end:[14400,16800]},{type:"inner",begin:[16800,0],end:[16800,8400]},{type:"inner",begin:[16800,8400],end:[25200,8400]},{type:"inner",begin:[16800,19200],end:[16800,26800]},{type:"glass",begin:[16800,16800],end:[16800,19200]},{type:"glass",begin:[16800,19200],end:[25200,19200]},{type:"inner",begin:[16800,26800],end:[25200,26800]},{type:"inner",begin:[14400,16800],end:[14400,36e3]},{type:"inner",begin:[14400,36e3],end:[8400,42e3]},{type:"inner",begin:[8400,45600],end:[8400,49200]},{type:"glass",begin:[16800,49200],end:[16800,64800]},{type:"inner",begin:[10800,49200],end:[10800,64800]},{type:"glass",begin:[10800,49200],end:[16800,49200]},{type:"inner",begin:[10800,64800],end:[16800,64800]},{type:"inner",begin:[0,49200],end:[8400,49200]},{type:"glass",begin:[14400,68e3],end:[25200,66e3]}],te={begin:[8400,59200],end:[8400,66400]},ne={begin:[8400,12600],end:[14400,16800]},ae={begin:[8400,20400],end:[14400,25200]},oe=1200;(function(e){e["north"]="north",e["south"]="south"})(J||(J={}));var re={begin:[120,8400],end:[8400-oe,48e3]},ie={begin:[16800+oe,26800],end:[25200,66e3]},ce=function(e,t){for(var n=[],a=t===J.north?"2900":"2800",o=t===J.north?"n":"s",r=["a","b","c","d","e","f","g","h","i","j","k","l","m"],i=0;i<e;i++){for(var c=[],s=0;s<10;s++)c.push({user:"张".concat(i).concat(s),code:"".concat(o).concat(r[i]).concat(s),rowCode:"".concat(o).concat(r[i]),monitor:["".concat(a,"6").concat(i).concat(s).concat(s),"".concat(a,"6").concat(i+1).concat(s+1).concat(s+1)],macMini:"".concat(a,"3").concat(i).concat(s).concat(s),pc:"".concat(a,"2").concat(i).concat(s).concat(s)});n.push(c)}return n},se=ce(10,J.north),ue=ce(9,J.south),le={totalSeat:190,useSeat:80},be=[{code:"E-commerce Frontend",seats:["sa1","sa5","sb9"],begin:[16800+oe,32800],end:[16800+oe,34e3]},{code:"Car Network",seats:["sc1","sc2","sc3","sc4","sc5","sc6","sc7","sc8","sc9","sd6"],begin:[16800+oe,40600],end:[16800+oe,41800]},{code:"Low Code",seats:["se1","se2","se3","se4","se5","se6","se7"],begin:[16800+oe,47200],end:[16800+oe,48400]},{code:"E-commerce Backend",seats:["sf1","sf2","sf3","sf4","sf5","sf6","sf7"],begin:[16800+oe,51400],end:[16800+oe,52600]},{code:"Express",seats:["sg1","sg2","sg3","sg4","sg5","sg6","sg7"],begin:[16800+oe,57600],end:[16800+oe,59e3]},{code:"IT Security",seats:["sj1","sj5","sj9"],begin:[16800+oe,61200],end:[16800+oe,63600]}],de=function(){return{total:381,usage:100,usageRate:Math.ceil(100/381*100)}},ve=function(){return{total:190,usage:50,usageRate:Math.ceil(50/190*100)}},he=function(){return{total:190,usage:50,usageRate:Math.ceil(50/190*100)}},fe=[{begin:[-3500,0],end:[25200,-3500],type:"side"},{begin:[0,73700],end:[25200,73700],type:"side"},{begin:[26600,0],end:[26600,71200],type:"side"},{begin:[-1400,0],end:[-1400,71200],type:"side"},{begin:[13800,49200],end:[13800,64800]},{begin:[4200,49200],end:[4200,71200]}],Oe=(n("38cf"),function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(e,a){var o;Object(i["a"])(this,n),o=t.call(this);var r=new u["A"](o.initGeometry(e,a),o.initMaterial()),c=o.calculatePosition(e,a),s=Object(v["a"])(c,3),l=s[0],b=s[1],d=s[2];return r.position.set(l,b,d),o.add(r),o}return Object(c["a"])(n,[{key:"initMaterial",value:function(){var e=new u["X"],t=e.load(D("/texture/floor.jpeg"));return t.wrapS=u["O"],t.wrapT=u["O"],t.repeat.set(2,1),new u["D"]({color:"#5e98c6"})}},{key:"initGeometry",value:function(e,t){var n=Object(v["a"])(e,2),a=n[0],o=n[1],r=Object(v["a"])(t,2),i=r[0],c=r[1],s=i-a,l=c-o;return new u["e"](l,2,s)}},{key:"calculatePosition",value:function(e,t){var n=Object(v["a"])(e,2),a=n[0],o=n[1],r=Object(v["a"])(t,2),i=r[0],c=r[1],s=i-a,u=c-o;return[u/2,0,s/2]}}]),n}(u["p"])),pe=n("8468"),je=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(e,a,o,r){var c;Object(pe["a"])(e);var u=a.xLength,l=a.zLength;Object(i["a"])(this,n),c=t.call(this),Object(s["a"])(Object(x["a"])(c),"activeDesktop",void 0);var b=c.createWorkstation({xLength:u,zLength:l},o,r);return c.add(b),c}return Object(c["a"])(n,[{key:"beforeMousemove",value:function(){}},{key:"onMousemove",value:function(e,t){var n,a=e.highlightOutlinePass;null!==t&&void 0!==t&&null!==(n=t.parent)&&void 0!==n&&n.userData.highlight&&(a.selectedObjects=[null===t||void 0===t?void 0:t.parent])}},{key:"beforeClick",value:function(){this.activeDesktop&&(this.activeDesktop.silence(),this.activeDesktop=void 0)}},{key:"onClick",value:function(e,t){e.highlightOutlinePass;var n=W(t);if(null!==n&&void 0!==n&&n.userData.highlight){var a=_(t,q.clazzName);a&&(a.active(t),this.activeDesktop=a)}return!0}},{key:"getMousemoveObserveObjects",value:function(){var e=[];return this.children.forEach((function(t){t.children.forEach((function(t){t.children.forEach((function(t){e.push(t)}))}))})),e}},{key:"getClickObserveObjects",value:function(){var e=[];return this.children.forEach((function(t){t.children.forEach((function(t){t.children.forEach((function(t){e.push(t)}))}))})),e}},{key:"createWorkstation",value:function(e,t,n){var a=this,o=e.xLength,r=e.zLength,i=o/t.length,c=r/2,s=new u["p"];return t.forEach((function(e,t){var o=a.createSeatGroup(e);o.name="".concat(n,"_seatRow_").concat(t),o.position.z=c,o.position.x=i*t,s.add(o)})),s.position.x=-o/2+60,s.position.z=-c-66,s}},{key:"createSeatGroup",value:function(e){for(var t=new u["p"],n=e.length,a=n/2,o=new G(e[0]),r=N(o.table),i=r.x,c=r.z,s=0;s<a;s++){var l=new G(e[s]),b=new G(e[n-s-1]),d=c*s;b.position.z=d,b.position.x=0,l.position.z=d,l.rotation.y=-Math.PI,l.position.x=i,t.add(b),t.add(l)}return t}}]),n}(u["p"]),me=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(e,a,o,r){var c;Object(i["a"])(this,n),c=t.call(this);var s=new u["A"](c.initGeometry(e,a,o,r),c.initMaterial()),l=c.calculatePosition(e,a,o),b=Object(v["a"])(l,3),d=b[0],h=b[1],f=b[2];return s.position.set(d,h,f),s.rotation.y=c.calculateRotation(e,a),c.add(s),c}return Object(c["a"])(n,[{key:"initMaterial",value:function(){return new u["D"]({color:"#67C23A"})}},{key:"initGeometry",value:function(e,t,n,a){var o=Object(v["a"])(e,2),r=o[0],i=o[1],c=Object(v["a"])(t,2),s=c[0],l=c[1],b=s-r,d=l-i,h=Math.sqrt(Math.pow(b,2)+Math.pow(d,2));return new u["e"](a,n,h)}},{key:"calculatePosition",value:function(e,t,n){var a=Object(v["a"])(e,2),o=a[0],r=a[1],i=Object(v["a"])(t,2),c=i[0],s=i[1];return[(s+r)/2,n/2,(c+o)/2]}},{key:"calculateRotation",value:function(e,t){var n=Object(v["a"])(e,2),a=n[0],o=n[1],r=Object(v["a"])(t,2),i=r[0],c=r[1];return Math.atan2(c-o,i-a)}}]),n}(u["p"]),ge=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(e,a,o,r){return Object(i["a"])(this,n),t.call(this,e,a,o,r)}return Object(c["a"])(n,[{key:"initMaterial",value:function(){return new u["D"]({color:"#2f6186",transparent:!0,opacity:1})}}]),n}(me),ye=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(e,a,o,r){return Object(i["a"])(this,n),t.call(this,e,a,o,r)}return Object(c["a"])(n,[{key:"initMaterial",value:function(){return new u["B"]({color:15528435,transparent:!0,opacity:.4})}}]),n}(me),ke=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(e,a,o,r){return Object(i["a"])(this,n),t.call(this,e,a,o,r)}return Object(c["a"])(n,[{key:"initMaterial",value:function(){return new u["D"]({})}}]),n}(me),we=[{begin:[14400,32800],end:[2e4,35200],observedSeatRowIndex:1},{begin:[14400,46e3],end:[2e4,48400],observedSeatRowIndex:4},{begin:[14400,59200],end:[2e4,61600],observedSeatRowIndex:7}],xe=[{begin:[7600,14200],end:[7600,16600],observedSeatRowIndex:1},{begin:[7600,26800],end:[7600,27800],observedSeatRowIndex:4},{begin:[7600,38800],end:[7600,39400],observedSeatRowIndex:7},{begin:[7600,44600],end:[7600,46200],observedSeatRowIndex:9}],Me=(n("7db0"),function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(e,a,o){var r,c=a.x,u=a.y,l=a.z,b=o.areaType,d=o.observedSeatRowIndex;return Object(i["a"])(this,n),r=t.call(this),Object(s["a"])(Object(x["a"])(r),"areaType",void 0),Object(s["a"])(Object(x["a"])(r),"observedSeatRowIndex",void 0),r.position.z=l,r.position.x=c,r.position.y=u,r.areaType=b,r.observedSeatRowIndex=d,r.add(r.initCameraMonitor(e)),r.add(r.initLine()),r}return Object(c["a"])(n,[{key:"beforeClick",value:function(){}},{key:"onClick",value:function(e,t){e.highlightOutlinePass;var n=e.camera,a=e.controls;return"cameraMonitor"===t.userData.type&&this.observationArea({camera:n,controls:a}),!1}},{key:"getClickObserveObjects",value:function(){return this.children}},{key:"observationArea",value:function(e){var t=this,n=e.camera,a=e.controls,o=this.getWorldPosition(new u["ab"]),r=o.x,i=o.y,c=o.z,s=this.areaType===J.north?new u["ab"](r-10,i+120,c+60):new u["ab"](r,i+80,c-80),l=this.parent.children.find((function(e){return e.name.includes(t.areaType)})),b=l.children[0].children[this.observedSeatRowIndex].getWorldPosition(new u["ab"]),d=new u["ab"](b.x,b.y,b.z+100);Q({camera:n,controls:a},{cameraPosition:n.position,orbitTargetPosition:a.target},{cameraPosition:s,orbitTargetPosition:d})}},{key:"setColor",value:function(e){this.children[0].material.color.set(e)}},{key:"setScale",value:function(e){this.children[0].scale.set(e,e,e)}},{key:"initCameraMonitor",value:function(e){var t=new u["U"]({map:e,sizeAttenuation:!1}),n=new u["T"](t),a=.05;return n.scale.set(a,a,a),n.userData.type="cameraMonitor",n}},{key:"initLine",value:function(){var e=[new u["ab"](0,-80,0),new u["ab"](0,0,0)],t=(new u["f"]).setFromPoints(e);t.setAttribute("color",new u["m"]([new u["h"](0).r,new u["h"](0).g,new u["h"](0).b,new u["h"](16777215).r,new u["h"](16777215).g,new u["h"](16777215).b],3));var n=new u["r"]({vertexColors:!0});return new u["q"](t,n)}}]),n}(u["p"])),ze=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.call(this),Object(s["a"])(Object(x["a"])(e),"projectBrands",void 0),e.projectBrands=e.createProjectBrands(),e.projectBrands.forEach((function(t){return e.add(t)})),e}return Object(c["a"])(n,[{key:"createProjectBrands",value:function(){return be.map((function(e){var t=R(e.code||"",{fontSize:24,fontColor:"rgba(255, 255, 255, 1)",fontBold:!1,fontItalic:!1,textAlign:"center",borderThickness:3,borderColor:"#afe5f3",borderRadius:8,backgroundColor:"#afe5f3"}),n=e.begin,a=e.end,o=p(n,a),r=o.x,i=o.z;return t.position.z=i,t.position.x=r,t.position.y=O(3*Z/5),t}))}}]),n}(u["p"]);Object(s["a"])(ze,"clazzName","projectBrand");var Pe=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.call(this),Object(s["a"])(Object(x["a"])(e),"kitchen",void 0),Object(s["a"])(Object(x["a"])(e),"northSofa",void 0),Object(s["a"])(Object(x["a"])(e),"coffeeTable",void 0),Object(s["a"])(Object(x["a"])(e),"floor",void 0),Object(s["a"])(Object(x["a"])(e),"walls",void 0),Object(s["a"])(Object(x["a"])(e),"northWorkstation",void 0),Object(s["a"])(Object(x["a"])(e),"southWorkstation",void 0),Object(s["a"])(Object(x["a"])(e),"keyPoints",void 0),Object(s["a"])(Object(x["a"])(e),"southCameraMonitors",void 0),Object(s["a"])(Object(x["a"])(e),"northCameraMonitors",void 0),Object(s["a"])(Object(x["a"])(e),"projectBrands",void 0),Object(s["a"])(Object(x["a"])(e),"renderKitchen",(function(){var e=te.begin,t=te.end,n=p(e,t),a=n.x,o=n.z,r=new Y;return r.position.z=o,r.position.x=a,r})),Object(s["a"])(Object(x["a"])(e),"renderNorthSofa",(function(){var e=ne.begin,t=ne.end,n=p(e,t),a=n.x,o=n.z;return new X(e,t,{x:a,z:o})})),Object(s["a"])(Object(x["a"])(e),"renderCoffeeTable",(function(){var e=ae.begin,t=ae.end,n=p(e,t),a=n.x,o=n.z;return new F({x:a,z:o})})),e.kitchen=e.renderKitchen(),e.northSofa=e.renderNorthSofa(),e.coffeeTable=e.renderCoffeeTable(),e.floor=e.renderFloor(),e.keyPoints=e.renderKeyPoints(),e.walls=e.renderWall(),e.southCameraMonitors=e.renderCameraMonitor(J.south),e.northCameraMonitors=e.renderCameraMonitor(J.north),e.northWorkstation=e.renderStation(re,se,J.north),e.southWorkstation=e.renderStation(ie,ue,J.south),e.projectBrands=e.renderProjectBrands(),e.add(e.kitchen),e.add(e.northSofa),e.add(e.coffeeTable),e.add(e.floor),e.add(e.northWorkstation),e.add(e.southWorkstation),e.keyPoints.forEach((function(t){return e.add(t)})),e.walls.forEach((function(t){return e.add(t)})),e.southCameraMonitors.forEach((function(t){return e.add(t)})),e.northCameraMonitors.forEach((function(t){return e.add(t)})),e.addObserver(),e}return Object(c["a"])(n,[{key:"getMonitors",value:function(){return{south:this.southCameraMonitors,north:this.northCameraMonitors}}},{key:"addObserver",value:function(){w.dispatchEvent({type:"addClickObserver",message:[this.northWorkstation]}),w.dispatchEvent({type:"addClickObserver",message:[this.southWorkstation]}),w.dispatchEvent({type:"addClickObserver",message:this.keyPoints}),w.dispatchEvent({type:"addClickObserver",message:this.northCameraMonitors}),w.dispatchEvent({type:"addClickObserver",message:this.southCameraMonitors})}},{key:"renderKeyPoints",value:function(){return fe.map((function(e){var t=e.begin,n=e.end,a=e.type,o=p(t,n),r=o.x,i=o.z,c=new K;return c.position.z=i,c.position.y=O(Z),c.position.x=r,c.userData.isSideKeypoint="side"===a,c}))}},{key:"renderFloor",value:function(){return new Oe(V.begin.map((function(e){return O(e)})),V.end.map((function(e){return O(e)})))}},{key:"renderStation",value:function(e,t,n){var a=e.begin,o=e.end,r=p(a,o),i=r.x,c=r.z,s=a.map((function(e){return O(e)})),u=Object(v["a"])(s,2),l=u[0],b=u[1],d=o.map((function(e){return O(e)})),h=Object(v["a"])(d,2),f=h[0],j=h[1],m=new je({},{xLength:j-b,zLength:f-l},t,n);return m.position.x=i,m.position.z=c,m.name="".concat(n,"Workstation"),m}},{key:"renderWall",value:function(){return ee.map((function(e){var t=e.type,n=e.begin,a=e.end,o=[n.map((function(e){return O(e)})),a.map((function(e){return O(e)})),O(Z),O($)],r=o[0],i=o[1],c=o[2],s=o[3];return"external"===t?new ge(r,i,c,s):"glass"===t?new ye(r,i,c,s):new ke(r,i,c,s)}))}},{key:"renderCameraMonitor",value:function(e){var t=(new u["X"]).load(D("/texture/camera-monitor.png"));return e===J.south?this.generateCameraMonitor(we,t,e):this.generateCameraMonitor(xe,t,e)}},{key:"generateCameraMonitor",value:function(e,t,n){return e.map((function(e){var a=e.begin,o=e.end,r=e.observedSeatRowIndex,i=p(a,o),c=i.x,s=i.z;return new Me(t,{x:c,y:O(Z),z:s},{areaType:n,observedSeatRowIndex:r})}))}},{key:"renderProjectBrands",value:function(){return new ze}}]),n}(u["p"]),Ce=(n("a9e3"),n("32d9")),Te=n("93e9"),Se=n("6c18"),De=n("360d"),Ee=n("4e15"),Ie=function(e,t,n){var a=new Ce["a"](n);a.addPass(new Te["a"](e,t));var o=new Ee["a"](new u["Z"](window.innerWidth,window.innerHeight),e,t);o.edgeStrength=Number(3),o.edgeGlow=Number(0),o.edgeThickness=Number(1),o.pulsePeriod=Number(0),o.usePatternTexture=!1,o.visibleEdgeColor.set("#ffffff"),o.hiddenEdgeColor.set("#190a05"),a.addPass(o);var r=new De["a"](Se["a"]);return r.uniforms["resolution"].value.set(1/window.innerWidth,1/window.innerHeight),a.addPass(r),{composer:a,outlinePass:o}},Re=n("ef20"),He=function(e){Object(M["a"])(n,e);var t=Object(z["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.call(this),Object(s["a"])(Object(x["a"])(e),"stats",void 0),Object(s["a"])(Object(x["a"])(e),"axesHelper",void 0),Object(s["a"])(Object(x["a"])(e),"gridHelper",void 0),e.axesHelper=e.createAxesHelper(),e.gridHelper=e.createGridHelper(),e.stats=e.createStats(),e.add(e.axesHelper),e.add(e.gridHelper),e}return Object(c["a"])(n,[{key:"createStats",value:function(){var e=new Re["a"];return document.body.append(e.dom),e}},{key:"createAxesHelper",value:function(){var e=new u["c"](200);return e.position.set(0,100,0),e}},{key:"createGridHelper",value:function(){return new u["o"](2e3,50)}}]),n}(u["p"]),Ne=function(){return location.search.includes("help=1")},Ae=function(e){var t=new u["w"](e);return Promise.all([F.loadResource(t),X.loadResource(t),Y.loadResource(t),I.loadResource(t),E.loadResource(),G.loadResource(t)])},We=function(){function e(){Object(i["a"])(this,e),Object(s["a"])(this,"renderer",void 0),Object(s["a"])(this,"camera",void 0),Object(s["a"])(this,"baseCamera",void 0),Object(s["a"])(this,"scene",void 0),Object(s["a"])(this,"highlightComposer",void 0),Object(s["a"])(this,"highlightOutlinePass",void 0),Object(s["a"])(this,"controls",void 0),Object(s["a"])(this,"structure",void 0),Object(s["a"])(this,"baseMonitorTarget",void 0),Object(s["a"])(this,"helper",void 0),this.renderer=this.initRender(),this.camera=this.initCamera(),this.baseCamera=this.camera.clone(),this.scene=this.initScene(),this.controls=this.initControls(),this.baseMonitorTarget=this.controls.target.clone(),Ne()&&(this.helper=new He,this.scene.add(this.helper)),this.initLight();var t=Ie(this.scene,this.camera,this.renderer),n=t.composer,a=t.outlinePass;this.highlightComposer=n,this.highlightOutlinePass=a,this.initEvent(),this.structure=new Pe,this.scene.add(this.structure),this.locationODC(),this.animate()}return Object(c["a"])(e,[{key:"addEvent",value:function(e,t){w.addEventListener(e,(function(e){var n=e.message;return t(n)}))}},{key:"activeCamera",value:function(e){var t=e.index,n=e.area,a=n===J.north?this.structure.getMonitors().north[t]:this.structure.getMonitors().south[t];null===a||void 0===a||a.observationArea({camera:this.camera,controls:this.controls})}},{key:"highLightCamera",value:function(e){var t=e.index,n=e.area,a=e.option,o=n===J.north?this.structure.getMonitors().north[t]:this.structure.getMonitors().south[t],r=0===a?16777215:4562671;null===o||void 0===o||o.setColor(r)}},{key:"getStructure",value:function(){return this.structure}},{key:"getCamera",value:function(){return this.camera}},{key:"getControls",value:function(){return this.controls}},{key:"refresh",value:function(){Q({camera:this.camera,controls:this.controls},{cameraPosition:this.camera.position,orbitTargetPosition:this.controls.target},{cameraPosition:this.baseCamera.position,orbitTargetPosition:this.baseMonitorTarget})}},{key:"lightSeat",value:function(e){var t=this,n=L(this.structure,G.clazzName);n.forEach((function(e){e.lightOff()})),e.forEach((function(e){var n=B(t.structure,G.clazzName,e);n&&n.lightOn()}))}},{key:"initEvent",value:function(){var e=this;window.addEventListener("resize",(function(t){e.camera&&e.renderer&&(e.camera.aspect=window.innerWidth/window.innerHeight,e.camera.updateProjectionMatrix(),e.renderer.setSize(window.innerWidth,window.innerHeight))}));var t=new g({camera:this.camera,highlightOutlinePass:this.highlightOutlinePass});w.addEventListener("addMousemoveObserver",(function(e){var n=e.message;return t.addObservers(n)}));var n=new k({camera:this.camera,highlightOutlinePass:this.highlightOutlinePass,controls:this.controls});w.addEventListener("addClickObserver",(function(e){var t=e.message;return n.addObservers(t)}))}},{key:"initControls",value:function(){var e=new b["a"](this.camera,this.renderer.domElement);return e.maxDistance=1800,e.screenSpacePanning=!1,e.maxPolarAngle=Math.PI/2.06,e}},{key:"initLight",value:function(){var e=new u["b"](6316128,2);this.scene.add(e)}},{key:"initCamera",value:function(){var e=new u["H"](50,window.innerWidth/window.innerHeight,1,6e3);return e.position.set(-712,1e3,-712),e.lookAt(0,0,0),e}},{key:"initScene",value:function(){return new u["P"]}},{key:"initRender",value:function(){var e=new u["cb"]({antialias:!0,alpha:!0});return e.setClearAlpha(.2),e.setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),document.body.append(e.domElement),e}},{key:"animate",value:function(){var e;(requestAnimationFrame(this.animate.bind(this)),l["c"](),this.highlightComposer.render(),Ne())&&(null===(e=this.helper)||void 0===e||e.stats.update())}},{key:"locationODC",value:function(){var e=new u["d"];e.expandByObject(this.structure);var t=new u["ab"];e.getCenter(t),this.structure.position.x=this.structure.position.x-t.x,this.structure.position.z=this.structure.position.z-t.z}}]),e}();Object(a["K"])("data-v-522e901a");var _e={class:"group-container"},Le={class:"group-item"},Be={class:"group-base-info"},qe={class:"group-name"},Ue={class:"people-count"},Qe={class:"group-seat"};function Ke(e,t,n,o,r,i){var c=Object(a["Q"])("wind-power"),s=Object(a["Q"])("user"),u=Object(a["Q"])("el-tag"),l=Object(a["Q"])("o-panel");return Object(a["H"])(),Object(a["k"])(l,{class:"info-container",title:"项目组信息"},{default:Object(a["fb"])((function(){return[Object(a["n"])("div",_e,[(Object(a["H"])(!0),Object(a["m"])(a["b"],null,Object(a["O"])(e.groups,(function(t){return Object(a["H"])(),Object(a["m"])("div",{key:t.code,class:"groups"},[Object(a["n"])("div",Le,[Object(a["n"])("p",Be,[Object(a["n"])("span",qe,[Object(a["q"])(c,{class:"icon"}),Object(a["p"])(Object(a["U"])(t.code),1)]),Object(a["n"])("span",Ue,[Object(a["q"])(s,{class:"icon"}),Object(a["p"])(Object(a["U"])(t.seats.length),1)])]),Object(a["n"])("p",Qe,[(Object(a["H"])(!0),Object(a["m"])(a["b"],null,Object(a["O"])(t.seats,(function(t){return Object(a["H"])(),Object(a["k"])(u,{key:t,class:"seat-tag",size:"mini",effect:"dark","disable-transitions":!0,color:e.activeSeat===t?"#409EFF":"#303133",onClick:function(n){return e.onSeatClick(t)}},{default:Object(a["fb"])((function(){return[Object(a["p"])(Object(a["U"])(t.toUpperCase()),1)]})),_:2},1032,["color","onClick"])})),128))])])])})),128))])]})),_:1})}Object(a["I"])();var Ge=n("dc7a"),Fe=n("5175");Object(a["K"])("data-v-07086792");var Xe={class:"card-header"};function Ye(e,t,n,o,r,i){var c=Object(a["Q"])("el-card");return Object(a["H"])(),Object(a["k"])(c,{class:"card-define",shadow:"hover"},{header:Object(a["fb"])((function(){return[Object(a["n"])("div",Xe,[Object(a["n"])("span",null,Object(a["U"])(e.theTitle),1)])]})),default:Object(a["fb"])((function(){return[Object(a["P"])(e.$slots,"default",{},void 0,!0)]})),_:3})}Object(a["I"])();var Je=Object(a["r"])({name:"App",components:{ElCard:r["b"]},props:{title:{required:!0,type:String}},setup:function(e){return{theTitle:e.title}}});n("73cf");Je.render=Ye,Je.__scopeId="data-v-07086792";var Ze=Je,$e=Object(a["r"])({components:{OPanel:Ze,ElTag:r["h"],WindPower:Ge["a"],User:Fe["a"]},emits:["seat-click"],setup:function(e,t){var n=Object(a["M"])(),o=function(e){n.value=e,t.emit("seat-click",e)};return{groups:be,useSeat:le.useSeat,totalSeat:le.totalSeat,usageRate:Math.ceil(le.useSeat/le.totalSeat*100),activeSeat:n,onSeatClick:o}}});n("5f7b");$e.render=Ke,$e.__scopeId="data-v-522e901a";var Ve=$e;Object(a["K"])("data-v-323ed5b8");var et={class:"content"},tt={class:"overview-box"},nt={class:"percentage-value"},at=Object(a["n"])("span",{class:"percentage-label"},"工位使用率",-1),ot={class:"progress-info"},rt={class:"progress-info-item"},it=Object(a["n"])("span",{class:"label"},"使用中工位",-1),ct={class:"value-use"},st={class:"progress-info-item"},ut=Object(a["n"])("span",{class:"label"},"未使用中工位",-1),lt={class:"value-no-use"},bt={class:"devices-box"},dt={class:"device-label"},vt={class:"device-info"},ht={class:"device-number"};function ft(e,t,n,o,r,i){var c=Object(a["Q"])("el-progress"),s=Object(a["Q"])("apple"),u=Object(a["Q"])("monitor"),l=Object(a["Q"])("wallet"),b=Object(a["Q"])("o-panel");return Object(a["H"])(),Object(a["k"])(b,{class:"info-container",title:"ODC 概况"},{default:Object(a["fb"])((function(){return[Object(a["n"])("div",et,[Object(a["n"])("div",tt,[Object(a["q"])(c,{class:"odc-progress","stroke-width":12,type:"circle",percentage:e.usageRate,color:"#459eff"},{default:Object(a["fb"])((function(e){var t=e.percentage;return[Object(a["n"])("span",nt,Object(a["U"])(t)+"%",1),at]})),_:1},8,["percentage"]),Object(a["n"])("div",ot,[Object(a["n"])("p",rt,[it,Object(a["n"])("span",ct,Object(a["U"])(e.useSeat),1)]),Object(a["n"])("p",st,[ut,Object(a["n"])("span",lt,Object(a["U"])(e.totalSeat-e.useSeat),1)])])]),Object(a["n"])("div",bt,[(Object(a["H"])(!0),Object(a["m"])(a["b"],null,Object(a["O"])(e.devicesInfo,(function(t){return Object(a["H"])(),Object(a["m"])("div",{key:t.type,class:"device-box"},[Object(a["n"])("div",dt,["macmini"===t.type?(Object(a["H"])(),Object(a["k"])(s,{key:0,class:"icon"})):Object(a["l"])("",!0),"screen"===t.type?(Object(a["H"])(),Object(a["k"])(u,{key:1,class:"icon"})):Object(a["l"])("",!0),"pc"===t.type?(Object(a["H"])(),Object(a["k"])(l,{key:2,class:"icon"})):Object(a["l"])("",!0),Object(a["n"])("span",null,Object(a["U"])(t.title),1)]),Object(a["n"])("div",vt,[Object(a["n"])("span",ht,Object(a["U"])(t.data.usage)+"/"+Object(a["U"])(t.data.total),1),Object(a["q"])(c,{class:"device-progress","stroke-width":e.uiConfig.deviceStrokeWidth,width:e.uiConfig.deviceProgressWidth,"show-text":!1,color:"#459eff",type:"circle",percentage:t.data.usageRate},null,8,["stroke-width","width","percentage"])])])})),128))])])]})),_:1})}Object(a["I"])();var Ot=n("8159"),pt=n("d055"),jt=n("e470"),mt={deviceStrokeWidth:3,deviceProgressWidth:32},gt=Object(a["r"])({components:{OPanel:Ze,ElProgress:r["g"],Apple:Ot["a"],Monitor:pt["a"],Wallet:jt["a"]},setup:function(){var e=[{type:"screen",title:"显示器",data:de()},{type:"macmini",title:"Mac Mini",data:ve()},{type:"pc",title:"PC",data:he()}];return{uiConfig:mt,groups:be,useSeat:le.useSeat,totalSeat:le.totalSeat,usageRate:Math.ceil(le.useSeat/le.totalSeat*100),devicesInfo:e}}});n("ccca");gt.render=ft,gt.__scopeId="data-v-323ed5b8";var yt=gt;Object(a["K"])("data-v-5fcd2eda");var kt={class:"toolbar"},wt=Object(a["p"])(" 重置 "),xt=Object(a["p"])(" 切换观测点"),Mt=Object(a["n"])("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),zt=["onClick","onMouseenter","onMouseleave"];function Pt(e,t,n,o,r,i){var c=Object(a["Q"])("el-button"),s=Object(a["Q"])("el-dropdown-item"),u=Object(a["Q"])("el-dropdown-menu"),l=Object(a["Q"])("el-dropdown");return Object(a["H"])(),Object(a["m"])("div",kt,[Object(a["q"])(c,{class:"toolbar__reset-btn",icon:"el-icon-refresh",onClick:e.refresh},{default:Object(a["fb"])((function(){return[wt]})),_:1},8,["onClick"]),Object(a["q"])(l,null,{dropdown:Object(a["fb"])((function(){return[Object(a["q"])(u,null,{default:Object(a["fb"])((function(){return[(Object(a["H"])(!0),Object(a["m"])(a["b"],null,Object(a["O"])(e.ObserveAreaOpts,(function(t){return Object(a["H"])(),Object(a["k"])(s,{key:t},{default:Object(a["fb"])((function(){return[Object(a["n"])("div",{onClick:function(n){return e.handleMenuItemClick(null===t||void 0===t?void 0:t.observeIndex,null===t||void 0===t?void 0:t.areaType)},onMouseenter:function(n){return e.handleMouseMove(null===t||void 0===t?void 0:t.observeIndex,null===t||void 0===t?void 0:t.areaType)},onMouseleave:function(n){return e.handleMouseMove(null===t||void 0===t?void 0:t.observeIndex,null===t||void 0===t?void 0:t.areaType,0)}},Object(a["U"])(t.label),41,zt)]})),_:2},1024)})),128))]})),_:1})]})),default:Object(a["fb"])((function(){return[Object(a["q"])(c,{icon:"el-icon-location"},{default:Object(a["fb"])((function(){return[xt,Mt]})),_:1})]})),_:1})])}Object(a["I"])();var Ct=[{label:"北1观测点",type:"monitor",observeIndex:0,areaType:J.north},{label:"北2观测点",type:"monitor",observeIndex:1,areaType:J.north},{label:"北3观测点",type:"monitor",observeIndex:2,areaType:J.north},{label:"北4观测点",type:"monitor",observeIndex:3,areaType:J.north},{label:"南1观测点",type:"monitor",observeIndex:0,areaType:J.south},{label:"南2观测点",type:"monitor",observeIndex:1,areaType:J.south},{label:"南3观测点",type:"monitor",observeIndex:2,areaType:J.south}],Tt=Object(a["r"])({components:{ElDropdownMenu:r["e"],ElButton:r["a"],ElDropdownItem:r["d"],ElDropdown:r["c"]},props:{odcInstance:{type:Object}},emits:["click-monitor-btn","monitor-mouse-move","refresh"],setup:function(e,t){var n=function(e,n){t.emit("click-monitor-btn",{index:e,area:n})},a=function(e,n,a){t.emit("monitor-mouse-move",{index:e,area:n,option:a})},o=function(){t.emit("refresh")};return{handleMenuItemClick:n,handleMouseMove:a,refresh:o,seatAreaType:J,ObserveAreaOpts:Ct}}});n("d4b1");Tt.render=Pt,Tt.__scopeId="data-v-5fcd2eda";var St=Tt;n("a15b");Object(a["K"])("data-v-62c4ae60");var Dt={class:"user"},Et=Object(a["n"])("p",{class:"label"},"使用者",-1),It={class:"value"},Rt={class:"macmini"},Ht=Object(a["n"])("p",{class:"label"},"Mac Mini",-1),Nt={class:"value"},At={class:"pc"},Wt=Object(a["n"])("p",{class:"label"},"PC",-1),_t={class:"value"},Lt={class:"monitor"},Bt=Object(a["n"])("p",{class:"label"},"显示器",-1),qt={class:"value"},Ut=Object(a["p"])("关闭");function Qt(e,t,n,o,r,i){var c=Object(a["Q"])("el-button"),s=Object(a["Q"])("o-panel");return e.visible?(Object(a["H"])(),Object(a["k"])(s,{key:0,class:"info-container",title:"工位信息-".concat(e.data.code)},{default:Object(a["fb"])((function(){return[Object(a["n"])("div",Dt,[Et,Object(a["n"])("p",It,Object(a["U"])(e.data.user),1)]),Object(a["n"])("div",Rt,[Ht,Object(a["n"])("p",Nt,Object(a["U"])(e.data.macMini),1)]),Object(a["n"])("div",At,[Wt,Object(a["n"])("p",_t,Object(a["U"])(e.data.pc),1)]),Object(a["n"])("div",Lt,[Bt,Object(a["n"])("p",qt,Object(a["U"])(e.data.monitor.join(",")),1)]),Object(a["q"])(c,{plain:"",class:"button",size:"mini",onClick:Object(a["ib"])(e.onClose,["stop"])},{default:Object(a["fb"])((function(){return[Ut]})),_:1},8,["onClick"])]})),_:1},8,["title"])):Object(a["l"])("",!0)}Object(a["I"])();var Kt=Object(a["r"])({components:{OPanel:Ze,ElButton:r["a"]},props:{visible:{required:!0,type:Boolean},data:{required:!0,type:Object}},emits:["close"],setup:function(e,t){return{onClose:function(){return t.emit("close")}}}});n("c227");Kt.render=Qt,Kt.__scopeId="data-v-62c4ae60";var Gt=Kt,Ft=Object(a["r"])({name:"App",components:{BizGroupInfo:Ve,OverviewInfo:yt,MonitorToolbar:St,SeatInfo:Gt},setup:function(){var e,t=Object(a["L"])({data:void 0,visible:!1}),n=r["f"].service({lock:!0,text:"ODC Loading",background:"rgba(0, 0, 0, 0.7)"}),o=function(e){t.data=e,t.visible=!0};return Ae((function(){return n.close()})).then((function(){e=new We,e.addEvent(U.showSeatInfo,o)})),{onSeatClick:function(t){var n;return null===(n=e)||void 0===n?void 0:n.lightSeat([t])},onMonitorClick:function(t){var n,a=t.index,o=t.area;return null===(n=e)||void 0===n?void 0:n.activeCamera({index:a,area:o})},onMonitorMouseMove:function(t){var n,a=t.index,o=t.area,r=t.option;return null===(n=e)||void 0===n?void 0:n.highLightCamera({index:a,area:o,option:r})},onRefresh:function(){var t;return null===(t=e)||void 0===t?void 0:t.refresh()},seatInfo:t}}});Ft.render=o;var Xt=Ft;n("26af"),n("05b3"),n("db43");Object(a["j"])(Xt).mount("#app")},d4b1:function(e,t,n){"use strict";n("703d")},db43:function(e,t,n){}});
//# sourceMappingURL=app.e3216916.js.map